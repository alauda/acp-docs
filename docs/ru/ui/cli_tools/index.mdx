---
weight: 20
title: CLI Инструменты
sourceSHA: 91816260c340550e9a8a83a6e4335698d4235a83241bb6af057d1f9dbfa7721d
---

# CLI Инструменты

## Обзор

Инструмент CLI `violet` является интегрированной утилитой платформы, которая позволяет загружать программные пакеты из вашего пользовательского портала на платформу. Инструмент поддерживает три типа программных пакетов: Операторы, Плагины Кластера и Helm чарты.

### Поддерживаемые операционные системы

- Linux, macOS и Windows
- Linux и macOS поддерживают архитектуры x86 и ARM

### Требования к разрешениям

- Вы должны предоставить действительную учетную запись пользователя платформы (имя пользователя и пароль)
- Учетная запись должна иметь установлено свойство роли **`System`**, и имя роли должно быть **`platform-admin-system`**

> **Примечание:** Если ваша учетная запись имеет свойство роли, установленное на `Custom`, а не `System`, вы не сможете использовать этот инструмент, даже если у роли есть все разрешения **`Управление Платформой`**.

## Загрузка инструмента

1. Перейдите к представлению **Управление Платформой**
2. Нажмите на **Marketplace**/**Загрузить Пакеты** в левой навигации
3. Нажмите **Скачать Инструмент Загрузки Пакетов**
4. Выберите бинарный файл, соответствующий вашей операционной системе и архитектуре

## Установка инструмента

После загрузки инструмента установите его на вашем сервере упаковки или загрузки или на персональном ПК.

### Для Linux или macOS

**Для пользователей без прав root:**

```bash
# Linux x86
sudo mv -f violet_linux_amd64 /usr/local/bin/violet && sudo chmod +x /usr/local/bin/violet
# Linux ARM
sudo mv -f violet_linux_arm64 /usr/local/bin/violet && sudo chmod +x /usr/local/bin/violet
# macOS x86
sudo mv -f violet_darwin_amd64 /usr/local/bin/violet && sudo chmod +x /usr/local/bin/violet
# macOS ARM
sudo mv -f violet_darwin_arm64 /usr/local/bin/violet && sudo chmod +x /usr/local/bin/violet
```

**Для пользователей с правами root:**

```bash
# Linux x86
mv -f violet_linux_amd64 /usr/bin/violet && chmod +x /usr/bin/violet
# Linux ARM
mv -f violet_linux_arm64 /usr/bin/violet && chmod +x /usr/bin/violet
# macOS x86
mv -f violet_darwin_amd64 /usr/bin/violet && chmod +x /usr/bin/violet
# macOS ARM
mv -f violet_darwin_arm64 /usr/bin/violet && chmod +x /usr/bin/violet
```

### Для Windows

1. Загрузите файл и переименуйте его в `violet.exe` или используйте PowerShell для переименования:

```bash
# Windows x86
mv -Force violet_windows_amd64.exe violet.exe
```

2. Запустите инструмент в PowerShell.

> **Примечание**: Если вы не добавили путь к инструменту в переменные окружения, вам нужно будет указывать полный путь к инструменту при выполнении команд.

## Использование инструмента

### Предварительный просмотр пакетов

Администраторы платформы могут использовать `violet show`, чтобы просмотреть и подтвердить информацию о пакете перед загрузкой.

```bash
$ violet show topolvm-operator.v2.3.0.tgz
Название: NativeStor
Тип: bundle
Архитектура: [linux/amd64]
Версия: 2.3.0

$ violet show topolvm-operator.v2.3.0.tgz --all
Название: NativeStor
Тип: bundle
Архитектура: []
Версия: 2.3.0
Артефакт: harbor.demo.io/acp/topolvm-operator-bundle:v3.11.0
СвязанныеИзображения: [harbor.demo.io/acp/topolvm-operator:v3.11.0 harbor.demo.io/acp/topolvm:v3.11.0 harbor.demo.io/3rdparty/k8scsi/csi-provisioner:v3.00 harbor.demo.io/3rdparty/k8scsi/csi-provisioner:v2.1.1 harbor.demo.io/3rdparty/k8scsi/csi-resizer:v1.3.0 harbor.demo.io/3rdparty/k8scsi/csi-attacher:v3.3.0 harbor.demo.io/3rdparty/k8scsi/csi-snapshotter:v3.0.2 harbor.demo.io/3rdparty/k8scsi/csi-node-driver-registrar:v2.3.0 harbordemo.io/3rdparty/k8scsi/livenessprobe:v2.4.0]
```

### Загрузка Операторов

```bash
violet push opensearch-operator.v3.14.2.tgz --platform-address https://192.168.0.1 --platform-username <пользователь> --platform-password <пароль>
```

<table style={{ borderCollapse: 'collapse', width: '100%' }}>
  <thead>
    <tr>
      <th style={{ whiteSpace: 'nowrap', padding: '8px', borderBottom: '1px solid #ddd' }}>Параметр</th>
      <th style={{ padding: '8px', borderBottom: '1px solid #ddd' }}>Описание</th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td style={{ whiteSpace: 'nowrap', padding: '8px', borderBottom: '1px solid #ddd' }}><code>args\[0]</code></td>
      <td style={{ padding: '8px', borderBottom: '1px solid #ddd' }}>Обязательный. Первый параметр после команды <code>violet push</code>. Укажите путь к файлу пакета, который необходимо загрузить. Для нескольких пакетов поместите их в одну папку и укажите путь к директории - инструмент автоматически загрузит все пакеты в директории.</td>
    </tr>

    <tr>
      <td style={{ whiteSpace: 'nowrap', padding: '8px', borderBottom: '1px solid #ddd' }}><code>--platform-address</code></td>
      <td style={{ padding: '8px', borderBottom: '1px solid #ddd' }}>Обязательный. Адрес доступа к платформе.</td>
    </tr>

    <tr>
      <td style={{ whiteSpace: 'nowrap', padding: '8px', borderBottom: '1px solid #ddd' }}><code>--platform-username</code></td>
      <td style={{ padding: '8px', borderBottom: '1px solid #ddd' }}>Обязательный. Имя пользователя локального пользователя с ролью <code>Администратор Платформы</code>.</td>
    </tr>

    <tr>
      <td style={{ whiteSpace: 'nowrap', padding: '8px', borderBottom: '1px solid #ddd' }}><code>--platform-password</code></td>
      <td style={{ padding: '8px', borderBottom: '1px solid #ddd' }}>Обязательный. Пароль для имени пользователя.</td>
    </tr>

    <tr>
      <td style={{ whiteSpace: 'nowrap', padding: '8px', borderBottom: '1px solid #ddd' }}><code>--skip-push</code></td>
      <td style={{ padding: '8px', borderBottom: '1px solid #ddd' }}>Необязательный. Добавьте этот параметр, когда необходимо создать только ресурсы, связанные с загрузкой, без отправки изображений.</td>
    </tr>

    <tr>
      <td style={{ whiteSpace: 'nowrap', padding: '8px', borderBottom: '1px solid #ddd' }}><code>--force</code></td>
      <td style={{ padding: '8px', borderBottom: '1px solid #ddd' }}>Необязательный. Добавьте этот параметр, чтобы принудительно перезаписать и обновить связанные ресурсы, когда изображения в пакете уже существуют на платформе.</td>
    </tr>

    <tr>
      <td style={{ whiteSpace: 'nowrap', padding: '8px', borderBottom: '1px solid #ddd' }}><code>--target-chartrepo</code></td>
      <td style={{ padding: '8px', borderBottom: '1px solid #ddd' }}>Необязательный. Добавьте этот параметр, когда нужно загрузить в определённый catalogsource.</td>
    </tr>

    <tr>
      <td style={{ whiteSpace: 'nowrap', padding: '8px', borderBottom: '1px solid #ddd' }}><code>--clusters</code></td>
      <td style={{ padding: '8px', borderBottom: '1px solid #ddd' }}>Необязательный. Добавьте этот параметр, чтобы указать, в какие кластеры загружать. Разделяйте названия кластеров запятыми, например, <code>global,cluster1,cluster2</code>. Если не указано, пакет будет загружен в кластер <code>global</code> по умолчанию.</td>
    </tr>

    <tr>
      <td style={{ whiteSpace: 'nowrap', padding: '8px', borderBottom: '1px solid #ddd' }}><code>--debug</code></td>
      <td style={{ padding: '8px', borderBottom: '1px solid #ddd' }}>Необязательный. Добавьте этот параметр, когда необходимо распечатать информацию отладочного лога.</td>
    </tr>
  </tbody>
</table>

### Загрузка плагинов кластера

```bash
violet push plugins-cloudedge-v0.3.16-hybrid.tgz --platform-address https://192.168.0.1 --platform-username <пользователь> --platform-password <пароль>
```

<table style={{ borderCollapse: 'collapse', width: '100%' }}>
  <thead>
    <tr>
      <th style={{ whiteSpace: 'nowrap', padding: '8px', borderBottom: '1px solid #ddd' }}>Параметр</th>
      <th style={{ padding: '8px', borderBottom: '1px solid #ddd' }}>Описание</th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td style={{ whiteSpace: 'nowrap', padding: '8px', borderBottom: '1px solid #ddd' }}><code>args\[0]</code></td>
      <td style={{ padding: '8px', borderBottom: '1px solid #ddd' }}>Обязательный. Первый параметр после команды <code>violet push</code>. Укажите путь к файлу пакета, который необходимо загрузить. Для нескольких пакетов поместите их в одну папку и укажите путь к директории - инструмент автоматически загрузит все пакеты в директории.</td>
    </tr>

    <tr>
      <td style={{ whiteSpace: 'nowrap', padding: '8px', borderBottom: '1px solid #ddd' }}><code>--platform-address</code></td>
      <td style={{ padding: '8px', borderBottom: '1px solid #ddd' }}>Обязательный. Адрес доступа к платформе.</td>
    </tr>

    <tr>
      <td style={{ whiteSpace: 'nowrap', padding: '8px', borderBottom: '1px solid #ddd' }}><code>--platform-username</code></td>
      <td style={{ padding: '8px', borderBottom: '1px solid #ddd' }}>Обязательный. Имя пользователя локального пользователя с ролью <code>Администратор Платформы</code>.</td>
    </tr>

    <tr>
      <td style={{ whiteSpace: 'nowrap', padding: '8px', borderBottom: '1px solid #ddd' }}><code>--platform-password</code></td>
      <td style={{ padding: '8px', borderBottom: '1px solid #ddd' }}>Обязательный. Пароль для имени пользователя.</td>
    </tr>

    <tr>
      <td style={{ whiteSpace: 'nowrap', padding: '8px', borderBottom: '1px solid #ddd' }}><code>--skip-push</code></td>
      <td style={{ padding: '8px', borderBottom: '1px solid #ddd' }}>Необязательный. Добавьте этот параметр, когда необходимо создать только ресурсы, связанные с загрузкой, без отправки изображений.</td>
    </tr>

    <tr>
      <td style={{ whiteSpace: 'nowrap', padding: '8px', borderBottom: '1px solid #ddd' }}><code>--force</code></td>
      <td style={{ padding: '8px', borderBottom: '1px solid #ddd' }}>Необязательный. Добавьте этот параметр, чтобы принудительно перезаписать и обновить связанные ресурсы, когда изображения в пакете уже существуют на платформе.</td>
    </tr>

    <tr>
      <td style={{ whiteSpace: 'nowrap', padding: '8px', borderBottom: '1px solid #ddd' }}><code>--debug</code></td>
      <td style={{ padding: '8px', borderBottom: '1px solid #ddd' }}>Необязательный. Добавьте этот параметр, когда необходимо распечатать информацию отладочного лога.</td>
    </tr>
  </tbody>
</table>

> **Совет:** Загрузка плагинов кластера не поддерживает указание кластеров. Если вы хотите загрузить только в кластер `global`, необходимо настроить ModulePlugin. Для конкретных методов конфигурации, пожалуйста, свяжитесь с технической поддержкой.

### Загрузка Helm Чартов

```bash
violet push chartmuseum-v3.16.1.tgz --platform-address https://192.168.0.1 --platform-username <пользователь> --platform-password <пароль>
```

<table style={{ borderCollapse: 'collapse', width: '100%' }}>
  <thead>
    <tr>
      <th style={{ whiteSpace: 'nowrap', padding: '8px', borderBottom: '1px solid #ddd' }}>Параметр</th>
      <th style={{ padding: '8px', borderBottom: '1px solid #ddd' }}>Описание</th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td style={{ whiteSpace: 'nowrap', padding: '8px', borderBottom: '1px solid #ddd' }}><code>args\[0]</code></td>
      <td style={{ padding: '8px', borderBottom: '1px solid #ddd' }}>Обязательный. Первый параметр после команды <code>violet push</code>. Укажите путь к файлу пакета, который необходимо загрузить. Для нескольких пакетов поместите их в одну папку и укажите путь к директории - инструмент автоматически загрузит все пакеты в директории.</td>
    </tr>

    <tr>
      <td style={{ whiteSpace: 'nowrap', padding: '8px', borderBottom: '1px solid #ddd' }}><code>--platform-address</code></td>
      <td style={{ padding: '8px', borderBottom: '1px solid #ddd' }}>Обязательный. Адрес доступа к платформе.</td>
    </tr>

    <tr>
      <td style={{ whiteSpace: 'nowrap', padding: '8px', borderBottom: '1px solid #ddd' }}><code>--platform-username</code></td>
      <td style={{ padding: '8px', borderBottom: '1px solid #ddd' }}>Обязательный. Имя пользователя локального пользователя с ролью <code>Администратор Платформы</code>.</td>
    </tr>

    <tr>
      <td style={{ whiteSpace: 'nowrap', padding: '8px', borderBottom: '1px solid #ddd' }}><code>--platform-password</code></td>
      <td style={{ padding: '8px', borderBottom: '1px solid #ddd' }}>Обязательный. Пароль для имени пользователя.</td>
    </tr>

    <tr>
      <td style={{ whiteSpace: 'nowrap', padding: '8px', borderBottom: '1px solid #ddd' }}><code>--skip-push</code></td>
      <td style={{ padding: '8px', borderBottom: '1px solid #ddd' }}>Необязательный. Добавьте этот параметр, когда необходимо создать только ресурсы, связанные с загрузкой, без отправки изображений.</td>
    </tr>

    <tr>
      <td style={{ whiteSpace: 'nowrap', padding: '8px', borderBottom: '1px solid #ddd' }}><code>--force</code></td>
      <td style={{ padding: '8px', borderBottom: '1px solid #ddd' }}>Необязательный. Добавьте этот параметр, чтобы принудительно перезаписать и обновить связанные ресурсы, когда изображения в пакете уже существуют на платформе.</td>
    </tr>

    <tr>
      <td style={{ whiteSpace: 'nowrap', padding: '8px', borderBottom: '1px solid #ddd' }}><code>--debug</code></td>
      <td style={{ padding: '8px', borderBottom: '1px solid #ddd' }}>Необязательный. Добавьте этот параметр, когда необходимо распечатать информацию отладочного лога.</td>
    </tr>
  </tbody>
</table>

> **Совет:** Процесс загрузки не поддерживает указание репозитория шаблонов. По умолчанию пакеты будут загружены в `public-charts`.
