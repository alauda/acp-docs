---
weight: 20
title: CLI Tools
sourceSHA: 91816260c340550e9a8a83a6e4335698d4235a83241bb6af057d1f9dbfa7721d
---

# CLI Tools

## Обзор

Утилита `violet` CLI является интегрированным инструментом платформы, который позволяет загружать программные пакеты с вашего пользовательского портала на платформу. Утилита поддерживает три типа программных пакетов: Операторы, Плагины кластера и Helm charts.

### Поддерживаемые операционные системы

- Linux, macOS и Windows
- Linux и macOS поддерживают архитектуры x86 и ARM

### Требования к правам доступа

- Вы должны предоставить действующую учетную запись пользователя платформы (имя пользователя и пароль)
- Учетная запись должна иметь установленное свойство роли **`System`**, а имя роли должно быть **`platform-admin-system`**

> **Примечание:** Если у вашей учетной записи установлено свойство роли `Custom` вместо `System`, вы не сможете использовать этот инструмент, даже если у роли есть все разрешения **`Platform Management`**.

## Загрузка инструмента

1. Перейдите к представлению **Platform Management**
2. Нажмите на **Marketplace**/**Upload Packages** в левой навигации
3. Нажмите **Download Package Upload Tool**
4. Выберите бинарный файл, соответствующий вашей операционной системе и архитектуре

## Установка инструмента

После загрузки инструмента установите его на свой сервер для пакетирования или загрузки или на личный ПК.

### Для Linux или macOS

**Для пользователей без прав администратора:**

```bash
# Linux x86
sudo mv -f violet_linux_amd64 /usr/local/bin/violet && sudo chmod +x /usr/local/bin/violet
# Linux ARM
sudo mv -f violet_linux_arm64 /usr/local/bin/violet && sudo chmod +x /usr/local/bin/violet
# macOS x86
sudo mv -f violet_darwin_amd64 /usr/local/bin/violet && sudo chmod +x /usr/local/bin/violet
# macOS ARM
sudo mv -f violet_darwin_arm64 /usr/local/bin/violet && sudo chmod +x /usr/local/bin/violet
```

**Для пользователей с правами администратора:**

```bash
# Linux x86
mv -f violet_linux_amd64 /usr/bin/violet && chmod +x /usr/bin/violet
# Linux ARM
mv -f violet_linux_arm64 /usr/bin/violet && chmod +x /usr/bin/violet
# macOS x86
mv -f violet_darwin_amd64 /usr/bin/violet && chmod +x /usr/bin/violet
# macOS ARM
mv -f violet_darwin_arm64 /usr/bin/violet && chmod +x /usr/bin/violet
```

### Для Windows

1. Загрузите файл и переименуйте его в `violet.exe` или используйте PowerShell для переименования:

```bash
# Windows x86
mv -Force violet_windows_amd64.exe violet.exe
```

2. Запустите инструмент в PowerShell.

> **Примечание**: Если вы не добавили путь к инструменту в переменные окружения, вам нужно будет указать полный путь к инструменту при выполнении команд.

## Использование инструмента

### Предварительный просмотр пакетов

Администраторы платформы могут использовать `violet show`, чтобы просмотреть и подтвердить информацию о пакете перед загрузкой.

```bash
$ violet show topolvm-operator.v2.3.0.tgz
Name: NativeStor
Type: bundle
Arch: [linux/amd64]
Version: 2.3.0

$ violet show topolvm-operator.v2.3.0.tgz --all
Name: NativeStor
Type: bundle
Arch: []
Version: 2.3.0
Artifact: harbor.demo.io/acp/topolvm-operator-bundle:v3.11.0
RelateImages: [harbor.demo.io/acp/topolvm-operator:v3.11.0 harbor.demo.io/acp/topolvm:v3.11.0 harbor.demo.io/3rdparty/k8scsi/csi-provisioner:v3.00 harbor.demo.io/3rdparty/k8scsi/csi-provisioner:v2.1.1 harbor.demo.io/3rdparty/k8scsi/csi-resizer:v1.3.0 harbor.demo.io/3rdparty/k8scsicsi-attacher:v3.3.0 harbor.demo.io/3rdparty/k8scsi/csi-snapshotter:v3.0.2 harbor.demo.io/3rdparty/k8scsi/csi-node-driver-registrar:v2.3.0 harbordemo.io/3rdparty/k8scsi/livenessprobe:v2.4.0]
```

### Загрузка операторов

```bash
violet push opensearch-operator.v3.14.2.tgz --platform-address https://192.168.0.1 --platform-username <user> --platform-password <password>
```

<table style={{ borderCollapse: 'collapse', width: '100%' }}>
  <thead>
    <tr>
      <th style={{ whiteSpace: 'nowrap', padding: '8px', borderBottom: '1px solid #ddd' }}>Параметр</th>
      <th style={{ padding: '8px', borderBottom: '1px solid #ddd' }}>Описание</th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td style={{ whiteSpace: 'nowrap', padding: '8px', borderBottom: '1px solid #ddd' }}><code>args\[0]</code></td>
      <td style={{ padding: '8px', borderBottom: '1px solid #ddd' }}>Обязательно. Первый параметр после команды <code>violet push</code>. Укажите путь к файлу пакета, который должен быть загружен. Для нескольких пакетов поместите их в одну директорию и укажите путь к директории - инструмент автоматически загрузит все пакеты в директории.</td>
    </tr>

    <tr>
      <td style={{ whiteSpace: 'nowrap', padding: '8px', borderBottom: '1px solid #ddd' }}><code>--platform-address</code></td>
      <td style={{ padding: '8px', borderBottom: '1px solid #ddd' }}>Обязательно. Адрес доступа к платформе.</td>
    </tr>

    <tr>
      <td style={{ whiteSpace: 'nowrap', padding: '8px', borderBottom: '1px solid #ddd' }}><code>--platform-username</code></td>
      <td style={{ padding: '8px', borderBottom: '1px solid #ddd' }}>Обязательно. Имя пользователя локального пользователя с ролью <code>Platform Administrator</code>.</td>
    </tr>

    <tr>
      <td style={{ whiteSpace: 'nowrap', padding: '8px', borderBottom: '1px solid #ddd' }}><code>--platform-password</code></td>
      <td style={{ padding: '8px', borderBottom: '1px solid #ddd' }}>Обязательно. Пароль для имени пользователя.</td>
    </tr>

    <tr>
      <td style={{ whiteSpace: 'nowrap', padding: '8px', borderBottom: '1px solid #ddd' }}><code>--skip-push</code></td>
      <td style={{ padding: '8px', borderBottom: '1px solid #ddd' }}>Необязательно. Добавьте этот параметр, когда вам нужно только создать ресурсы, связанные с загрузкой, без отправки изображений.</td>
    </tr>

    <tr>
      <td style={{ whiteSpace: 'nowrap', padding: '8px', borderBottom: '1px solid #ddd' }}><code>--force</code></td>
      <td style={{ padding: '8px', borderBottom: '1px solid #ddd' }}>Необязательно. Добавьте этот параметр, чтобы принудительно перезаписать и обновить связанные ресурсы, когда изображения в пакете уже существуют на платформе.</td>
    </tr>

    <tr>
      <td style={{ whiteSpace: 'nowrap', padding: '8px', borderBottom: '1px solid #ddd' }}><code>--target-chartrepo</code></td>
      <td style={{ padding: '8px', borderBottom: '1px solid #ddd' }}>Необязательно. Добавьте этот параметр, когда вам нужно загрузить в определенный каталог.</td>
    </tr>

    <tr>
      <td style={{ whiteSpace: 'nowrap', padding: '8px', borderBottom: '1px solid #ddd' }}><code>--clusters</code></td>
      <td style={{ padding: '8px', borderBottom: '1px solid #ddd' }}>Необязательно. Добавьте этот параметр, чтобы указать, в какие кластеры загружать. Разделяйте несколько имен кластеров запятыми, например, <code>global,cluster1,cluster2</code>. Если не указано, пакет будет загружен в кластер <code>global</code> по умолчанию.</td>
    </tr>

    <tr>
      <td style={{ whiteSpace: 'nowrap', padding: '8px', borderBottom: '1px solid #ddd' }}><code>--debug</code></td>
      <td style={{ padding: '8px', borderBottom: '1px solid #ddd' }}>Необязательно. Добавьте этот параметр, когда вам нужно вывести информацию отладки в лог.</td>
    </tr>
  </tbody>
</table>

### Загрузка плагинов кластера

```bash
violet push plugins-cloudedge-v0.3.16-hybrid.tgz --platform-address https://192.168.0.1 --platform-username <user> --platform-password <password>
```

<table style={{ borderCollapse: 'collapse', width: '100%' }}>
  <thead>
    <tr>
      <th style={{ whiteSpace: 'nowrap', padding: '8px', borderBottom: '1px solid #ddd' }}>Параметр</th>
      <th style={{ padding: '8px', borderBottom: '1px solid #ddd' }}>Описание</th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td style={{ whiteSpace: 'nowrap', padding: '8px', borderBottom: '1px solid #ddd' }}><code>args\[0]</code></td>
      <td style={{ padding: '8px', borderBottom: '1px solid #ddd' }}>Обязательно. Первый параметр после команды <code>violet push</code>. Укажите путь к файлу пакета, который должен быть загружен. Для нескольких пакетов поместите их в одну директорию и укажите путь к директории - инструмент автоматически загрузит все пакеты в директории.</td>
    </tr>

    <tr>
      <td style={{ whiteSpace: 'nowrap', padding: '8px', borderBottom: '1px solid #ddd' }}><code>--platform-address</code></td>
      <td style={{ padding: '8px', borderBottom: '1px solid #ddd' }}>Обязательно. Адрес доступа к платформе.</td>
    </tr>

    <tr>
      <td style={{ whiteSpace: 'nowrap', padding: '8px', borderBottom: '1px solid #ddd' }}><code>--platform-username</code></td>
      <td style={{ padding: '8px', borderBottom: '1px solid #ddd' }}>Обязательно. Имя пользователя локального пользователя с ролью <code>Platform Administrator</code>.</td>
    </tr>

    <tr>
      <td style={{ whiteSpace: 'nowrap', padding: '8px', borderBottom: '1px solid #ddd' }}><code>--platform-password</code></td>
      <td style={{ padding: '8px', borderBottom: '1px solid #ddd' }}>Обязательно. Пароль для имени пользователя.</td>
    </tr>

    <tr>
      <td style={{ whiteSpace: 'nowrap', padding: '8px', borderBottom: '1px solid #ddd' }}><code>--skip-push</code></td>
      <td style={{ padding: '8px', borderBottom: '1px solid #ddd' }}>Необязательно. Добавьте этот параметр, когда вам нужно только создать ресурсы, связанные с загрузкой, без отправки изображений.</td>
    </tr>

    <tr>
      <td style={{ whiteSpace: 'nowrap', padding: '8px', borderBottom: '1px solid #ddd' }}><code>--force</code></td>
      <td style={{ padding: '8px', borderBottom: '1px solid #ddd' }}>Необязательно. Добавьте этот параметр, чтобы принудительно перезаписать и обновить связанные ресурсы, когда изображения в пакете уже существуют на платформе.</td>
    </tr>

    <tr>
      <td style={{ whiteSpace: 'nowrap', padding: '8px', borderBottom: '1px solid #ddd' }}><code>--debug</code></td>
      <td style={{ padding: '8px', borderBottom: '1px solid #ddd' }}>Необязательно. Добавьте этот параметр, когда вам нужно вывести информацию отладки в лог.</td>
    </tr>
  </tbody>
</table>

> **Совет:** Загрузка плагинов кластера не поддерживает указание кластеров. Если вы хотите загрузить только в кластер `global`, вам нужно настроить ModulePlugin. Для конкретных методов конфигурации, пожалуйста, обратитесь в техническую поддержку.

### Загрузка Helm charts

```bash
violet push chartmuseum-v3.16.1.tgz --platform-address https://192.168.0.1 --platform-username <user> --platform-password <password>
```

<table style={{ borderCollapse: 'collapse', width: '100%' }}>
  <thead>
    <tr>
      <th style={{ whiteSpace: 'nowrap', padding: '8px', borderBottom: '1px solid #ddd' }}>Параметр</th>
      <th style={{ padding: '8px', borderBottom: '1px solid #ddd' }}>Описание</th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td style={{ whiteSpace: 'nowrap', padding: '8px', borderBottom: '1px solid #ddd' }}><code>args\[0]</code></td>
      <td style={{ padding: '8px', borderBottom: '1px solid #ddd' }}>Обязательно. Первый параметр после команды <code>violet push</code>. Укажите путь к файлу пакета, который должен быть загружен. Для нескольких пакетов поместите их в одну директорию и укажите путь к директории - инструмент автоматически загрузит все пакеты в директории.</td>
    </tr>

    <tr>
      <td style={{ whiteSpace: 'nowrap', padding: '8px', borderBottom: '1px solid #ddd' }}><code>--platform-address</code></td>
      <td style={{ padding: '8px', borderBottom: '1px solid #ddd' }}>Обязательно. Адрес доступа к платформе.</td>
    </tr>

    <tr>
      <td style={{ whiteSpace: 'nowrap', padding: '8px', borderBottom: '1px solid #ddd' }}><code>--platform-username</code></td>
      <td style={{ padding: '8px', borderBottom: '1px solid #ddd' }}>Обязательно. Имя пользователя локального пользователя с ролью <code>Platform Administrator</code>.</td>
    </tr>

    <tr>
      <td style={{ whiteSpace: 'nowrap', padding: '8px', borderBottom: '1px solid #ddd' }}><code>--platform-password</code></td>
      <td style={{ padding: '8px', borderBottom: '1px solid #ddd' }}>Обязательно. Пароль для имени пользователя.</td>
    </tr>

    <tr>
      <td style={{ whiteSpace: 'nowrap', padding: '8px', borderBottom: '1px solid #ddd' }}><code>--skip-push</code></td>
      <td style={{ padding: '8px', borderBottom: '1px solid #ddd' }}>Необязательно. Добавьте этот параметр, когда вам нужно только создать ресурсы, связанные с загрузкой, без отправки изображений.</td>
    </tr>

    <tr>
      <td style={{ whiteSpace: 'nowrap', padding: '8px', borderBottom: '1px solid #ddd' }}><code>--force</code></td>
      <td style={{ padding: '8px', borderBottom: '1px solid #ddd' }}>Необязательно. Добавьте этот параметр, чтобы принудительно перезаписать и обновить связанные ресурсы, когда изображения в пакете уже существуют на платформе.</td>
    </tr>

    <tr>
      <td style={{ whiteSpace: 'nowrap', padding: '8px', borderBottom: '1px solid #ddd' }}><code>--debug</code></td>
      <td style={{ padding: '8px', borderBottom: '1px solid #ddd' }}>Необязательно. Добавьте этот параметр, когда вам нужно вывести информацию отладки в лог.</td>
    </tr>
  </tbody>
</table>

> **Совет:** Процесс загрузки не поддерживает указание репозитория шаблонов. Пакеты будут загружены в <code>public-charts</code> по умолчанию.
