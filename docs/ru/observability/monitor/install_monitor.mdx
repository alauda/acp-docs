---
weight: 12
sourceSHA: d631c683e52fb6fc307146bc435f31d69f5b0aa129071fc1e844d3c188d65318
---

# Установка

## Обзор

Компонент мониторинга служит инфраструктурой для функций мониторинга, оповещения, инспекции и проверки работоспособности в модуле наблюдаемости. Этот документ описывает, как установить мониторинг ACP с плагином Prometheus или мониторинг ACP с плагином VictoriaMetrics в кластере.

## Подготовка к установке

Перед установкой компонентов мониторинга, пожалуйста, убедитесь, что выполнены следующие условия:

- Соответствующий компонент мониторинга был выбран, обратившись к [Руководству по выбору компонентов мониторинга](./architecture/component_selection_suggestion.mdx).
- При установке в рабочем кластере убедитесь, что глобальный кластер может получить доступ к порту 11780 рабочего кластера.
- Если вам необходимо использовать классы хранения или постоянные объемы хранилища для данных мониторинга, пожалуйста, создайте соответствующие ресурсы в разделе **Хранение** заранее.

## Установите мониторинг ACP с плагином Prometheus

### Процедуры установки

1. Перейдите в **Управление магазином приложений** > **Плагины кластера** и выберите целевой кластер.

2. Найдите плагин **Мониторинг ACP с Prometheus** и нажмите **Установить**.

3. Настройте следующие параметры:

   | Параметр                  | Описание                                                                                                                                                                                                                                                                                                                                                                 |
   |---------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
   | **Конфигурация масштаба**  | Поддерживаются три конфигурации: **Небольшой масштаб**, **Средний масштаб** и **Большой масштаб**:<br />- Значения по умолчанию установлены на основе рекомендуемых значений нагрузочного тестирования платформы<br />- Вы можете выбрать или настроить квоты в зависимости от фактического масштаба кластера<br />- Значения по умолчанию будут обновлены с версиями платформы; для фиксированных конфигураций рекомендуется использовать пользовательские настройки |
   | **Тип хранилища**         | - **LocalVolume**: Локальное хранилище с данными, хранящимися на указанных узлах<br />- **StorageClass**: Автоматически создаёт постоянные объемы, используя класс хранилища<br />- **PV**: Использует существующие постоянные объемы<br />**Примечание**: Конфигурация хранилища не может быть изменена после установки                                                                                      |
   | **Количество реплик**     | Устанавливает количество подов компонента мониторинга<br />**Примечание**: Prometheus поддерживает только однопоточную установку                                                                                                                                                                                                                                      |
   | **Конфигурация параметров**| Параметры данных для компонента мониторинга могут быть скорректированы по мере необходимости                                                                                                                                                                                                                                                                               |

4. Нажмите **Установить**, чтобы завершить установку.

### Метод доступа

После завершения установки к компонентам можно получить доступ по следующим адресам (замените `<>` на фактические значения):

| Компонент         | Адрес доступа                                                 |
|-------------------|--------------------------------------------------------------|
| **Thanos**        | `<platform_access_address>/clusters/<cluster>/prometheus`   |
| **Prometheus**    | `<platform_access_address>/clusters/<cluster>/prometheus-0` |
| **Alertmanager**  | `<platform_access_address>/clusters/<cluster>/alertmanager` |

## Установите мониторинг ACP с плагином VictoriaMetrics

### Предварительные требования

- Если вы устанавливаете только агент VictoriaMetrics, убедитесь, что Центр VictoriaMetrics был установлен в другом кластере.

### Процедуры установки

1. Перейдите в **Управление магазином приложений** > **Плагины кластера** и выберите целевой кластер.

2. Найдите плагин **Мониторинг ACP с VictoriaMetrics** и нажмите **Установить**.

3. Настройте следующие параметры:

   | Параметр                  | Описание                                                                                                                                                                                                                                                                                                                                                                          |
   |---------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
   | **Конфигурация масштаба**  | Поддерживаются три конфигурации: **Небольшой масштаб**, **Средний масштаб** и **Большой масштаб**:<br />- Значения по умолчанию установлены на основе рекомендуемых значений нагрузочного тестирования платформы<br />- Вы можете выбрать или настроить квоты в зависимости от фактического масштаба кластера<br />- Значения по умолчанию будут обновлены с версиями платформы; для фиксированных конфигураций рекомендуется использовать пользовательские настройки |
   | **Установить только агент** | - Выключено: Установить весь комплект компонентов VictoriaMetrics<br />- Включено: Установить только компонент сбора VMAgent, который зависит от Центра VictoriaMetrics                                                                                                                                                                                                          |
   | **Центр VictoriaMetrics**   | Выберите кластер, в котором установлен полный компонент VictoriaMetrics                                                                                                                                                                                                                                                                                                         |
   | **Тип хранилища**         | - **LocalVolume**: Локальное хранилище с данными, хранящимися на указанных узлах<br />- **StorageClass**: Автоматически создаёт постоянные объемы, используя класс хранилища<br />- **PV**: Использует существующие постоянные объемы                                                                                                                                                                               |
   | **Количество реплик**     | Устанавливает количество подов компонента мониторинга:<br />- Тип хранилища LocalVolume не поддерживает несколько реплик<br />- Для других типов хранилища, пожалуйста, обратитесь к экранным подсказкам для конфигурации                                                                                                                                                      |
   | **Конфигурация параметров**| Параметры данных для компонента мониторинга могут быть скорректированы<br />**Примечание**: Данные могут временно превышать период хранения перед удалением                                                                                                                                                                                                                                           |

4. Нажмите **Установить**, чтобы завершить установку.
