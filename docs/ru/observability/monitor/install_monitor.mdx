---
weight: 12
sourceSHA: d631c683e52fb6fc307146bc435f31d69f5b0aa129071fc1e844d3c188d65318
---

# Установка

## Обзор

Компонент мониторинга служит инфраструктурой для мониторинга, оповещения, инспекции и проверки состояния в модуле наблюдаемости. Этот документ описывает, как установить мониторинг ACP с плагином Prometheus или мониторинг ACP с плагином VictoriaMetrics в рамках кластера.

## Подготовка к установке

Перед установкой компонентов мониторинга, пожалуйста, убедитесь, что выполнены следующие условия:

- Соответствующий компонент мониторинга был выбран, обратившись к [Руководству по выбору компонентов мониторинга](./architecture/component_selection_suggestion.mdx).
- При установке в рабочем кластере убедитесь, что кластер `global` может получить доступ к порту 11780 рабочего кластера.
- Если вам необходимо использовать классы хранения или постоянное хранилище для данных мониторинга, пожалуйста, создайте соответствующие ресурсы в разделе **Хранение** заранее.

## Установка мониторинга ACP с плагином Prometheus

### Процедуры установки

1. Перейдите в **Управление магазинами приложений** > **Плагины кластера** и выберите целевой кластер.

2. Найдите плагин **Мониторинг ACP с Prometheus** и нажмите **Установить**.

3. Настройте следующие параметры:

   | Параметр                   | Описание                                                                                                                                                                                                                                                                                                                                                                        |
   | --------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
   | **Конфигурация масштаба**  | Поддерживает три конфигурации: **Малый масштаб**, **Средний масштаб** и **Большой масштаб**:<br />- Значения по умолчанию установлены на основе рекомендуемых значений нагрузки платформы<br />- Вы можете выбрать или настроить квоты в зависимости от фактического масштаба кластера<br />- Значения по умолчанию будут обновлены с версиями платформы; для фиксированных конфигураций рекомендуется настраиваемые параметры |
   | **Тип хранения**            | - **LocalVolume**: локальное хранилище с данными, хранящимися на указанных узлах<br />- **StorageClass**: автоматически генерирует постоянные тома с использованием класса хранения<br />- **PV**: использует существующие постоянные тома<br />**Примечание**: Конфигурация хранения не может быть изменена после установки                                                                          |
   | **Количество реплик**       | Устанавливает количество подов компонента мониторинга<br />**Примечание**: Prometheus поддерживает только установку на одном узле                                                                                                                                                                                                                                              |
   | **Конфигурация параметров** | Параметры данных для компонента мониторинга могут быть настроены по мере необходимости                                                                                                                                                                                                                                                                                             |

4. Нажмите **Установить**, чтобы завершить установку.

### Метод доступа

После завершения установки компоненты можно будет получить доступ по следующим адресам (замените `<>` на фактические значения):

| Компонент        | Адрес доступа                                              |
| ---------------- | --------------------------------------------------------- |
| **Thanos**       | `<platform_access_address>/clusters/<cluster>/prometheus`   |
| **Prometheus**   | `<platform_access_address>/clusters/<cluster>/prometheus-0` |
| **Alertmanager** | `<platform_access_address>/clusters/<cluster>/alertmanager` |

## Установка мониторинга ACP с плагином VictoriaMetrics

### Предварительные условия

- Если устанавливается только агент VictoriaMetrics, убедитесь, что Центр VictoriaMetrics установлен в другом кластере.

### Процедуры установки

1. Перейдите в **Управление магазинами приложений** > **Плагины кластера** и выберите целевой кластер.

2. Найдите плагин **Мониторинг ACP с VictoriaMetrics** и нажмите **Установить**.

3. Настройте следующие параметры:

   | Параметр                   | Описание                                                                                                                                                                                                                                                                                                                                                                        |
   | --------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
   | **Конфигурация масштаба**  | Поддерживает три конфигурации: **Малый масштаб**, **Средний масштаб** и **Большой масштаб**:<br />- Значения по умолчанию установлены на основе рекомендуемых значений нагрузки платформы<br />- Вы можете выбрать или настроить квоты в зависимости от фактического масштаба кластера<br />- Значения по умолчанию будут обновлены с версиями платформы; для фиксированных конфигураций рекомендуется настраиваемые параметры |
   | **Установка только агента** | - Выкл: Установить полный комплект компонентов VictoriaMetrics<br />- Вкл: Установить только компонент сбора VMAgent, который зависит от Центра VictoriaMetrics                                                                                                                                                                                                               |
   | **Центр VictoriaMetrics**   | Выберите кластер, в котором установлен полный комплект компонентов VictoriaMetrics                                                                                                                                                                                                                                                                                               |
   | **Тип хранения**            | - **LocalVolume**: локальное хранилище с данными, хранящимися на указанных узлах<br />- **StorageClass**: автоматически генерирует постоянные тома с использованием класса хранения<br />- **PV**: использует существующие постоянные тома                                                                                                                                                                 |
   | **Количество реплик**       | Устанавливает количество подов компонента мониторинга:<br />- Тип хранения LocalVolume не поддерживает несколько реплик<br />- Для других типов хранения, пожалуйста, обращайтесь к подсказкам на экране для конфигурации                                                                                                                                                           |
   | **Конфигурация параметров** | Параметры данных для компонента мониторинга можно настроить<br />**Примечание**: Данные могут временно превышать срок хранения перед удалением                                                                                                                                                                                                                                   |

4. Нажмите **Установить**, чтобы завершить установку.
