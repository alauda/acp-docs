---
weight: 40
sourceSHA: 9ebed7053d54a91f9a8ee3b60bf73abcbe133c85458a66effb69a02cde482317
---

# Планирование емкости компонента логирования

Компонент хранения логов отвечает за хранение логов, событий и данных аудита, собранных компонентом сбора логов из одного или нескольких кластеров в платформе. Поэтому вам необходимо заранее оценить масштаб логов и запланировать ресурсы, необходимые для компонента хранения логов, в соответствии с рекомендациями в этом документе.

:::warning

- Следующие данные представляют собой стандартные показатели, полученные в ходе испытаний, проведенных в лабораторных условиях, которые предназначены для вашего руководства при планировании ресурсов. Вы должны убедиться, что фактические ресурсы, которые вы планируете, превышают ресурсы, описанные ниже, и что масштаб логов не превышает соответствующий масштаб логов.
- Конфигурация диска для данных ниже: `6000 iops`, `250MB/s скорость чтения и записи`, `независимая установка SSD`. Если ваши фактические ресурсы хранения слабее, чем ресурсы для тестирования, пожалуйста, обратитесь к информации о конфигурации большего масштаба и предоставьте более мощные ресурсы ЦП и памяти по мере необходимости.

:::

## ElasticSearch

### Небольшой масштаб 3 узла - Всего логов: 6300/с

| Компонент     | Реплики | Ограничение по ЦП | Ограничение по памяти |
| ------------- | -------- | ----------------- | --------------------- |
| ElasticSearch | 3        | 2C                | 4G                    |
| Kafka         | 3        | 2C                | 4G                    |
| Zookeeper     | 3        | 2C                | 4G                    |
| Lanaya        | 2        | 2C                | 4G                    |
| Razor         | 2        | 1C                | 2G                    |

### Небольшой масштаб 5 узлов - Всего логов: 9900/с

| Компонент     | Реплики | Ограничение по ЦП | Ограничение по памяти |
| ------------- | -------- | ----------------- | --------------------- |
| ElasticSearch | 5        | 2C                | 4G                    |
| Kafka         | 3        | 2C                | 4G                    |
| Zookeeper     | 3        | 2C                | 4G                    |
| Lanaya        | 2        | 2C                | 4G                    |
| Razor         | 2        | 1C                | 2G                    |

### Большой масштаб 3+5 узлов - Всего логов: 25000/с

| Компонент              | Реплики | Ограничение по ЦП | Ограничение по памяти |
| ---------------------- | -------- | ----------------- | --------------------- |
| ElasticSearch - Master | 3        | 2C                | 4G                    |
| ElasticSearch - Data   | 5        | 8C                | 16G                   |
| Kafka                  | 3        | 2C                | 4G                    |
| Zookeeper              | 3        | 2C                | 4G                    |
| Lanaya                 | 2        | 2C                | 4G                    |
| Razor                  | 2        | 1C                | 2G                    |

### Большой масштаб 3+7 узлов - Всего логов: 30000/с

| Компонент              | Реплики | Ограничение по ЦП | Ограничение по памяти |
| ---------------------- | -------- | ----------------- | --------------------- |
| ElasticSearch - Master | 3        | 2C                | 4G                    |
| ElasticSearch - Data   | 7        | 8C                | 16G                   |
| Kafka                  | 3        | 2C                | 4G                    |
| Zookeeper              | 3        | 2C                | 4G                    |
| Lanaya                 | 2        | 2C                | 4G                    |
| Razor                  | 2        | 1C                | 2G                    |

## Clickhouse

### Один узел - Всего логов: 18000/с

| Компонент  | Реплики | Ограничение по ЦП | Ограничение по памяти | Примечания           |
| ---------- | -------- | ----------------- | --------------------- | --------------------- |
| Clickhouse | 1        | 2C                | 4G                    | 1 реплика 1 шард     |
| Razor      | 1        | 1C                | 1G                    | -                   |
| Vector     | 1        | 2C                | 4G                    | -                   |

### Три узла - Всего логов: 20000/с

| Компонент  | Реплики | Ограничение по ЦП | Ограничение по памяти | Примечания            |
| ---------- | -------- | ----------------- | --------------------- | ---------------------- |
| Clickhouse | 3        | 2C                | 4G                    | 3 реплики 1 шард     |
| Razor      | 2        | 1C                | 1G                    | -                    |
| Vector     | 2        | 2C                | 4G                    | -                    |

### Шесть узлов - Всего логов: 40000/с

| Компонент  | Реплики | Ограничение по ЦП | Ограничение по памяти | Примечания             |
| ---------- | -------- | ----------------- | --------------------- | ----------------------- |
| Clickhouse | 3        | 4C                | 8G                    | 3 реплики 2 шарда     |
| Razor      | 2        | 1C                | 1G                    | -                     |
| Vector     | 2        | 4C                | 8G                    | -                     |

### Девять узлов - Всего логов: 69000/с

| Компонент  | Реплики | Ограничение по ЦП | Ограничение по памяти | Примечания             |
| ---------- | -------- | ----------------- | --------------------- | ----------------------- |
| Clickhouse | 9        | 4C                | 8G                    | 3 реплики 3 шарда     |
| Razor      | 2        | 1C                | 1G                    | -                     |
| Vector     | 2        | 4C                | 8G                    | -                     |
