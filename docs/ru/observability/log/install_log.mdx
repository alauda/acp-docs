---
weight: 12
sourceSHA: ec75c6c37826376412804d4c324e625b41a2f739140d70e23dbf482b68167176
---

# Установка

Система ведения журнала платформы состоит из двух плагинов: ACP Log Collector и ACP Log Storage. В этой главе вы познакомитесь с установкой этих двух плагинов.

:::warning

1. После успешной установки плагина ACP Log Storage кластер, в котором установлен компонент, может использоваться как кластер хранения для различных кластеров платформы (необязательно во время установки плагина ACP Log Collector) для предоставления услуг хранения журналов для всех кластеров платформы.

2. Глобальный кластер может запрашивать данные журналов, хранящиеся на любом рабочем кластере в рамках платформы. Убедитесь, что глобальный кластер может получить доступ к порту 11780 рабочего кластера.

3. Плагин ACP Log Storage с использованием Clickhouse и плагин ACP Log Storage с использованием ElasticSearch не могут быть установлены в одном и том же кластере. Пожалуйста, ознакомьтесь с [Рекомендациями по выбору](./architecture/component_suggestion.mdx) и выберите установку одного из плагинов для хранения журналов.

:::

## Установка ACP Log Storage с использованием ElasticSearch

1. Перейдите в **Управление магазином приложений** > **Плагин кластера** и выберите целевой кластер.

2. Во вкладке **Плагины** нажмите кнопку действия справа от **ACP Log Storage с использованием ElasticSearch** > **Установить**.

3. Ознакомьтесь с следующими инструкциями для настройки соответствующих параметров.

   | Параметр                           | Описание                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
   | ----------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
   | **Подключить внешний Elasticsearch**  | Оставьте закрытым, чтобы установить плагин хранения журналов в рамках платформы.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
   | **Настройки установки компонентов** | **LocalVolume**: Локальное хранилище, данные журнала будут храниться в локальном пути хранения выбранного узла. Преимуществом этого метода является то, что компонент журнала напрямую связан с локальным хранилищем, что исключает необходимость доступа к хранилищу через сеть и обеспечивает лучшую производительность хранения.<br />**StorageClass**: Динамически создавайте ресурсы хранения с помощью классов хранения для хранения данных журнала. Преимуществом этого метода является более высокая степень гибкости; при определении нескольких классов хранения для всего кластера администраторы могут выбирать соответствующий класс хранения для компонентов журналов в зависимости от сценариев использования, уменьшая влияние неисправности хоста на хранилище. Однако производительность StorageClass может зависеть от таких факторов, как пропускная способность сети и задержка, и она полагается на механизмы избыточности, предоставляемые хранилищем, чтобы обеспечить высокую доступность хранения. |
   | **Срок хранения**                | Максимальное время, в течение которого журналы, события и данные аудита могут храниться в кластере. Данные, превышающие срок хранения, будут автоматически очищены.<br />**Совет**: Вы можете сделать резервную копию данных, которые необходимо сохранять в течение длительного времени. Если вам нужна помощь, пожалуйста, свяжитесь с техническими специалистами.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |

4. Нажмите **Установить**.

## Установка ACP Log Storage с использованием Clickhouse

1. Перейдите в **Управление магазином приложений** > **Плагин кластера** и выберите целевой кластер.

2. Во вкладке **Плагины** нажмите кнопку действия справа от **ACP Log Storage с использованием Clickhouse** > **Установить**.

3. Ознакомьтесь с следующими инструкциями для настройки соответствующих параметров.

   | Параметр                           | Описание                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
   | ----------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
   | **Настройки установки компонентов** | **LocalVolume**: Локальное хранилище, данные журнала будут храниться в локальном пути хранения выбранного узла. Преимуществом этого метода является то, что компонент журнала напрямую связан с локальным хранилищем, что исключает необходимость доступа к хранилищу через сеть и обеспечивает лучшую производительность хранения.<br />**StorageClass**: Динамически создавайте ресурсы хранения с помощью классов хранения для хранения данных журнала. Преимуществом этого метода является более высокая степень гибкости; при определении нескольких классов хранения для всего кластера администраторы могут выбирать соответствующий класс хранения для компонентов журналов в зависимости от сценариев использования, уменьшая влияние неисправности хоста на хранилище. Однако производительность StorageClass может зависеть от таких факторов, как пропускная способность сети и задержка, и она полагается на механизмы избыточности, предоставляемые хранилищем, чтобы обеспечить высокую доступность хранения. |
   | **Срок хранения**                | Максимальное время, в течение которого журналы, события и данные аудита могут храниться в кластере. Данные, превышающие срок хранения, будут автоматически очищены.<br />**Совет**: Вы можете сделать резервную копию данных, которые необходимо сохранять в течение длительного времени. Если вам нужна помощь, пожалуйста, свяжитесь с техническими специалистами.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |

4. Нажмите **Установить**.

## Установка плагина ACP Log Collector

1. Перейдите в **Управление магазином приложений** > **Плагин кластера** и выберите целевой кластер.

2. Во вкладке **Плагины** нажмите кнопку действия справа от **ACP Log Collector** > **Установить**.

3. Выберите **Кластер хранения** (где установлен ACP Log Storage) и нажмите ***Выбрать/Снять выбор*** типы журналов, чтобы установить объем сбора журналов в кластере.

4. Нажмите **Установить**.
