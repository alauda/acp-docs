---
weight: 12
sourceSHA: ec75c6c37826376412804d4c324e625b41a2f739140d70e23dbf482b68167176
---

# Установка

Система ведения журналов платформы состоит из двух плагинов: ACP Log Collector и ACP Log Storage. В этой главе вы познакомитесь с установкой этих двух плагинов.

:::warning

1. После успешной установки плагина ACP Log Storage кластер, в котором установлен компонент, может использоваться в качестве кластера хранения для различных кластеров платформы (необязательная операция при установке плагина ACP Log Collector) для предоставления услуг хранения журналов для всех кластеров платформы.

2. Глобальный кластер может запрашивать данные журналов, хранящиеся на любом рабочем кластере в пределах платформы. Убедитесь, что глобальный кластер может получить доступ к порту 11780 рабочего кластера.

3. Плагин ACP Log Storage с Clickhouse и плагин ACP Log Storage с ElasticSearch не могут быть установлены в одном и том же кластере. Пожалуйста, ознакомьтесь с [Рекомендациями по выбору](./architecture/component_suggestion.mdx) и выберите установку одного из плагинов для хранения журналов.

:::

## Установка ACP Log Storage с ElasticSearch

1. Перейдите в **Управление магазинами приложений** > **Кластерный плагин** и выберите целевой кластер.

2. На вкладке **Плагины** нажмите кнопку действия справа от **ACP Log Storage с ElasticSearch** > **Установить**.

3. Ознакомьтесь с следующими инструкциями для настройки соответствующих параметров.

   | Параметр                      | Описание                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
   | ----------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
   | **Подключить внешний Elasticsearch** | Оставьте закрытым для установки плагина хранения журналов внутри платформы.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
   | **Настройки установки компонента** | **LocalVolume**: Локальное хранилище, данные журналов будут храниться в локальном пути хранения выбранного узла. Преимуществом этого метода является то, что компонент журнала непосредственно связан с локальным хранилищем, что исключает необходимость доступа к хранилищу через сеть и обеспечивает лучшую производительность хранения.<br />**StorageClass**: Динамическое создание ресурсов хранилища с использованием классов хранилищ для хранения данных журналов. Преимуществом этого метода является высокая степень гибкости; когда для всего кластера определено несколько классов хранилищ, администраторы могут выбрать соответствующий класс хранилища для компонентов журнала в зависимости от сценариев использования, что снижает влияние неисправности узла на хранение. Однако производительность StorageClass может зависеть от таких факторов, как пропускная способность сети и задержки, и она зависит от механизмов избыточности, предоставляемых бекендом хранилища, для достижения высокой доступности хранилища. |
   | **Период хранения**          | Максимальное время, в течение которого журналы, события и данные аудита могут храниться в кластере. Данные, превышающие период хранения, будут автоматически очищены.<br />**Совет**: Вы можете создать резервную копию данных, которые необходимо хранить долгое время. Если вам нужна помощь, пожалуйста, обратитесь к техническому специалисту.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |

4. Нажмите **Установить**.

## Установка ACP Log Storage с Clickhouse

1. Перейдите в **Управление магазинами приложений** > **Кластерный плагин** и выберите целевой кластер.

2. На вкладке **Плагины** нажмите кнопку действия справа от **ACP Log Storage с Clickhouse** > **Установить**.

3. Ознакомьтесь с следующими инструкциями для настройки соответствующих параметров.

   | Параметр                      | Описание                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
   | ----------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
   | **Настройки установки компонента** | **LocalVolume**: Локальное хранилище, данные журналов будут храниться в локальном пути хранения выбранного узла. Преимуществом этого метода является то, что компонент журнала непосредственно связан с локальным хранилищем, что исключает необходимость доступа к хранилищу через сеть и обеспечивает лучшую производительность хранения.<br />**StorageClass**: Динамическое создание ресурсов хранилища с использованием классов хранилищ для хранения данных журналов. Преимуществом этого метода является высокая степень гибкости; когда для всего кластера определено несколько классов хранилищ, администраторы могут выбрать соответствующий класс хранилища для компонентов журнала в зависимости от сценариев использования, что снижает влияние неисправности узла на хранение. Однако производительность StorageClass может зависеть от таких факторов, как пропускная способность сети и задержки, и она зависит от механизмов избыточности, предоставляемых бекендом хранилища, для достижения высокой доступности хранилища. |
   | **Период хранения**          | Максимальное время, в течение которого журналы, события и данные аудита могут храниться в кластере. Данные, превышающие период хранения, будут автоматически очищены.<br />**Совет**: Вы можете создать резервную копию данных, которые необходимо хранить долгое время. Если вам нужна помощь, пожалуйста, обращайтесь к техническому специалисту.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |

4. Нажмите **Установить**.

## Установка плагина ACP Log Collector

1. Перейдите в **Управление магазинами приложений** > **Кластерный плагин** и выберите целевой кластер.

2. На вкладке **Плагины** нажмите кнопку действия справа от **ACP Log Collector** > **Установить**.

3. Выберите **Кластер хранения** (где был установлен ACP Log Storage) и нажмите ***Выбрать/Снять выбор*** типы журналов, чтобы установить объем сбора журналов в кластере.

4. Нажмите **Установить**.
