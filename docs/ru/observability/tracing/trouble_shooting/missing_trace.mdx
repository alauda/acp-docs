---
weight: 10
sourceSHA: 3394197f24ed6b6c88ad22b426c55d0181a0c13178c08d90b7318cd86d5022b6
---

# Невозможно выполнить запрос требуемого трассирования

## Описание проблемы

При запросе трассирования в служебной сети вы можете столкнуться с ситуациями, когда требуемое трассирование не может быть получено.

## Анализ причин

### 1. Чрезмерно низкий установленный уровень выборки трассирования

Когда параметр уровня выборки для трассирования установлен слишком низко, система будет собирать данные трассировки пропорционально. В периоды недостаточного объема запросов или в период низких пиков это может привести к тому, что выбранные данные будут ниже порога видимости.

### 2. Ограничения в реальном времени Elasticsearch

Конфигурация индекса Elasticsearch по умолчанию составляет `"refresh_interval": "10s"`, что приводит к задержке в 10 секунд перед обновлением данных из буфера памяти в состояние, доступное для поиска. При запросе недавно сгенерированного трассирования результаты могут отсутствовать, поскольку данные еще не были сохранены.

Эта конфигурация индекса может эффективно снизить нагрузку на слияние данных в Elasticsearch, улучшая скорость индексации и скорость первого запроса, но также в определенной степени снижает реальное время данных.

## Решение для причины 1

- Соответствующим образом увеличьте уровень выборки в зависимости от требований.
- Используйте более сложные методы выборки, такие как выборка по хвосту.

## Решение для причины 2

Отрегулируйте интервал обновления через параметр запуска `--es.asm.index-refresh-interval` `jaeger-collector`, со значением по умолчанию `10s`.

Если значение этого параметра равно `"null"`, то конфигурации для `refresh_interval` индекса не будет.

**Примечание**: Установка его в `"null"` повлияет на производительность и скорость выполнения запросов Elasticsearch.
