---
weight: 20
sourceSHA: ffe5f62bbe22778876ecaeda1cb645e3fbba672da0bd41d8ce57a1f9f746776b
---

# Архитектура

Эта архитектура построена на стеке технологий OpenTelemetry и Jaeger, обеспечивая полный жизненный цикл управления распределенным трассированием. Система состоит из пяти основных модулей: сбора данных, передачи, хранения, запроса и визуализации.

![](../../../en/observability/tracing/assets/tracing_architecture_drawio.png)

## Основные компоненты

1. **Система OpenTelemetry**
   - **opentelemetry-operator**\
     Оператор уровня кластера, отвечающий за развертывание и управление компонентом otel-collector, обеспечивающий возможность автоматической инъекции OTel.
   - **otel-collector**\
     Принимает данные трассировки от приложений, фильтрует и группирует их, а затем передает на jaeger-collector.
   - **Tracing UI**\
     Самостоятельно разработанный интерфейс визуализации, который интегрируется с API jaeger-query, поддерживающий многомерные условия запроса.

2. **Система Jaeger**
   - **jaeger-operator**\
     Разворачивает и управляет компонентами jaeger-collector и jaeger-query.
   - **jaeger-collector**\
     Принимает данные трассировки, переданные и обработанные otel-collector, выполняет преобразование формата и записывает их в Elasticsearch.
   - **jaeger-query**\
     Предоставляет API для запроса трассировки, поддерживая многокритериальную выборку, включая TraceID и метки.

3. **Слой хранения**
   - **Elasticsearch**\
     Распределенный движок хранения, поддерживающий эффективную запись и извлечение обширных данных Span.

## Поток данных

- **Процесс записи**\
  `Приложение -> otel-collector -> jaeger-collector -> Elasticsearch`

  Приложение генерирует данные Span через SDK или автоматическую инъекцию, которые стандартализируются otel-collector и затем сохраняются в Elasticsearch с помощью jaeger-collector.

- **Процесс запроса**\
  `Пользователь -> Tracing UI -> jaeger-query -> Elasticsearch`

  Пользователь передает условия запроса через UI, а jaeger-query извлекает данные из Elasticsearch; UI визуализирует результаты на основе возвращенных данных.
