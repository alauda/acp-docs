---
weight: 20
sourceSHA: ccf82590e63f2038f01e7e640212de3c45575f4e39aa1c29fd4174eb7fc8b863
---

# Архитектура

## Инспекция

![](../../../en/observability/inspection/assets/inspection_flow.png)

Модуль инспекции совместно предоставляется компонентом платформы Courier и компонентом мониторинга, включает в себя следующие бизнес-процессы:

- Создание задачи инспекции: Платформа подает CR типа инспекции в кластер `global`.
- Выполнение задачи инспекции: Компонент Courier отслеживает генерацию CR типа инспекции и запрашивает у компонентов мониторинга каждого кластера различные метрики, связанные с инспекцией.
- Запись результатов инспекции: После завершения оценки каждого элемента инспекции компонент Courier запишет результаты инспекции обратно в соответствующий CR инспекции.
- Просмотр результатов инспекции: Пользователи могут проверить статус и результаты задач инспекции через платформу, где данные будут получены из соответствующего CR инспекции.

## Состояние здоровья компонентов

![](../../../en/observability/inspection/assets/healthcheck_flow.png)

Состояние здоровья компонентов совместно предоставляется компонентом платформы Courier и компонентом мониторинга, включает в себя следующие бизнес-процессы:

- Предопределенный список для мониторинга компонентов: Платформа имеет предопределенные два типа CRD в кластере `global`, чтобы определить список компонентов, подлежащих мониторингу, и методы мониторинга:
  - ModuleHealth: Определяет компоненты, которые необходимо мониторить, и методы мониторинга.
  - ModuleHealthRecord: Определяет результаты мониторинга соответствующих компонентов в каждом кластере.
- Регулярный мониторинг состояния компонентов: Courier будет отслеживать ModuleHealth, проверять указанные функции, а затем записывать результаты инспекции в ресурсы CR ModuleHealth и ModuleHealthRecord.
- Определение состояния компонентов: Courier запросит данные у Kubernetes и компонентов мониторинга, чтобы определить фактическое состояние компонентов и любые существующие проблемы.
  - Kubernetes: Проверяет, установлен ли компонент и является ли количество реплик компонента нормальным.
  - Prometheus / VictoriaMetrics: На основе метрик, предоставленных каждым компонентом, запрашивает и определяет, может ли компонент предоставлять услуги нормально.
- Просмотр состояния здоровья компонентов: Пользователи могут проверить состояние здоровья каждого компонента через платформу, где данные будут получены из соответствующих ресурсов CR ModuleHealth и ModuleHealthRecord.
