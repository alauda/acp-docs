---
weight: 10
sourceSHA: e3da943a79c74a3645daf9ffeba031d302bce4d52e9434900805b057a5597dea
---

# Инспекция

## Выполнение инспекции

1. Нажмите на **Операционный центр** > **Инспекция** > **Базовая инспекция** в левой навигационной панели.

   **Совет**: Страница инспекции отображает информацию о данных инспекции из последней инспекции. В процессе инспекции вы можете в реальном времени просматривать данные ресурсов завершенных инспекций.

2. На странице базовой инспекции поддерживаются следующие действия:

   - **Выполнить инспекцию**: Нажмите кнопку **Инспекция** в верхнем правом углу страницы, чтобы провести инспекцию на платформе.

   - **Скачать отчет об инспекции**: Нажмите кнопку **Скачать отчет** в верхнем правом углу страницы, выберите формат отчета (PDF и Excel) в всплывающем диалоговом окне и нажмите для загрузки, что загрузит соответствующий отчет в выбранном формате на ваш компьютер.

     - Отчет об инспекции в формате PDF не включает данные страницы рисков ресурсов;

     - Отчет об инспекции в формате Excel содержит все данные инспекции;

     - Поддерживает одновременную загрузку обоих форматов отчетов.

## Конфигурация инспекции

| Конфигурация инспекции            | Описание                                                                                                                                                                                                                                                                         |
| ---------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **Запланированная инспекция**      | Правила временного выполнения автоматической задачи, поддерживающие ввод выражений Crontab.<br />**Совет**: Нажмите на поле ввода, чтобы развернуть предустановленные на платформе **Шаблоны триггерных правил**, выберите подходящий шаблон и быстро установите правила триггера с простыми изменениями. |
| **Удержание записей инспекции**    | Количество записей инспекций, которые необходимо сохранить.                                                                                                                                                                                                                     |
| **Уведомление по электронной почте**| Выбор контактов для уведомлений по электронной почте.<br />**Примечание**: Контакты для уведомлений должны быть настроены на получение электронных писем.                                                                                                                                         |
| **Название отчета об инспекции**   | Название, которое будет использоваться встроенным шаблоном уведомлений об инспекции платформы для уведомления контактов.                                                                                                                                                           |
| **Элементы конфигурации инспекции**| Изменение пороговых значений предупреждений или отключение элементов инспекции в соответствии с предустановленными элементами инспекции платформы для сертификатов, кластеров, узлов и подов.                                                                                        |

## Объяснение отчета об инспекции

### Последняя инспекция

В области информации **Последняя инспекция** вы можете просмотреть соответствующую информацию из последней инспекции:

- **Время инспекции**: Время начала и окончания последней инспекции.

- **Общее количество инспекционных ресурсов**: Общее количество ресурсов (кластеры, узлы, поды, сертификаты), проверенных в последней инспекции.

- **Риски**: Количество ресурсных рисков, включая те, которые классифицируются как **Ошибка** и **Предупреждение**.

### Инспекция рисков ресурсов

На странице **Инспекция рисков ресурсов** вы можете увидеть обзор информации о рисках для кластеров `global`, построенных кластерах, доступных кластерах, а также всех узлов, подов и сертификатов под этими кластерами.

Нажмите кнопку **Детали рисков** на карточке соответствующего типа ресурса (**Кластер**, **Узел**, **под**, **Сертификат**), чтобы перейти на страницу деталей рисков для этого типа ресурса. На странице деталей вы можете просмотреть наиболее свежую информацию об инспекции для ресурса, а также список ресурсов с ошибками и предупреждениями.

- Нажмите на имя ресурса, чтобы перейти на страницу деталей ресурса.

- Нажмите кнопку раскрытия справа от поля **Имя** в списке, чтобы развернуть условия и причины для ошибок и предупреждений.

Для объяснений критериев суждения о статусе рисков (Ошибка, Предупреждение) для каждого ресурса смотрите таблицу ниже.

**Примечание**: Имеется несколько условий, используемых для определения ошибок и предупреждений для каждого типа ресурса; когда данные инспекции ресурса соответствуют любому из условий суждения, он считается единицей рискованных данных.

| Тип ресурса     | Область инспекции                                                       | Условия суждения о ошибке                                                                                                                                                                         | Условия суждения о предупреждении                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| ---------------- | ---------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| **Кластер**      | - Кластер `global` <br />- Построенный кластер <br />- Доступный кластер | - Статус кластера **Аномальный**; <br />- Подключение к apiserver аномально                                                                                                                    | - После увеличения масштаба кластера (количество узлов/подов/метрик) конфигурация ресурсов компонент мониторинга не была обновлена.<br />- После увеличения объема данных журнала и частоты сбора журналов конфигурация ресурсов компонент журнала не была обновлена.<br />- Использование CPU кластера превышает 60%; <br />- Использование памяти кластера превышает 60%; <br />- Любой под в компоненте ETCD кластера находится в состоянии, отличном от Running;<br />- Любой хост в кластере находится в состоянии, отличном от Ready; <br />- Разница во времени между любыми двумя узлами в кластере превышает 40 секунд;<br />- Скорость запроса CPU кластера (фактическое значение запроса / общее) превышает 60%;<br />- Скорость запроса памяти кластера (фактическое значение запроса / общее) превышает 80%;<br />- Компоненты мониторинга не установлены в кластере;<br />- Компоненты мониторинга кластера аномальны;<br />- Любой под в компоненте **kube-controller-manager** кластера находится в состоянии, отличном от Running;<br />- Любой под в компоненте **kube-scheduler** кластера находится в состоянии, отличном от Running;<br />- Любой под в компоненте **kube-apiserver** кластера находится в состоянии, отличном от Running. |
| **Узел**         | - Все управляющие узлы<br />- Все вычислительные узлы                           | - Статус узла **Аномальный**;<br />- Под компонента **node-exporter** на узле находится в состоянии, отличном от Running;<br />- Под компонента **kubelet** на узле находится в состоянии, отличном от Running. | - Свободный inode узла меньше 1000<br />- Использование CPU узла превышает 60%;<br />- Использование памяти узла превышает 60%;<br />- Использование дискового пространства директории узла превышает 60%;<br />- Системная нагрузка узла превышает 200% и время работы превышает 15 минут;<br />- По меньшей мере одно событие NodeDeadlock (взаимная блокировка узла) произошло за последние сутки;<br />- По меньшей мере одно событие NodeOOM (недостаток памяти) произошло за последние сутки;<br />- По меньшей мере одно событие NodeTaskHung (зависание задания) произошло за последние сутки;<br />- По меньшей мере одно событие NodeCorruptDockerImage (поврежденный образ Docker) произошло за последние сутки.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| **под**          | Все поды                                                               | - Статус пода **Ошибка**;<br />- Под находится в состоянии запуска более 5 минут.                                                                                                           | - Использование CPU пода превышает 80%;<br />- Использование памяти пода превышает 80%;<br />- Количество перезагрузок пода за последние 5 минут больше или равно 1.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| **Сертификат**   | - Сертификаты Certmanager <br />- Сертификаты Kubernetes             | Статус сертификата **Истек**.                                                                                                                                                               | Период действия сертификата менее 29 дней.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |

### Инспекция использования ресурсов

Нажмите на вкладку **Инспекция использования ресурсов**, чтобы перейти на страницу **Инспекция использования ресурсов**.

На странице **Инспекция использования ресурсов** вы можете просмотреть общий объем, использование и процент использования CPU, памяти и диска кластеров `global`, доступных кластеров и построенных кластеров, а также количество ресурсов, таких как кластеры, узлы, поды и проекты на платформе.

- **Статистика использования ресурсов**: Вы можете просмотреть общий объем и общий процент использования CPU, памяти и диска глобальных, доступных и построенных кластеров.

- **Количество ресурсов платформы**: Вы можете просмотреть количество ресурсов, работающих на платформе.
