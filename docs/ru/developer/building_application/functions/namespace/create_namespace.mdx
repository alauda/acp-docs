---
weight: 10
sourceSHA: f75372d223d4cdcbeac48ba763c2fb2511553f2cc9d59fa279509d162da7464e
---

# Создание пространств имен

## Понимание пространств имен

Смотрите официальную документацию Kubernetes: [Namespaces](https://kubernetes.io/docs/reference/kubernetes-api/cluster-resources/namespace-v1/)

> В Kubernetes пространства имен предоставляют механизм для изоляции групп ресурсов в пределах одного кластера. Имена ресурсов должны быть уникальными в пределах пространства имен, но не по всему кластеру. Область применения на основе пространств имен применима только к объектам, имеющим пространство имен (например, Deployments, Services и т. д.), и не относится к объектам, действующим на уровне кластера (например, StorageClass, Nodes, PersistentVolumes и т. д.).

## Создание пространств имен с помощью веб-консоли

> В рамках кластера, связанного с проектом, создайте новое пространство имен, соответствующее доступным квотам ресурсов проекта. Новое пространство имен работает в рамках квот ресурсов, выделенных проекту (например, CPU, память), и все ресурсы в пространстве имен должны находиться в связанном кластере.

1. В представлении **Управление проектом** нажмите на ***Имя проекта***, для которого вы хотите создать пространство имен.

2. В левой навигационной панели нажмите на **Namespaces** > **Namespaces**.

3. Нажмите на **Создать пространство имен**.

4. Настройте **Основную информацию**.

   | Параметр     | Описание                                                                    |
   | ------------- | ------------------------------------------------------------------------------ |
   | **Кластер**   | Выберите кластер, связанный с проектом, для размещения пространства имен.                |
   | **Пространство имен** | Имя пространства имен должно включать обязательный префикс, которым является имя проекта. |

5. (Необязательно) Настройте [Квоту ресурсов](./resource_quota.mdx).

   Каждый раз, когда для контейнера в пространстве имен указывается лимит ресурсов (limits) для вычислительных или хранилищных ресурсов, или каждый раз, когда добавляется новый Pod или PVC, он будет потреблять квоту, установленную здесь.

   **ВНИМАНИЕ**:

   - Квота ресурсов пространства имен наследуется от выделенной квоты проекта в кластере. Максимально допустимая квота для типа ресурса не может превышать оставшуюся доступную квоту проекта. Если доступная квота любого ресурса достигает 0, создание пространства имен будет заблокировано. Свяжитесь с администратором платформы для корректировки квот.

   - **Требования к конфигурации квоты GPU**:

     - Квоты GPU (vGPU или pGPU) могут быть настроены только в том случае, если ресурсы GPU выделены в кластере.
     - При использовании vGPU также могут быть установлены квоты памяти.

     **Определения единиц GPU**:

     - **Единицы vGPU**: 100 виртуальных единиц GPU (vGPU) = 1 физическое ядро GPU (pGPU).
       - Примечание: единицы pGPU учитываются только целыми числами (например, 1 pGPU = 1 ядро = 100 vGPU).
     - **Единицы памяти**:
       - 1 единица памяти = 256 MiB.
       - 1 GiB = 4 единицы памяти (1024 MiB = 4 × 256 MiB).

   - **Поведение по умолчанию для квот**:
     - Если для типа ресурса не указана квота, по умолчанию она не ограничена.
     - Это означает, что пространство имен может потреблять **все доступные ресурсы этого типа, выделенные проекту**, без явных ограничений.

   **Описание параметров квоты**

   <table>
     <thead>
       <tr>
         <th>Категория</th>
         <th>Тип квоты</th>
         <th>Значение и единица</th>
         <th>Описание</th>
       </tr>
     </thead>

     <tbody>
       <tr>
         <td rowSpan={2}><b>Квота на ресурсы хранения</b></td>
         <td>Все</td>
         <td rowSpan={2}>Gi</td>
         <td>Общая запрашиваемая емкость хранения всех Persistent Volume Claims (PVC) в этом пространстве имен не может превышать это значение.</td>
       </tr>

       <tr>
         <td>Storage Class</td>
         <td>Общая запрашиваемая емкость хранения всех Persistent Volume Claims (PVC), связанных с выбранным StorageClass в этом пространстве имен, не может превышать это значение.<br /><br /><b>Примечание</b>: Пожалуйста, заранее выделите StorageClass для проекта, к которому принадлежит пространство имен.</td>
       </tr>

       <tr>
         <td><b>Расширенные ресурсы</b></td>
         <td>Получены из словаря конфигурации (ConfigMap); пожалуйста, смотрите [описание квот на расширенные ресурсы](./resource_quota.mdx#extended-resources-quotas) для получения подробностей.</td>
         <td>-</td>
         <td>Эта категория не будет отображаться, если нет соответствующего словаря конфигурации.</td>
       </tr>

       <tr>
         <td><b>Другие квоты</b></td>
         <td>Введите пользовательские квоты; для конкретных правил ввода, пожалуйста, смотрите [описание других квот](./resource_quota.mdx#other-quotas).</td>
         <td>-</td>
         <td>Чтобы избежать проблем с дублированием ресурсов, следующие значения не допускаются в качестве типов квот: <ul><li>limits.cpu</li><li>limits.memory</li><li>requests.cpu</li><li>requests.memory</li><li>pods</li><li>cpu</li><li>memory</li></ul></td>
       </tr>
     </tbody>
   </table>

6. (Необязательно) Настройте **Диапазон лимитов контейнеров**; пожалуйста, смотрите [Диапазон лимитов](./limit_range.mdx) для получения более подробной информации.

7. (Необязательно) Настройте **Политики безопасности Pod**; пожалуйста, смотрите [Допуск безопасности Pod](./security_policies.mdx) для получения конкретных деталей.

8. (Необязательно) В области **Дополнительные настройки** добавьте метки и аннотации для текущего пространства имен.

   **Совет**: Вы можете определить атрибуты пространства имен с помощью меток или дополнить пространство имен дополнительной информацией с помощью аннотаций; оба могут использоваться для фильтрации и сортировки пространств имен.

9. Нажмите на **Создать**.

## Создание пространства имен с помощью CLI

<a id="namespace-yaml" />

### Примеры файлов YAML

```yaml
# example-namespace.yaml
apiVersion: v1
kind: Namespace
metadata:
  name: example
  labels:
    pod-security.kubernetes.io/audit: baseline # Опционально, для обеспечения безопасности рекомендуется выбрать базовый или ограниченный режим.
    pod-security.kubernetes.io/enforce: baseline 
    pod-security.kubernetes.io/warn: baseline

# example-resourcequota.yaml
apiVersion: v1
kind: ResourceQuota
metadata:
  name: example-resourcequota
  namespace: example
spec:
  hard:
    limits.cpu: "20"
    limits.memory: 20Gi
    pods: "500"
    requests.cpu: "2"
    requests.memory: 2Gi

# example-limitrange.yaml
apiVersion: v1
kind: LimitRange
metadata:
  name: example-limitrange
  namespace: example
spec:
  limits:
    - default:
        cpu: 100m
        memory: 100Mi
      defaultRequest:
        cpu: 50m
        memory: 50Mi
      max:
        cpu: 1000m
        memory: 1000Mi
      type: Container

```

### Создание через файл YAML

```bash
kubectl apply -f example-namespace.yaml
kubectl apply -f example-resourcequota.yaml
kubectl apply -f example-limitrange.yaml
```

### Создание через командную строку напрямую

```bash
kubectl create namespace example
kubectl create resourcequota example-resourcequota --namespace=example --hard=limits.cpu=20,limits.memory=20Gi,pods=500 
kubectl create limitrange example-limitrange --namespace=example --default='cpu=100m,memory=100Mi' --default-request='cpu=50m,memory=50Mi' --max='cpu=1000m,memory=1000Mi'
```
