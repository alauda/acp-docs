---
weight: 40
sourceSHA: 4e62892a9323f0c8f1d6f7c510e27e800f866409fd62dd87ae64d54ac7510837
---

# Ограничение диапазона

## Понимание ограничения диапазона

Смотрите официальную документацию Kubernetes: [Ограничения диапазона](https://kubernetes.io/docs/concepts/policy/limit-range/)

Использование LimitRange в Kubernetes в качестве контроллера доступа — это **ограничения ресурсов на уровне контейнера или Pod**. Он устанавливает значения по умолчанию для запросов, лимитов и максимальных значений для контейнеров или Pods, созданных после создания или обновления LimitRange, при этом постоянно контролируя использование контейнеров, чтобы гарантировать, что никакие ресурсы не превышают определенные максимальные значения в пространстве имен.

> Запрос ресурсов контейнера — это соотношение между лимитами ресурсов и перерасходом кластера. Значения запросов ресурсов служат ссылкой и критерием для планировщика при планировании контейнеров. Планировщик проверяет доступные ресурсы для каждого узла (общие ресурсы - сумма запросов ресурсов контейнеров в Pods, запланированных на узле). Если общие запросы ресурсов нового контейнера Pod превышают оставшиеся доступные ресурсы узла, этот Pod не будет запланирован на этом узле.

LimitRange является контроллером доступа:

- Он применяет значения по умолчанию для запросов и лимитов для всех контейнеров, которые не устанавливают требования к вычислительным ресурсам.
- Он отслеживает использование, чтобы гарантировать, что оно не превышает максимальные ресурсы и соотношение, определенные в любом LimitRange, присутствующем в пространстве имен.

**Включает следующие конфигурации**

| Ресурс  | Поле                                                       |
| ------- | --------------------------------------------------------- |
| CPU     | <ul><li>Запрос по умолчанию</li><li>Лимит</li><li>Макс</li></ul> |
| Память  | <ul><li>Запрос по умолчанию</li><li>Лимит</li><li>Макс</li></ul> |

## Создание ограничения диапазона с помощью CLI

### Примеры YAML файла

```yaml
# example-limitrange.yaml
apiVersion: v1
kind: LimitRange
metadata:
  name: example-limitrange
  namespace: example
spec:
  limits:
    - default:
        cpu: 100m
        memory: 100Mi
      defaultRequest:
        cpu: 50m
        memory: 50Mi
      max:
        cpu: 1000m
        memory: 1000Mi
      type: Container

```

### Создание через YAML файл

```bash
kubectl apply -f example-limitrange.yaml
```

### Создание через командную строку напрямую

```bash
kubectl create limitrange example-limitrange --namespace=example --default='cpu=100m,memory=100Mi' --default-request='cpu=50m,memory=50Mi' --max='cpu=1000m,memory=1000Mi'
```
