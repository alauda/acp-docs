---
weight: 20
sourceSHA: f9ff3c1a50f81dedd8207f2d6e39b0433c74681309bd3f742ccadc5f008fcd92
---

# Создание шлюзов и добавление слушателей

## Создание шлюзов

Создайте входящий шлюз, чтобы обеспечить более детальное распределение сетевых ресурсов.

### Предварительные условия

Администратор платформы должен убедиться, что кластер поддерживает **LoadBalancer** тип **внутренней маршрутизации**. Для кластеров публичного облака необходимо установить контроллер службы LoadBalancer. В кластерах, не относящихся к публичному облаку, платформа предоставляет функцию **внешнего адресного пула**, которая позволяет **LoadBalancer** типу **внутренней маршрутизации** автоматически получать IP-адрес из внешнего адресного пула для внешнего доступа после завершения настройки.

### Шаги

**Примечание**: После создания входящего шлюза платформа автоматически создаст множество ресурсов. Не удаляйте [ресурсы, созданные платформой](./view_resource.mdx).

1. Перейдите в **Платформу контейнеров**.

2. В левой навигационной панели нажмите **Сеть** > **Входящий шлюз**.

3. Нажмите **Создать входящий шлюз**.

4. Ознакомьтесь со следующими инструкциями для настройки конкретных параметров.

   | Параметр                        | Описание                                                                                                                                                                                                                                                                                                                       |
   | -------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
   | **Имя**                          | Имя входящего шлюза.                                                                                                                                                                                                                                                                                                        |
   | **Класс шлюза**                 | Класс шлюза определяет поведение шлюза, аналогично концепции классов хранения (StorageClasses); это ресурс кластера. <br />**Посвященный**: Входящий шлюз будет соответствовать конкретному экземпляру ресурса, а пользователь сможет использовать всех слушателей и вычислительные ресурсы этого шлюза. |
   | **Спецификация**                | Вы можете выбрать рекомендуемый сценарий использования в зависимости от ваших потребностей или настроить лимиты ресурсов.                                                                                                                                                                                                       |
   | **Адрес доступа**               | Адрес входящего шлюза, который по умолчанию получает автоматически.                                                                                                                                                                                                                                                            |
   | **Аннотация внутренней маршрутизации** | Используется для объявления конфигурации или возможностей для внутренней маршрутизации типа LoadBalancer. Для конкретной информации по аннотациям смотрите [инструкции по аннотациям внутренней маршрутизации типа LoadBalancer](../service/annotation.mdx).                                                                         |

5. Нажмите **Создать**.

## Добавление слушателя

Мониторьте трафик под указанными доменными именами и перенаправляйте его на бэкенд-инстансы в соответствии с привязанными правилами маршрутизации.

### Предварительные условия

- Если необходимо мониторить протокол HTTP, пожалуйста, заранее свяжитесь с администратором для подготовки **доменного имени**.

- Если необходимо мониторить протокол HTTPS, пожалуйста, заранее свяжитесь с администратором для подготовки **доменного имени** и **сертификата**.

### Шаги

1. В левой навигационной панели нажмите **Сеть** > **Входящий шлюз**.

2. Нажмите ***Имя входящего шлюза***.

3. Нажмите **Добавить слушателя**.

4. Ознакомьтесь со следующими инструкциями для настройки конкретных параметров.

   | Параметр                       | Описание                                                                                                                                                                                                                                                                                                                                                                                                                                     |
   | ------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
   | **Протокол и порт слушателя**   | В настоящее время поддерживает мониторинг протоколов HTTP, HTTPS, TCP и UDP, и вы можете ввести настраиваемый порт для мониторинга, например: `80`. <br /><br />**Примечание**:<br /><ul><li>Когда порты одинаковые, типы слушателей HTTP, HTTPS и TCP не могут сосуществовать; вы можете выбрать только один из протоколов.</li><li>При использовании протоколов HTTP или HTTPS, если порты одинаковые, доменные имена должны быть разными.</li></ul> |
   | **Доменное имя**                | Выберите доступное доменное имя в текущем пространстве имен, используемое для мониторинга сетевого трафика, обращающегося к этому доменному имени. <br />**Подсказка**: Протоколы TCP и UDP не поддерживают выбор доменных имен.                                                                                                                                                                                                          |

5. Нажмите **Создать**.

## Дальнейшие действия

После создания слушателя, пожалуйста, обратитесь к документу [Создание правил маршрутизации](./create_rule.mdx).
