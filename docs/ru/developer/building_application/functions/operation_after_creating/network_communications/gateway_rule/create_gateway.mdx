---
weight: 20
sourceSHA: f9ff3c1a50f81dedd8207f2d6e39b0433c74681309bd3f742ccadc5f008fcd92
---

# Создание шлюзов и добавление прослушивателей

## Создание шлюзов

Создайте входящий шлюз, чтобы обеспечить более точное распределение сетевых ресурсов.

### Предварительные требования

Администратор платформы должен убедиться, что кластер поддерживает **LoadBalancer** типа **внутреннего маршрутизации**. Для кластеров в публичном облаке необходимо установить контроллер служб LoadBalancer. В кластерах, не относящихся к публичному облаку, платформа предоставляет функцию **внешнего пула адресов**, которая позволяет **LoadBalancer** типа **внутреннего маршрутизации** автоматически получать IP-адрес из внешнего пула адресов для внешнего доступа после завершения настройки.

### Шаги

**Примечание**: После создания входящего шлюза платформа автоматически создаст множество ресурсов. Не удаляйте [ресурсы, созданные платформой](./view_resource.mdx).

1. Войдите в **Container Platform**.

2. В левой навигационной панели выберите **Network** > **Inbound Gateway**.

3. Нажмите **Создать входящий шлюз**.

4. Ознакомьтесь со следующими инструкциями для настройки конкретных параметров.

   | Параметр                       | Описание                                                                                                                                                                                                                                                                                                            |
   | ------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
   | **Имя**                        | Имя входящего шлюза.                                                                                                                                                                                                                                                                                       |
   | **Класс шлюза**               | Класс шлюза определяет поведение шлюза, аналогично концепции классов хранения (StorageClasses); это ресурс кластера. <br />**Выделенный**: Входящий шлюз будет соответствовать конкретному экземпляру ресурса, и пользователь сможет использовать всех слушателей и вычислительные ресурсы этого шлюза. |
   | **Спецификация**               | Вы можете выбрать рекомендуемый сценарий использования в зависимости от ваших потребностей или настроить лимиты ресурсов.                                                                                                                                                                                                                    |
   | **Адрес доступа**              | Адрес входящего шлюза, который по умолчанию получается автоматически.                                                                                                                                                                                                                                        |
   | **Аннотация внутренней маршрутизации** | Используется для объявления конфигурации или возможностей для внутренней маршрутизации типа LoadBalancer. Для конкретной информации об аннотациях см. [инструкции по аннотациям внутренней маршрутизации типа LoadBalancer](../service/annotation.mdx).                                                                                |

5. Нажмите **Создать**.

## Добавление прослушивателя

Отслеживайте трафик по указанным доменным именам и перенаправляйте его на бэкэнд-инстансы в соответствии с установленными правилами маршрутизации.

### Предварительные требования

- Если вам необходимо контролировать протокол HTTP, пожалуйста, заранее свяжитесь с администратором для подготовки **доменного имени**.

- Если вам необходимо контролировать протокол HTTPS, пожалуйста, заранее свяжитесь с администратором для подготовки **доменного имени** и **сертификата**.

### Шаги

1. В левой навигационной панели выберите **Network** > **Inbound Gateway**.

2. Нажмите на ***Имя входящего шлюза***.

3. Нажмите **Добавить прослушиватель**.

4. Ознакомьтесь со следующими инструкциями для настройки конкретных параметров.

   | Параметр                      | Описание                                                                                                                                                                                                                                                                                                                                                                                                                |
   | ------------------------------ | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
   | **Протокол и порт прослушивателя** | В настоящее время поддерживается мониторинг протоколов HTTP, HTTPS, TCP и UDP, вы можете самостоятельно ввести порт для мониторинга, например: `80`. <br /><br />**Примечание**:<br /><ul><li>Когда порты одинаковые, типы прослушивателей HTTP, HTTPS и TCP не могут сосуществовать; вы можете выбрать только один из протоколов.</li><li>При использовании протоколов HTTP или HTTPS, если порты одинаковые, доменные имена должны быть разными.</li></ul> |
   | **Доменное имя**                | Выберите доступное доменное имя в текущем пространстве имен, используемое для мониторинга сетевого трафика, обращающегося к этому доменному имени. <br />**Совет**: Протоколы TCP и UDP не поддерживают выбор доменных имен.                                                                                                                                                                                                                         |

5. Нажмите **Создать**.

## Дальнейшие действия

После создания прослушивателя, пожалуйста, ознакомьтесь с документом [Создание правил маршрутизации](./create_rule.mdx).
