---
weight: 10
sourceSHA: 9dc8150e2dc91c6d1a52f6c08a6c46a8667cdc0914e81e6033b68a26b94acdf0
---

# Создание служб

В Kubernetes сервис — это способ предоставления сетевого приложения, которое работает в одном или нескольких Pod'ах в вашем кластере.

## Шаги

1. Войдите в **Container Platform**.

2. В левой навигационной панели нажмите **Сеть** > **Службы**.

3. Нажмите **Создать службу**.

4. Ознакомьтесь с следующими инструкциями, чтобы настроить соответствующие параметры.

   | Параметр              | Описание                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
   | ---------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
   | **Виртуальный IP-адрес** | Если включено, для этого сервиса будет выделен ClusterIP, который можно использовать для обнаружения сервисов внутри кластера.<br />Если отключено, будет создана "Headless" служба, которая обычно используется **StatefulSet**.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
   | **Тип**               | <ul><li>**ClusterIP**: Экспонирует сервис на внутреннем IP-адресе кластера. Выбор этого значения делает сервис доступным только изнутри кластера. </li><li>**NodePort**: Экспонирует сервис на IP-адресах каждого узла на статическом порту (NodePort). </li><li>**ExternalName**: Соединяет сервис с содержимым поля externalName (например, с именем хоста api.foo.bar.example). </li><li>**LoadBalancer**: Экспонирует сервис внешне с использованием внешнего балансировщика нагрузки. Kubernetes не предлагает компонент балансировки нагрузки напрямую; вы должны предоставить его, или вы можете интегрировать свой кластер Kubernetes с облачным провайдером.</li></ul>                                                                                                                                                                                                                                                    |
   | **Целевой компонент**   | <ul><li>**Рабочая нагрузка**: Сервис будет пересылать запросы к **определенной** рабочей нагрузке, соответствующей меткам, таким как `project.cpaas.io/name: projectname` и `service.cpaas.io/name: deployment-name`.</li><br /><li>**Виртуализация**: Сервис будет пересылать запросы к **определенной** виртуальной машине или группе виртуальных машин.</li><br /><li>**Селектор меток**: Сервис будет пересылать запросы к **определенному типу** рабочей нагрузки с указанными метками, например, `environment: release`.</li></ul>                                                                                                                                                                                                                                                                                                                                                                                            |
   | **Порт**               | Используется для настройки сопоставления портов для этого сервиса. В следующем примере другие Pod'ы внутри кластера могут вызывать этот сервис через виртуальный IP (если включен) и TCP-порт *80*; запросы доступа будут перенаправлены на внешне открытый TCP-порт *6379* или *redis* Pod'ов целевого компонента.<ul><li>**Протокол**: Протокол, используемый сервисом, поддерживаемые протоколы включают: `TCP`, `UDP`, `HTTP`, `HTTP2`, `HTTPS`, `gRPC`.</li><li>**Порт службы**: Номер порта службы, открываемый службой внутри кластера, то есть Порт, например, *80*.</li><li>**Порт контейнера**: Номер (или имя) порта, к которому сопоставляется порт службы, то есть targetPort, например, *6379* или *redis*.</li><li>**Имя порта службы**: Будет сгенерировано автоматически. Формат: `<protocol>-<service port>-<container port>`, например: *tcp-80-6379* или *tcp-80-redis*.</li></ul> |
   | **Сессия**  | Привязанность сессии на основе IP-адреса источника (ClientIP). Если включено, все запросы доступа с одного и того же IP-адреса будут оставаться на одном и том же сервере во время балансировки нагрузки, что обеспечивает обработку запросов от одного клиента на одном и том же сервере.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |

5. Нажмите **Создать**.
