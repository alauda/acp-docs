---
weight: 40
i18n:
  title:
    en: Configuring Network Policies
    zh: 配置网络策略
title: Настройка сетевых политик
sourceSHA: 260351b84b1a7795535337f2169184b803fe9224320f9e364053a2cc426f42db
---

# Настройка сетевых политик

:::info
Платформа теперь предоставляет два различных пользовательских интерфейса для сетевых политик. Старый интерфейс поддерживается по соображениям совместимости, в то время как новый более гибкий и предоставляет встроенный редактор YAML. Мы рекомендуем использовать новую версию.

Пожалуйста, обратитесь к администратору платформы, чтобы активировать функцию `network-policy-next` для доступа к новому интерфейсу.
:::

NetworkPolicy является ресурсом Kubernetes с областью видимости пространства имен и реализован с помощью плагинов CNI. С помощью сетевых политик вы можете контролировать сетевой трафик Pod'ов, достигая сетевой изоляции и снижая риск атак.

По умолчанию все Pod'ы могут свободно общаться, что позволяет входящему и исходящему трафику из любых источников. Когда применяется NetworkPolicy, целевые Pod'ы будут принимать только трафик, соответствующий спецификации.

:::warning
Сетевые политики применяются только к трафику контейнеров. Они не влияют на Pod'ы, работающие в режиме **hostNetwork**.
:::

## Шаги

1. Войдите в **Платформу контейнеров**.

2. В левой навигационной панели нажмите **Сеть** > **Сетевые политики**.

3. Нажмите **Создать сетевую политику**.

4. Ознакомьтесь со следующими инструкциями, чтобы завершить соответствующую настройку.

   <table>
     <thead>
       <tr>
         <th>Область</th>
         <th colSpan={2}>Параметр</th>
         <th>Описание</th>
       </tr>
     </thead>

     <tbody>
       <tr>
         <td rowSpan={2}>Целевой Pod</td>
         <td colSpan={2}>Выбор Pod'ов</td>
         <td>Введите метки целевых Pod'ов в формате ключ-значение; если не установлено, это будет применяться ко всем Pod'ам в текущем пространстве имен.</td>
       </tr>

       <tr>
         <td colSpan={2}>Предварительный просмотр целевых Pod'ов, на которые влияет текущая политика</td>
         <td>Нажмите <b>Предварительный просмотр</b>, чтобы увидеть целевые Pod'ы, на которые влияет эта сетевая политика.</td>
       </tr>

       <tr>
         <td rowSpan={5}>Входящий трафик</td>
         <td colSpan={2}>Блокировать весь входящий трафик</td>
         <td>Блокировать весь входящий трафик к целевому Pod'у. <br /><br /><b>Примечание</b>:<ul><li>Если входящий трафик добавляется в поле `spec.policyTypes` в YAML без настройки конкретных правил, опция <b>Блокировать весь входящий трафик</b> будет автоматически установлена при возврате к форме.</li><li>Если одновременно удаляются поля `spec.ingress`, `spec.egress` и `spec.policyTypes` в YAML, опция <b>Блокировать весь входящий трафик</b> будет автоматически установлена при возврате к форме.</li></ul></td>
       </tr>

       <tr>
         <td rowSpan={3}>Правила<br /><br /><b>Описание</b>: Если в правилах добавлено несколько источников, между ними существует логическое <b>ИЛИ</b>.</td>
         <td>Pod'ы в текущем пространстве имен</td>
         <td>Соответствие Pod'ам с указанными метками в текущем пространстве имен; только соответствующие Pod'ы могут получить доступ к целевому Pod'у. Вы можете нажать <b>Предварительный просмотр</b>, чтобы увидеть Pod'ы, на которые влияет текущее правило. Если этот элемент не настроен, все Pod'ы в текущем пространстве имен могут получить доступ к целевому Pod'у по умолчанию.</td>
       </tr>

       <tr>
         <td>Pod'ы в текущем кластере</td>
         <td>Соответствие пространствам имен или Pod'ам с указанными метками в кластере; только соответствующие Pod'ы могут получить доступ к целевому Pod'у. Вы можете нажать <b>Предварительный просмотр</b>, чтобы увидеть Pod'ы, на которые влияет текущее правило. <ul><li>Если настроены как выбор пространств имен, так и выбор Pod'ов, будет взято пересечение двух, что означает, что Pod'ы с указанными метками будут выбраны из указанного пространства имен.</li><li>Если этот элемент не настроен, все Pod'ы из всех пространств имен в кластере могут получать доступ к целевому Pod'у по умолчанию.</li></ul></td>
       </tr>

       <tr>
         <td>Диапазон IP</td>
         <td>Введите CIDR, который может получить доступ к целевому Pod'у и может исключать диапазоны CIDR, которые не допускаются для доступа к целевому Pod'у. Если этот элемент не настроен, любой трафик может получить доступ к целевому Pod'у.<br /><br /><b>Описание</b>: Вы можете добавить элементы исключения в формате <i>exampleip</i>/32, чтобы исключить один IP-адрес.</td>
       </tr>

       <tr>
         <td colSpan={2}>Порт</td>
         <td>Соответствие трафику на указанных протоколах и портах; числовые порты или имена портов на Pod'ах могут быть добавлены. Если этот элемент не настроен, будут соответствовать все порты.</td>
       </tr>

       <tr>
         <td rowSpan={5}>Исходящий трафик</td>
         <td colSpan={2}>Блокировать весь исходящий трафик</td>
         <td>Блокировать весь исходящий трафик к целевому Pod'у. <br /><br /><b>Примечание</b>:<ul><li>Если исходящий трафик добавляется в поле `spec.policyTypes` в YAML без настройки конкретных правил, опция <b>Блокировать весь исходящий трафик</b> будет автоматически установлена при возврате к форме.</li></ul></td>
       </tr>

       <tr>
         <td colSpan={2}>Другие параметры</td>
         <td>Аналогично параметрам **Входящего трафика**, здесь не будет дальнейшего объяснения.</td>
       </tr>
     </tbody>
   </table>

5. Нажмите **Создать**.

## Справка

Если вам нужны дополнительные сведения, ознакомьтесь с официальной документацией по [сетевым политикам](https://kubernetes.io/docs/concepts/services-networking/network-policies/).
