---
weight: 10
i18n:
  title:
    zh: CLI常用命令操作
sourceSHA: 4e894a678e76fe76e03328034f23f7b1b51bfa1fd28b030a84b21c844de698e8
---

# Общие операции командной строки (CLI)

Платформа контейнеров Alauda предоставляет инструменты командной строки для взаимодействия пользователей с реестром платформы контейнеров Alauda. Ниже приведены некоторые примеры общих операций и команд:

Предположим, что адрес службы реестра платформы контейнеров Alauda для кластера имеет адрес registry.cluster.local, а пространство имен, с которым вы в настоящее время работаете, - my-ns.

> Свяжитесь с техническими службами, чтобы получить плагин kubectl-acp и убедитесь, что он правильно установлен в вашей среде.

## Вход в реестр

Войдите в реестр кластера, выполнив вход в ACP.

```bash
kubectl acp login <ACP-endpoint>
```

## Добавление разрешений на пространство имен для пользователей

Добавьте разрешение на извлечение из пространства имен для пользователя.

```bash
kubectl create rolebinding <binding-name> --clusterrole=system:image-puller --user=<username> -n <namespace>
```

Добавьте разрешение на загрузку в пространство имен для пользователя.

```bash
kubectl create rolebinding <binding-name> --clusterrole=system:image-pusher --user=<username> -n <namespace>
```

## Добавление разрешений на пространство имен для сервисной учетной записи

Добавьте разрешение на извлечение из пространства имен для сервисной учетной записи.

```bash
kubectl create rolebinding <binding-name> --clusterrole=system:image-puller --serviceaccount=<namespace>:<serviceaccount-name> -n <namespace>
```

Добавьте разрешение на загрузку в пространство имен для сервисной учетной записи.

```bash
kubectl create rolebinding <binding-name> --clusterrole=system:image-pusher --serviceaccount=<namespace>:<serviceaccount-name> -n <namespace>
```

## Извлечение изображений

Извлекает изображение из реестра в кластер (например, для развертывания Pod).

```bash
# Извлеките изображение с именем my-app, помеченное как latest, из реестра текущего пространства имен (my-ns)
kubectl acp pull registry.cluster.local/my-ns/my-app:latest

# Извлеките изображения из других пространств имен (например, shared-ns) (требуется разрешение на извлечение из пространства имен shared-ns)
kubectl acp pull registry.cluster.local/shared-ns/base-image:latest
```

Эта команда проверяет вашу личность и разрешения на извлечение в целевом пространстве имен, а затем извлекает изображение из реестра.

## Загрузка изображений

Загружает локально созданные изображения или изображения, извлеченные из других источников, в конкретное пространство имен в реестре.

Сначала вам нужно пометить (tag) локальное изображение с адресом и форматом пространства имен целевого реестра, используя стандартный инструмент командной строки контейнера, такой как docker.

```bash
# Пометьте его целевым адресом:
docker tag my-app:latest registry.cluster.local/my-ns/my-app:v1

# Используйте команду kubectl, чтобы загрузить его в реестр для текущего пространства имен (my-ns)
kubectl acp push registry.cluster.local/my-ns/my-app:v1
```

Загружает изображение из удаленного репозитория изображений в конкретное пространство имен в реестре платформы контейнеров Alauda.

```bash
# Если ваш удаленный репозиторий изображений имеет изображение remote.registry.io/demo/my-app:latest
# Используйте команду kubectl, чтобы загрузить его в пространство имен (my-ns) реестра
kubectl acp push remote.registry.io/demo/my-app:latest registry.cluster.local/my-ns/my-app:latest
```

Эта команда проверяет вашу личность и разрешения на загрузку в пространстве имен my-ns, а затем загружает локально помеченное изображение в реестр.
