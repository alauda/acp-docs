---
weight: 20
sourceSHA: 07f87ebe8037f6f01a1c423055f194355b76e1c4d60ef780ded23e6d6639cea0
---

# Подготовка к обновлению

## Важные заметки перед обновлением

- Поддерживаемые версии платформы для обновления: `3.16.0`, `3.16.1`, `3.16.2`, `3.18.0`, `3.18.1`.
  Убедитесь, что ваша текущая версия платформы находится в этом поддерживаемом диапазоне перед обновлением.

- **Версия Kubernetes** всех кластеров на платформе должна быть **не ниже 1.28**.
  Если какой-либо кластер ниже этой версии, сначала обновите его версию Kubernetes.

- Если на платформе есть кластер с **сервисной сеткой**, предоставленной платформой, убедитесь, что его **версия Istio не ниже 1.20**. В противном случае обновите сервисную сетку перед продолжением.

- Проверьте, установлен ли в каком-либо кластере на платформе плагин **CostManager** или **Kubecost**. Эти плагины **устарели в версии 4.0** и должны быть удалены перед обновлением.

- Если ваша версия платформы `3.16`, и в каком-либо кластере установлен **плагин для хранения логов ClickHouse**, удалите его **перед обновлением**. После завершения обновления переустановите плагин.

- Убедитесь, что в директории `/cpaas/minio` на **узлах управляющей плоскости глобального кластера** имеется как минимум **120 ГБ** свободного места.
  Если нет, увеличьте объем хранилища перед продолжением.

- Во время обновления пакет обновления должен быть **скопирован на любой узел управляющей плоскости** в глобальном кластере и распакован.
  Если пакет обновления и путь распаковки находятся на одном диске, убедитесь, что на диске есть **как минимум 250 ГБ** свободного места.

- При обновлении версии **Kubernetes кластера до 1.31 или выше** все работающие Pods будут **перезапущены**. Это поведение связано с изменениями в полях PodSpec, введенными в Kubernetes 1.31, и его нельзя избежать. Для получения дополнительной информации обратитесь к отчету о проблеме Kubernetes: [#129385](https://github.com/kubernetes/kubernetes/issues/129385).

- Начиная с версии **4.0**, процесс обновления для кластеров, использующих решение **глобального DR (восстановление после катастроф)**, изменился. Пожалуйста, обратитесь к [процедуре глобального DR](./upgrade_global_cluster.mdx#global_dr) для новой процедуры.

## Процедура подготовки

<Steps>
  ### Запустите контрольный список

  Свяжитесь с технической поддержкой, чтобы получить **скрипт контрольного списка**, и выполните его на целевой платформе для проверки готовности.

  ### Скачайте пакет обновления

  Для платформ, обновляющихся с версии `3.16` или `3.18` до `4.0`, **пакет обновления такой же, как и пакет установки**.
  Обратитесь к [Скачать пакет установки](../install/prepare/download.mdx) для получения инструкций.
</Steps>
