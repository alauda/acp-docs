---
weight: 20
sourceSHA: 4f88c4c2a5efe4588f6016382949586f609c2a0ca2d013d3e96d77ffd75d6b1e
---

# Создание балансировщика нагрузки

Балансировщик нагрузки — это служба, которая распределяет трафик между экземплярами контейнеров. Используя функциональность балансировки нагрузки, он автоматически распределяет входящий трафик для вычислительных компонентов и перенаправляет его на экземпляры контейнеров этих компонентов. Балансировка нагрузки может улучшить отказоустойчивость вычислительных компонентов, масштабировать внешние сервисные возможности этих компонентов и повысить доступность приложений.

Администраторы платформы могут создавать одноточечные или высокодоступные балансировщики нагрузки для любого кластера на платформе и управлять ресурсами балансировщиков нагрузки единообразно. Например, балансировка нагрузки может быть назначена проектам, что позволяет обеспечить доступ к ней только пользователям с соответствующими разрешениями проекта.

Пожалуйста, обратитесь к таблице ниже для получения объяснений связанных понятий в этом разделе.

| Параметр            | Описание                                                                                                                                                                                                                               |
| ------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **Балансировщик нагрузки** | Программное или аппаратное устройство, распределяющее сетевые запросы к доступным узлам в кластере. На платформе используется программный балансировщик нагрузки уровня 7.                                                              |
| **VIP**             | Виртуальный IP-адрес (Virtual IP Address) — это IP-адрес, который не соответствует конкретному компьютеру или конкретной сетевой карте. Когда балансировщик нагрузки имеет тип высокой доступности, адрес доступа должен быть VIP. |

## Предварительные требования

Высокая доступность **Балансировщика нагрузки** требует VIP. Пожалуйста, смотрите [Настройка VIP](../how_to/deploy_high_available_vip_for_alb.mdx).

## Создание балансировщика нагрузки

1. Перейдите в **Управление платформой**.

2. В левом боковом меню нажмите **Управление сетью** > **Балансировщик нагрузки**.

3. Нажмите **Создать балансировщик нагрузки**.

4. Следуйте инструкциям ниже, чтобы завершить настройку сети.

   | Параметр                                    | Описание                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
   | -------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
   | **Режим сети**                             | <ul><li>**Режим сети хоста**: Разрешено развертывание только одной реплики балансировщика нагрузки на одном узле, с несколькими службами, использующими один ALB, что обеспечивает превосходную сетевую производительность.</li><li>**Режим сети контейнера**: На одном узле можно развернуть несколько реплик балансировщика нагрузки, чтобы удовлетворить требования к отдельным ALB для каждой службы, с немного более низкой сетевой производительностью.</li></ul>                                                                                                                                                                                                                                                                                                                                                                                                                  |
   | **Внутренние маршрутизация и аннотации (Alpha)** | <ul><li>**Внутренняя маршрутизация**: При активации будет создана внутренняя маршрутизация типа Internal LoadBalancer для адреса доступа балансировщика нагрузки. Перед использованием убедитесь, что текущий кластер поддерживает маршрутизацию типа Internal LoadBalancer. Вы можете реализовать внутреннюю маршрутизацию LoadBalancer, встроенную в платформу; для конкретной настройки смотрите [Пул внешних адресов](../functions/create_metallb.mdx); при отключении необходимо настроить адрес доступа для балансировщика нагрузки.</li><li>**Аннотации**: Используются для декларации конфигурации или возможностей маршрутизации типа Internal LoadBalancer; для деталей смотрите [Аннотации для маршрутизации типа Internal LoadBalancer](/developer/building_application/functions/operation_after_creating/network_communications/service/annotation.mdx).</li></ul> |
   | **Адрес доступа**                           | Адрес доступа для балансировки нагрузки, т.е. адрес службы экземпляра балансировщика нагрузки. После успешного создания балансировщика нагрузки доступ к нему можно осуществить по этому адресу. <ul><li>В режиме сети хоста, пожалуйста, укажите в соответствии с фактическими условиями; это может быть доменное имя или IP-адрес (внутренний IP, внешний IP, VIP).</li><li>В режиме сети контейнера адрес будет получен автоматически.</li></ul>                                                                                                                                                                                                                                                                                                                                                                                                     |

5. Следуйте инструкциям ниже, чтобы завершить настройку ресурсов.

   | Параметр                      | Описание                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
   | ------------------------------ | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
   | **Спецификация**              | Пожалуйста, разумно определите спецификации в соответствии с потребностями бизнеса. Вы также можете обратиться к [Выбору и планированию балансировщика нагрузки](../how_to/decide_performance_selection.mdx) для справки.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
   | **Тип развертывания**            | <ul><li>**Одноточечный**: Группа контейнеров балансировщика нагрузки развертывается на одном узле, что может привести к риску недоступности балансировщика нагрузки в случае сбоя машины.</li><li>**Высокая доступность**: Несколько групп контейнеров балансировщика нагрузки развертываются на соответствующем количестве узлов, обычно 3. Это удовлетворяет требованиям балансировки нагрузки для больших объемов бизнеса, обеспечивая при этом аварийные возможности восстановления.</li></ul>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
   | **Реплики**                   | Число реплик — это количество групп контейнеров для балансировщика нагрузки.<br />**Совет**: Чтобы обеспечить высокую доступность балансировщика нагрузки, рекомендуется, чтобы количество реплик было не менее 3.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
   | **Метки узлов**                | Фильтруйте узлы с помощью меток для развертывания балансировщика нагрузки.<br />**Совет**: <ul><li>Рекомендуется, чтобы количество узлов, удовлетворяющих требованиям, было больше количества реплик балансировщика нагрузки.</li><li>Метка с одинаковым ключом может выбрать только одну (если выбрано несколько, подходящих хостов не будет доступно).</li></ul>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
   | **Метод распределения ресурсов** | <ul><li>**Экземпляр**: Любой порт в диапазоне от 1 до 65535, на котором экземпляр балансировщика нагрузки может слушать, может быть предоставлен для использования проектом.</li><li>**Порт (Alpha)**: Только порты в указанном диапазоне могут быть выделены для проектного использования. Этот метод позволяет осуществлять более точный контроль ресурсов, когда ресурсы порта ограничены.</li></ul>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
   | **Назначенный проект**           | <ul><li>Когда **Метод распределения ресурсов** установлен на **Экземпляр**, балансировщик нагрузки может быть выделен всем проектам, связанным с текущим кластером, или определенным проектам. В выделенных проектах все Pods во всех пространствах имен могут получать запросы, распределенные балансировщиком нагрузки. <ul><li>**Все проекты**: Выделяет балансировщик нагрузки для использования всеми проектами, связанными с текущим кластером.</li><li>**Определенные проекты (Alpha)**: Нажмите выпадающее меню под **Определенными проектами** и установите флажок слева от имени проекта, чтобы выбрать один или несколько проектов, выделяя балансировщик нагрузки для использования этими определенными проектами.<br />**Совет**: Вы можете отфильтровать проекты, введя названия проектов в выпадающем меню.</li><li>**Без выделения (Alpha)**: Временное невыделение никаких проектов. После создания балансировщика нагрузки вы можете использовать операцию **Обновить проект**, чтобы обновить параметры выделения проекта для созданного балансировщика нагрузки.</li></ul></li><li>При установке **Метода распределения ресурсов** на **Порт** этот пункт не нужно настраивать. Пожалуйста, вручную выделите информацию о портах после создания балансировщика нагрузки.</li></ul> |

6. Нажмите **Создать**. Процесс создания займет некоторое время; пожалуйста, наберитесь терпения.
