---
weight: 20
sourceSHA: 4f88c4c2a5efe4588f6016382949586f609c2a0ca2d013d3e96d77ffd75d6b1e
---

# Создание балансировщика нагрузки

Балансировщик нагрузки — это служба, которая распределяет трафик между контейнерными экземплярами. Используя функционал балансировки нагрузки, он автоматически распределяет входящий трафик для вычислительных компонентов и пересылает его на контейнерные экземпляры этих компонентов. Балансировка нагрузки может улучшить отказоустойчивость вычислительных компонентов, масштабировать внешнюю сервисную способность этих компонентов и повысить доступность приложений.

Администраторы платформы могут создавать однопойнтовые или высокодоступные балансировщики нагрузки для любого кластера на платформе и единообразно управлять и распределять ресурсы балансировщика нагрузки. Например, балансировка нагрузки может быть назначена проектам, что гарантирует, что только пользователи с соответствующими разрешениями проекта могут использовать балансировку нагрузки.

Пожалуйста, обратитесь к таблице ниже для объяснений связанных концепций в этом разделе.

| Параметр            | Описание                                                                                                                                                                                                                                 |
|---------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **Балансировщик нагрузки** | Программное или аппаратное устройство, которое распределяет сетевые запросы между доступными узлами в кластере. Используемый в платформе балансировщик нагрузки - это программный балансировщик нагрузки на уровне 7.                                  |
| **VIP**            | Виртуальный IP-адрес (Virtual IP Address) — это IP-адрес, который не соответствует конкретному компьютеру или конкретной сетевой карте. Когда балансировщик нагрузки является высокодоступным, адрес доступа должен быть VIP. |

## Предварительные требования

Высокая доступность **балансировщика нагрузки** требует наличия VIP. Пожалуйста, обратитесь к [Настройка VIP](../how_to/deploy_high_available_vip_for_alb.mdx).

## Создание балансировщика нагрузки

1. Перейдите в **Управление платформой**.

2. В левой боковой панели нажмите **Управление сетью** > **Балансировщик нагрузки**.

3. Нажмите **Создать балансировщик нагрузки**.

4. Следуйте инструкциям ниже, чтобы завершить настройку сети.

   | Параметр                                    | Описание                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
   |---------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
   | **Режим сети**                             | <ul><li>**Режим сети хоста**: На одном узле допускается развертывание только одной реплики балансировщика нагрузки, при этом несколько служб используют один ALB, что приводит к лучшей сетевой производительности.</li><li>**Режим сети контейнера**: На одном узле можно развернуть несколько реплик балансировщика нагрузки, чтобы удовлетворить требования отдельных ALB для каждой службы, с немного сниженной сетевой производительностью.</li></ul>                                                                                                                                                                                                                                                                                                          |
   | **Внутренний маршрутизация и аннотации (Alpha)** | <ul><li>**Внутренний маршрутизатор**: При включении будет создан маршрут типа Internal LoadBalancer для адреса доступа балансировщика нагрузки. Прежде чем использовать, убедитесь, что текущий кластер поддерживает маршрутизацию типа Internal LoadBalancer. Вы можете реализовать внутреннюю маршрутизацию встроенного LoadBalancer платформы; подробную конфигурацию смотрите в [Пул внешних адресов](../functions/create_metallb.mdx); при отключении необходимо настроить адрес доступа для балансировщика нагрузки.</li><li>**Аннотации**: Используется для декларации конфигурации или возможностей маршрутизации типа Internal LoadBalancer; для подробностей смотрите [Аннотации для маршрутизации типа Internal LoadBalancer](/developer/building_application/functions/operation_after_creating/network_communications/service/annotation.mdx).</li></ul> |
   | **Адрес доступа**                           | Адрес доступа для балансировки нагрузки, т.е. адрес службы экземпляра балансировщика нагрузки. После успешного создания балансировщика нагрузки можно получить доступ через этот адрес. <ul><li>В режиме сети хоста, пожалуйста, заполните в соответствии с фактическими условиями; это может быть доменное имя или IP-адрес (внутренний IP, внешний IP, VIP).</li><li>В режиме сети контейнера он будет получен автоматически.</li></ul>                                                                                                                                                                                                                                                 |

5. Выполните инструкции ниже, чтобы завершить настройку ресурсов.

   | Параметр                      | Описание                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
   |-------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
   | **Спецификация**              | Пожалуйста, разумно установите спецификации в соответствии с требованиями бизнеса. Вы также можете обратиться к [Выбор и планирование балансировщика нагрузки](../how_to/decide_performance_selection.mdx) за справкой.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
   | **Тип развертывания**          | <ul><li>**Однопунктный**: Группа контейнеров балансировщика нагрузки развертывается на одном узле, что может привести к риску недоступности балансировщика нагрузки в случае сбоя машины.</li><li>**Высокая доступность**: Несколько групп контейнеров балансировщика нагрузки развертываются по соответствующему количеству узлов, обычно 3. Это удовлетворяет потребности в балансировке нагрузки больших объемов бизнеса, обеспечивая в то же время возможности экстренного восстановления после аварии.</li></ul>                                                                                                                                                                                                                                                   |
   | **Реплики**                   | Количество реплик — это количество групп контейнеров для балансировщика нагрузки.<br />**Совет**: Для обеспечения высокой доступности балансировщика нагрузки рекомендуется, чтобы количество реплик было не менее 3.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
   | **Ярлыки узлов**              | Фильтровать узлы по ярлыкам для развертывания балансировщика нагрузки.<br />**Совет**: <ul><li>Рекомендуется, чтобы количество узлов, соответствующих требованиям, было больше, чем количество реплик балансировщика нагрузки.</li><li>Ярлык с одинаковым ключом может выбрать только один (если выбрано несколько, доступные хосты не будут найдены).</li></ul>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
   | **Метод распределения ресурсов** | <ul><li>**Экземпляр**: Для проектов можно предоставить любой порт в диапазоне от 1 до 65535, на котором экземпляр балансировщика нагрузки может осуществлять прослушивание.</li><li>**Порт (Alpha)**: Только порты в указанном диапазоне могут быть выделены для использования проектами. Этот метод позволяет более точно контролировать ресурсы, когда ресурсы портов ограничены.</li></ul>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
   | **Назначенный проект**         | <ul><li>Когда **Метод распределения ресурсов** установлен в значение **Экземпляр**, балансировщик нагрузки может быть выделен для всех проектов, связанных с текущим кластером, или для указанных проектов. В выделенных проектах все Pods во всех пространствах имен могут получать запросы, распределяемые балансировщиком нагрузки. <ul><li>**Все проекты**: Выделяет балансировщик нагрузки для использования всеми проектами, связанными с текущим кластером.</li><li>**Определенные проекты (Alpha)**: Нажмите выпадающее меню под **Определенные проекты** и нажмите на чекбокс слева от имени проекта, чтобы выбрать один или несколько проектов для выделения балансировщика нагрузки для этих указанных проектов.<br />**Совет**: Вы можете отфильтровать проекты, введя имена проектов в выпадающем меню.</li><li>**Не выделять (Alpha)**: Временно не выделять ни один проект. После создания балансировщика нагрузки вы можете использовать операцию **Обновить проект**, чтобы обновить параметры распределения проекта для созданного балансировщика нагрузки.</li></ul></li><li>Когда **Метод распределения ресурсов** установлен в значение **Порт**, данный пункт не нужно настраивать. Пожалуйста, вручную выделите информацию о порте после создания балансировщика нагрузки.</li></ul> |

6. Нажмите **Создать**. Процесс создания займет некоторое время; пожалуйста, потерпите.
