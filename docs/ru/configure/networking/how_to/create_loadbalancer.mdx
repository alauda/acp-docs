---
weight: 20
sourceSHA: 4f88c4c2a5efe4588f6016382949586f609c2a0ca2d013d3e96d77ffd75d6b1e
---

# Создание балансировщика нагрузки

Балансировщик нагрузки — это сервис, который распределяет трафик между экземплярами контейнеров. Используя функциональность балансировки нагрузки, он автоматически распределяет входящий трафик для вычислительных компонентов и перенаправляет его на экземпляры контейнеров этих компонентов. Балансировка нагрузки может улучшить отказоустойчивость вычислительных компонентов, масштабировать внешние сервисные возможности этих компонентов и повысить доступность приложений.

Администраторы платформы могут создавать одноточечные или высокодоступные балансировщики нагрузки для любого кластера на платформе, а также единообразно управлять и распределять ресурсы балансировщика нагрузки. Например, балансировка нагрузки может быть назначена проектам, что гарантирует, что только пользователи с соответствующими правами доступа к проекту могут использовать балансировку нагрузки.

Пожалуйста, обратитесь к таблице ниже для объяснения связанных понятий в этом разделе.

| Параметр          | Описание                                                                                                                                                                                                                               |
| ----------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **Балансировщик нагрузки** | Программное или аппаратное устройство, которое распределяет сетевые запросы между доступными узлами в кластере. Балансировщик нагрузки, используемый на платформе, является программным балансировщиком нагрузки уровня 7.                                                              |
| **VIP**           | Виртуальный IP-адрес (Virtual IP Address) — это IP-адрес, который не соответствует конкретному компьютеру или конкретной сетевой карте. Когда балансировщик нагрузки является высокодоступным, адрес доступа должен быть VIP. |

## Предварительные требования

Высокая доступность **Балансировщика нагрузки** требует наличия VIP. Пожалуйста, обратитесь к [Настройка VIP](../how_to/deploy_high_available_vip_for_alb.mdx).

## Создание балансировщика нагрузки

1. Перейдите в **Управление платформой**.

2. В левом боковом меню нажмите **Управление сетью** > **Балансировщик нагрузки**.

3. Нажмите **Создать балансировщик нагрузки**.

4. Следуйте инструкциям ниже, чтобы завершить настройку сети.

   | Параметр                                    | Описание                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
   | -------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
   | **Режим сети**                             | <ul><li>**Режим сети хоста**: Разрешено развертывание только одной реплики балансировщика нагрузки на одном узле, при этом несколько сервисов используют один ALB, что обеспечивает превосходную производительность сети.</li><li>**Режим сети контейнера**: На одном узле можно развернуть несколько реплик балансировщика нагрузки для удовлетворения требований отдельных ALB для каждого сервиса, с немного более низкой производительностью сети.</li></ul>                                                                                                                                                                                                                                                                                                                                                                                                                  |
   | **Внутренний маршрутизация и аннотации (Alpha)** | <ul><li>**Внутренний маршрутизация**: При включении будет создана маршрутизация типа Internal LoadBalancer для адреса доступа балансировщика нагрузки. Перед использованием убедитесь, что текущий кластер поддерживает маршрутизацию типа Internal LoadBalancer. Вы можете реализовать встроенную маршрутизацию LoadBalancer платформы; для конкретной настройки, пожалуйста, обратитесь к [Пул внешних адресов](../functions/create_metallb.mdx); при отключении необходимо настроить адрес доступа для балансировщика нагрузки.</li><li>**Аннотации**: Используются для объявления конфигурации или возможностей маршрутизации типа Internal LoadBalancer; для подробностей, пожалуйста, обратитесь к [Аннотации для маршрутизации типа Internal LoadBalancer](/developer/building_application/functions/operation_after_creating/network_communications/service/annotation.mdx).</li></ul> |
   | **Адрес доступа**                           | Адрес доступа для балансировки нагрузки, т.е. адрес сервиса экземпляра балансировщика нагрузки. После успешного создания балансировщика нагрузки к нему можно получить доступ по этому адресу. <ul><li>В режиме сети хоста, пожалуйста, заполните в соответствии с фактическими условиями; это может быть доменное имя или IP-адрес (внутренний IP, внешний IP, VIP).</li><li>В режиме сети контейнера он будет автоматически получен.</li></ul>                                                                                                                                                                                                                                                                                                                                                                                                     |

5. Следуйте инструкциям ниже, чтобы завершить настройку ресурсов.

   | Параметр                      | Описание                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
   | ------------------------------ | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
   | **Спецификация**              | Пожалуйста, разумно установите спецификации в соответствии с бизнес-потребностями. Вы также можете обратиться к [Выбор и планирование балансировщика нагрузки](../how_to/decide_performance_selection.mdx) для справки.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
   | **Тип развертывания**            | <ul><li>**Одноточечный**: Группа контейнеров балансировщика нагрузки развертывается на одном узле, что может привести к риску недоступности балансировщика нагрузки в случае сбоя машины.</li><li>**Высокая доступность**: Несколько групп контейнеров балансировщика нагрузки развертываются на соответствующем количестве узлов, обычно 3. Это удовлетворяет потребностям в балансировке нагрузки для больших объемов бизнеса, обеспечивая при этом возможности экстренного восстановления после катастроф.</li></ul>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
   | **Реплики**                   | Количество реплик — это количество групп контейнеров для балансировщика нагрузки.<br />**Совет**: Чтобы обеспечить высокую доступность балансировщика нагрузки, рекомендуется, чтобы количество реплик было не менее 3.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
   | **Метки узлов**                | Фильтруйте узлы с помощью меток для развертывания балансировщика нагрузки.<br />**Совет**: <ul><li>Рекомендуется, чтобы количество узлов, соответствующих требованиям, было больше, чем количество реплик балансировщика нагрузки.</li><li>Метка с одинаковым ключом может выбрать только один (если выбрано несколько, доступные хосты не будут найдены).</li></ul>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
   | **Метод распределения ресурсов** | <ul><li>**Экземпляр**: Любой порт в диапазоне от 1 до 65535, на котором экземпляр балансировщика нагрузки может прослушивать, может быть предоставлен для использования проектом.</li><li>**Порт (Alpha)**: Только порты в указанном диапазоне могут быть выделены для использования проектом. Этот метод позволяет более тонко контролировать ресурсы, когда ресурсы портов ограничены.</li></ul>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
   | **Назначенный проект**           | <ul><li>Когда **Метод распределения ресурсов** установлен на **Экземпляр**, балансировщик нагрузки может быть выделен для всех проектов, связанных с текущим кластером, или для указанных проектов. В выделенных проектах все Pods во всех пространствах имен могут получать запросы, распределяемые балансировщиком нагрузки. <ul><li>**Все проекты**: Выделяет балансировщик нагрузки для использования всеми проектами, связанными с текущим кластером.</li><li>**Указанные проекты (Alpha)**: Нажмите выпадающий список под **Указанные проекты** и установите флажок слева от имени проекта, чтобы выбрать один или несколько проектов, выделяя балансировщик нагрузки для использования этими указанными проектами.<br />**Совет**: Вы можете фильтровать проекты, вводя имена проектов в выпадающем списке.</li><li>**Без выделения (Alpha)**: Временно не выделяет ни один проект. После создания балансировщика нагрузки вы можете использовать операцию **Обновить проект**, чтобы обновить параметры выделения проекта для созданного балансировщика нагрузки.</li></ul></li><li>Когда **Метод распределения ресурсов** установлен на **Порт**, этот пункт не нужно настраивать. Пожалуйста, вручную выделите информацию о порте после создания балансировщика нагрузки.</li></ul> |

6. Нажмите **Создать**. Процесс создания займет некоторое время; пожалуйста, наберитесь терпения.
