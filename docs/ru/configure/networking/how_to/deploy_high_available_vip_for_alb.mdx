---
weight: 10
sourceSHA: 61e2aee0db5bed5945164fd259540b0f54523a1812afdbe85b9ae82bf8477f9a
---

# Развертывание высокодоступного VIP для ALB

Высокая доступность **Балансировщика нагрузки** требует наличия VIP. Существует два способа получения VIP.

## Метод 1: Использование внутренней маршрутизации типа LoadBalancer для предоставления VIP

При создании балансировщика нагрузки активируется опция **внутренняя маршрутизация**, и система автоматически создает внутреннюю маршрутизацию типа LoadBalancer для предоставления VIP для балансировщика нагрузки. Перед использованием убедитесь, что текущий кластер поддерживает внутреннюю маршрутизацию типа LoadBalancer. Вы можете использовать встроенную в платформу реализацию внутренней маршрутизации LoadBalancer, для конкретной настройки обратитесь к [Пул внешних адресов](../functions/create_metallb.mdx); если опция **внутренняя маршрутизация** отключена, вам потребуется настроить адрес доступа для балансировщика нагрузки.

## Метод 2: Использование внешнего устройства балансировщика нагрузки для предоставления VIP

- Пожалуйста, уточните у сетевого инженера IP-адрес (публичный IP, частный IP, VIP) или доменное имя службы балансировщика нагрузки перед развертыванием. Если вы хотите использовать доменное имя в качестве адреса для внешнего трафика для доступа к балансировщику нагрузки, вам необходимо заранее подать заявку на доменное имя и настроить разрешение доменных имен. Рекомендуется использовать коммерческое устройство балансировщика нагрузки для предоставления VIP; если этого нет, вы можете использовать [Решение по балансировке нагрузки Pure Software Data Center LB (Alpha)](./deploy_pure_software_datacenter_lb.mdx)

- В соответствии с бизнес-сценарием внешний балансировщик нагрузки должен настраивать проверки работоспособности для всех используемых портов, чтобы уменьшить время простоя при обновлении ALB. Конфигурация проверки работоспособности следующая:

  | Параметры проверки работоспособности | Описание                                                                                                                                                            |
  | ------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
  | **Порт**                              | <ul><li>Для глобальных кластеров укажите: 11782.</li><li>Для бизнес-классов укажите: 1936.</li></ul>                                                           |
  | **Протокол**                          | Тип протокола для проверки работоспособности, рекомендуется использовать TCP.                                                                                     |
  | **Тайм-аут ответа**                  | Время, необходимое для получения ответа проверки работоспособности, рекомендуется настроить на 2 секунды.                                                         |
  | **Интервал проверки**                | Временной интервал для проверки работоспособности, рекомендуется настроить на 5 секунд.                                                                          |
  | **Порог отказов**                    | Количество последовательных сбоев, после которых состояние проверки работоспособности сервера будет определено как неуспешное, рекомендуется настроить на 3 раза. |
