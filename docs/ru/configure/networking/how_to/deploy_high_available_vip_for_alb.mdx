---
weight: 10
sourceSHA: 61e2aee0db5bed5945164fd259540b0f54523a1812afdbe85b9ae82bf8477f9a
---

# Развертывание высокодоступного VIP для ALB

Высокая доступность **балансировщика нагрузки** требует VIP. Существует два способа получения VIP.

## Метод 1: Использование внутреннего маршрутизации типа LoadBalancer для предоставления VIP

При создании балансировщика нагрузки включается параметр **внутреннего маршрутизирования**, и система автоматически создает внутреннюю маршрутизацию типа LoadBalancer для предоставления VIP для балансировщика нагрузки. Перед использованием убедитесь, что текущий кластер поддерживает внутреннюю маршрутизацию типа LoadBalancer. Вы можете использовать встроенную реализацию внутренней маршрутизации LoadBalancer платформы, для конкретной конфигурации смотрите [Внешний адресный пул](../functions/create_metallb.mdx); если параметр **внутреннего маршрутизирования** отключен, вам нужно настроить адрес для доступа к балансировщику нагрузки.

## Метод 2: Использование внешнего устройства балансировщика нагрузки для предоставления VIP

- Пожалуйста, подтвердите с сетевым инженером IP-адрес (публичный IP, частный IP, VIP) или доменное имя сервиса балансировщика нагрузки перед развертыванием. Если вы хотите использовать доменное имя в качестве адреса для внешнего трафика для доступа к балансировщику нагрузки, вам необходимо заранее подать заявку на доменное имя и настроить разрешение доменного имени. Рекомендуется использовать коммерческое устройство балансировщика нагрузки для предоставления VIP, если нет, вы можете использовать [Решение Pure Software Data Center LB (Alpha)](./deploy_pure_software_datacenter_lb.mdx)

- В зависимости от бизнес-сценария внешнему балансировщику нагрузки необходимо настроить проверки состояния для всех используемых портов, чтобы уменьшить время простоя при обновлении ALB. Конфигурация проверки состояния следующая:

  | Параметры проверки состояния | Описание                                                                                                                                                            |
  | ---------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
  | **Порт**                     | <ul><li>Для глобальных кластеров укажите: 11782.</li><li>Для бизнес-кластеров укажите: 1936.</li></ul>                                                           |
  | **Протокол**                 | Тип протокола проверки состояния, рекомендуется использовать TCP.                                                                                                   |
  | **Тайм-аут ответа**          | Время, необходимое для получения ответа на проверку состояния, рекомендуется настроить его на 2 секунды.                                                           |
  | **Интервал проверки**        | Временной интервал для проверки состояния, рекомендуется настроить его на 5 секунд.                                                                                |
  | **Порог неисправности**      | Количество последовательных неудач, после которых статус проверки состояния сервера будет определен как сбой, рекомендуется настроить его на 3 раза.             |
