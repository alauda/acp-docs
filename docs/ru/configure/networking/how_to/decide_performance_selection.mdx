---
weight: 20
sourceSHA: ee35e0f869e453285fff6e43c92488011861f3af6523ace0fe3ae402f9f6e5db
---

# Выбор и планирование балансировщика нагрузки

В соответствии с предложенными спецификациями платформы для **малых**, **средних**, **крупных** и **кастомных** производственных сред, а также методами распределения ресурсов для **инстансов** и **портов**, ниже приведены рекомендации для развертывания.

### Малый производственный окружение

Для малых масштабов бизнеса, таких как наличие не более 5 узлов в кластере и использование только для запуска стандартных приложений, достаточно **одного** балансировщика нагрузки. Рекомендуется использовать его в режиме **высокой доступности** с как минимум 2 репликами для обеспечения стабильности окружения.

Можно изолировать балансировщик нагрузки с помощью **изоляции портов**, позволяя нескольким проектам использовать его совместно.

Пиковый QPS, измеренный в лабораторной среде для этой спецификации, составляет примерно 300 запросов в секунду.

![](../../../../en/configure/networking/assets/loadbalancer-mini.png)

### Среднее производственное окружение

Когда объем бизнеса достигает определенного масштаба, например, наличие не более 30 узлов в кластере и необходимость обработки бизнес-операций с высокой конкурентностью, наряду с запуском стандартных приложений, **одного** балансировщика нагрузки будет все еще достаточно. Рекомендуется использовать режим **высокой доступности** с как минимум 3 репликами для поддержания стабильности окружения.

Можно использовать как **изоляцию портов**, так и методы **распределения инстансов** для совместного использования балансировщика нагрузки несколькими проектами. Конечно, можно также создать новые балансировщики нагрузки для выделенного использования основными проектами.

Пиковый QPS, измеренный в лабораторной среде для этой спецификации, составляет около 10 000 запросов в секунду.

![](../../../../en/configure/networking/assets/loadbalancer-middle.png)

### Крупное производственное окружение

Для больших объемов бизнеса, таких как наличие более 30 узлов в кластере и необходимость обработки бизнес-операций с высокой конкурентностью, а также долгоживущих соединений данных, рекомендуется использовать **несколько** балансировщиков нагрузки, каждый в типе **высокой доступности** с как минимум 3 репликами для обеспечения стабильности окружения.

Можно изолировать балансировщик нагрузки с помощью методов как **изоляции портов**, так и **распределения инстансов** для совместного использования несколькими проектами. Также можно создать новые балансировщики нагрузки для эксклюзивного использования основными проектами.

Пиковый QPS, измеренный в лабораторной среде для этой спецификации, составляет примерно 20 000 запросов в секунду.

![](../../../../en/configure/networking/assets/loadbalancer-large.png)

### Рекомендации по развертыванию в особых сценариях

| Сценарий                          | Рекомендации по развертыванию                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| --------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **Функциональное тестирование**   | Рекомендуется развернуть **один инстанс** балансировщика нагрузки.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| **Тестовая среда**               | Если тестовая среда соответствует определениям **малой** или **средней**, указанных выше, использование балансировщика нагрузки **с единой точкой** будет достаточным. Инстанс балансировщика нагрузки можно использовать совместно среди **нескольких проектов**.                                                                                                                                                                                                                                                                                                                                                                   |
| **Основные приложения**           | Рекомендуется использовать специальные балансировщики нагрузки исключительно для основных приложений.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| **Перемещение больших объемов данных** | Из-за минимального потребления памяти, вызванного самим балансировщиком нагрузки, достаточно зарезервировать 2Gi памяти даже для спецификации **большого** объема. Однако, если бизнес требует передачи больших объемов данных, что приведет к значительному потреблению памяти, объем памяти для балансировщика нагрузки следует увеличить соответственно. <br /><br /> Рекомендуется постепенно увеличивать объем памяти балансировщика нагрузки в сценариях **кастомной** спецификации, внимательно отслеживая использование памяти, чтобы в конечном итоге достичь приемлемого объема памяти для разумных показателей использования. |

### Выбор режима использования балансировщика нагрузки

| Режим использования                                                                                                 | Преимущества                                                                                                                                                                 | Недостатки                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| ----------------------------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **(Рекомендуется) Назначить балансировщик нагрузки как ресурс инстанса для одного проекта**                        | <ul><li>Управление относительно простое.</li><li>Каждый проект имеет свой собственный балансировщик нагрузки, что обеспечивает изоляцию правил и разделение ресурсов, без вмешательства.</li></ul> | В режиме сетевого хоста кластер должен обладать значительным количеством узлов, доступных для балансировщика нагрузки, что приводит к высоким требованиям к потреблению ресурсов.                                                                                                                                                                                                                                                                                                                                  |
| **Назначить балансировщик нагрузки как ресурс инстанса для нескольких проектов**                                   | Управление относительно простое.                                                                                                                                              | Поскольку все назначенные проекты имеют полные права на инстанс балансировщика нагрузки, когда один проект настраивает порты и правила балансировщика нагрузки, могут возникнуть следующие ситуации: <ul><li>Правила, настроенные этим проектом, могут повлиять на другие проекты.</li><li>Ошибки при настройке балансировщика нагрузки могут изменить настройки других проектов.</li><li>Запросы трафика от конкретного бизнеса могут повлиять на общую доступность инстанса балансировщика нагрузки.</li></ul> |
| **Динамически распределять ресурсы балансировщика нагрузки по портам, с использованием разных портов для разных проектов** | Правила между проектами изолируют их, что обеспечивая отсутствие вмешательства.                                                                                               | <ul><li>Сложность управления возрастает. Администраторам платформы необходимо активно планировать и распределять порты для проектов и настраивать внешние сопоставления сервисов.</li><li>Зрелость распределения по портам ниже. В настоящее время его используют меньше клиентов, и требуется дальнейшее уточнение функций.</li><li>Конфликты ресурсов. Все службы, использующие один и тот же балансировщик нагрузки, могут столкнуться с ситуациями, когда одна служба негативно влияет на весь балансировщик нагрузки.</li></ul>                       |
