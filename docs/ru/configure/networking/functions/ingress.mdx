---
weight: 10
sourceSHA: c6b33635787210a39f08bc8babb9201a4844db122276845e419fd66ba61cbfee
---

# Совместимость аннотаций ingress-nginx

## Основные понятия

ingress-nginx является часто используемым контроллером входящего трафика в Kubernetes и определяет множество аннотаций для реализации различных функций, выходящих за рамки официального определения ingress.

## Поддерживаемые аннотации ingress-nginx

| Имя                                                                  | тип                        | Поддержка (v поддерживает x не поддерживает o частично поддерживает или может быть достигнуто с помощью конфигурации) |
|---------------------------------------------------------------------|---------------------------|---------------------------------------------------------------------------------------------------------------------|
| nginx.ingress.kubernetes.io/app-root                                 | строка                    | x                                                                                                                   |
| nginx.ingress.kubernetes.io/affinity                                 | cookie                    | o ingress не поддерживает. Правило alb может настраивать хеш куки                                                |
| nginx.ingress.kubernetes.io/use-regex                                | bool                      |                                                                                                                     |
| nginx.ingress.kubernetes.io/affinity-mode                            | "balanced" или "persistent" | o ingress не поддерживает. Правило alb может настраивать постоянство сессии                                        |
| nginx.ingress.kubernetes.io/affinity-canary-behavior                | "sticky" или "legacy"     | o ingress не поддерживает. Правило alb может настраивать постоянство сессии                                        |
| nginx.ingress.kubernetes.io/auth-realm                               | строка                    | v  [auth](./auth.mdx)                                                                                             |
| nginx.ingress.kubernetes.io/auth-secret                              | строка                    | v  [auth](./auth.mdx)                                                                                             |
| nginx.ingress.kubernetes.io/auth-secret-type                         | строка                    | v  [auth](./auth.mdx)                                                                                             |
| nginx.ingress.kubernetes.io/auth-type                                | "basic" или "digest"      | v  [auth](./auth.mdx)                                                                                             |
| nginx.ingress.kubernetes.io/auth-tls-secret                          | строка                    | x                                                                                                                   |
| nginx.ingress.kubernetes.io/auth-tls-verify-depth                    | число                     | x                                                                                                                   |
| nginx.ingress.kubernetes.io/auth-tls-verify-client                   | строка                    | x                                                                                                                   |
| nginx.ingress.kubernetes.io/auth-tls-error-page                      | строка                    | x                                                                                                                   |
| nginx.ingress.kubernetes.io/auth-tls-pass-certificate-to-upstream    | "true" или "false"        | x                                                                                                                   |
| nginx.ingress.kubernetes.io/auth-tls-match-cn                        | строка                    | x                                                                                                                   |
| nginx.ingress.kubernetes.io/auth-url                                 | строка                    | v                                                                                                                   |
| nginx.ingress.kubernetes.io/auth-cache-key                           | строка                    | x                                                                                                                   |
| nginx.ingress.kubernetes.io/auth-cache-duration                      | строка                    | x                                                                                                                   |
| nginx.ingress.kubernetes.io/auth-keepalive                           | число                     | x                                                                                                                   |
| nginx.ingress.kubernetes.io/auth-keepalive-share-vars                | "true" или "false"        | x                                                                                                                   |
| nginx.ingress.kubernetes.io/auth-keepalive-requests                  | число                     | x                                                                                                                   |
| nginx.ingress.kubernetes.io/auth-keepalive-timeout                   | число                     | x                                                                                                                   |
| nginx.ingress.kubernetes.io/auth-proxy-set-headers                   | строка                    | v                                                                                                                   |
| nginx.ingress.kubernetes.io/auth-snippet                             | строка                    | x                                                                                                                   |
| nginx.ingress.kubernetes.io/enable-global-auth                       | "true" или "false"        | o [auth](./auth.mdx)                                                                                             |
| nginx.ingress.kubernetes.io/backend-protocol                         | строка                    | v                                                                                                                   |
| nginx.ingress.kubernetes.io/canary                                   | "true" или "false"        | x                                                                                                                   |
| nginx.ingress.kubernetes.io/canary-by-header                         | строка                    | x                                                                                                                   |
| nginx.ingress.kubernetes.io/canary-by-header-value                   | строка                    | x                                                                                                                   |
| nginx.ingress.kubernetes.io/canary-by-header-pattern                 | строка                    | x                                                                                                                   |
| nginx.ingress.kubernetes.io/canary-by-cookie                         | строка                    | x                                                                                                                   |
| nginx.ingress.kubernetes.io/canary-weight                            | число                     | x                                                                                                                   |
| nginx.ingress.kubernetes.io/canary-weight-total                      | число                     | x                                                                                                                   |
| nginx.ingress.kubernetes.io/client-body-buffer-size                  | строка                    | x                                                                                                                   |
| nginx.ingress.kubernetes.io/configuration-snippet                    | строка                    | x                                                                                                                   |
| nginx.ingress.kubernetes.io/custom-http-errors                       | \[]int                    | x                                                                                                                   |
| nginx.ingress.kubernetes.io/custom-headers                           | строка                    | o                                                                                                                   |
| nginx.ingress.kubernetes.io/default-backend                          | строка                    | o можно использовать default-backend ingress                                                                          |
| nginx.ingress.kubernetes.io/enable-cors                              | "true" или "false"        | v                                                                                                                   |
| nginx.ingress.kubernetes.io/cors-allow-origin                        | строка                    | v                                                                                                                   |
| nginx.ingress.kubernetes.io/cors-allow-methods                       | строка                    | v                                                                                                                   |
| nginx.ingress.kubernetes.io/cors-allow-headers                       | строка                    | v                                                                                                                   |
| nginx.ingress.kubernetes.io/cors-expose-headers                      | строка                    | x                                                                                                                   |
| nginx.ingress.kubernetes.io/cors-allow-credentials                   | "true" или "false"        | x                                                                                                                   |
| nginx.ingress.kubernetes.io/cors-max-age                             | число                     | x                                                                                                                   |
| nginx.ingress.kubernetes.io/force-ssl-redirect                       | "true" или "false"        | v  [redirect](./redirect.mdx)                                                                                     |
| nginx.ingress.kubernetes.io/from-to-www-redirect                     | "true" или "false"        | x                                                                                                                   |
| nginx.ingress.kubernetes.io/http2-push-preload                       | "true" или "false"        | x                                                                                                                   |
| nginx.ingress.kubernetes.io/limit-connections                        | число                     | x                                                                                                                   |
| nginx.ingress.kubernetes.io/limit-rps                                | число                     | x                                                                                                                   |
| nginx.ingress.kubernetes.io/global-rate-limit                        | число                     | x                                                                                                                   |
| nginx.ingress.kubernetes.io/global-rate-limit-window                 | duration                   | x                                                                                                                   |
| nginx.ingress.kubernetes.io/global-rate-limit-key                    | строка                    | x                                                                                                                   |
| nginx.ingress.kubernetes.io/global-rate-limit-ignored-cidrs          | строка                    | x                                                                                                                   |
| nginx.ingress.kubernetes.io/permanent-redirect                       | строка                    | v   [redirect](./redirect.mdx)                                                                                     |
| nginx.ingress.kubernetes.io/permanent-redirect-code                  | число                     | v   [redirect](./redirect.mdx)                                                                                     |
| nginx.ingress.kubernetes.io/temporal-redirect                        | строка                    | v   [redirect](./redirect.mdx)                                                                                     |
| nginx.ingress.kubernetes.io/preserve-trailing-slash                  | "true" или "false"        | x                                                                                                                   |
| nginx.ingress.kubernetes.io/proxy-body-size                          | строка                    | x                                                                                                                   |
| nginx.ingress.kubernetes.io/proxy-cookie-domain                      | строка                    | x                                                                                                                   |
| nginx.ingress.kubernetes.io/proxy-cookie-path                        | строка                    | x                                                                                                                   |
| nginx.ingress.kubernetes.io/proxy-connect-timeout                    | число                     | v   [timeout](./timeout.mdx)                                                                                       |
| nginx.ingress.kubernetes.io/proxy-send-timeout                       | число                     | v   [timeout](./timeout.mdx)                                                                                       |
| nginx.ingress.kubernetes.io/proxy-read-timeout                       | число                     | v   [timeout](./timeout.mdx)                                                                                       |
| nginx.ingress.kubernetes.io/proxy-next-upstream                      | строка                    | x                                                                                                                   |
| nginx.ingress.kubernetes.io/proxy-next-upstream-timeout              | число                     | x                                                                                                                   |
| nginx.ingress.kubernetes.io/proxy-next-upstream-tries                | число                     | x                                                                                                                   |
| nginx.ingress.kubernetes.io/proxy-request-buffering                  | строка                    | x                                                                                                                   |
| nginx.ingress.kubernetes.io/proxy-redirect-from                      | строка                    | x                                                                                                                   |
| nginx.ingress.kubernetes.io/proxy-redirect-to                        | строка                    | x                                                                                                                   |
| nginx.ingress.kubernetes.io/proxy-http-version                       | "1.0" или "1.1"           | x                                                                                                                   |
| nginx.ingress.kubernetes.io/proxy-ssl-secret                         | строка                    | x                                                                                                                   |
| nginx.ingress.kubernetes.io/proxy-ssl-ciphers                        | строка                    | x                                                                                                                   |
| nginx.ingress.kubernetes.io/proxy-ssl-name                           | строка                    | x                                                                                                                   |
| nginx.ingress.kubernetes.io/proxy-ssl-protocols                      | строка                    | x                                                                                                                   |
| nginx.ingress.kubernetes.io/proxy-ssl-verify                         | строка                    | x                                                                                                                   |
| nginx.ingress.kubernetes.io/proxy-ssl-verify-depth                   | число                     | x                                                                                                                   |
| nginx.ingress.kubernetes.io/proxy-ssl-server-name                    | строка                    | x                                                                                                                   |
| nginx.ingress.kubernetes.io/enable-rewrite-log                       | "true" или "false"        | x                                                                                                                   |
| nginx.ingress.kubernetes.io/rewrite-target                           | URI                       | v                                                                                                                   |
| nginx.ingress.kubernetes.io/satisfy                                  | строка                    | x                                                                                                                   |
| nginx.ingress.kubernetes.io/server-alias                             | строка                    | x                                                                                                                   |
| nginx.ingress.kubernetes.io/server-snippet                           | строка                    | x                                                                                                                   |
| nginx.ingress.kubernetes.io/service-upstream                         | "true" или "false"        | x                                                                                                                   |
| nginx.ingress.kubernetes.io/session-cookie-change-on-failure         | "true" или "false"        | x                                                                                                                   |
| nginx.ingress.kubernetes.io/session-cookie-conditional-samesite-none | "true" или "false"        | x                                                                                                                   |
| nginx.ingress.kubernetes.io/session-cookie-domain                    | строка                    | x                                                                                                                   |
| nginx.ingress.kubernetes.io/session-cookie-expires                   | строка                    | x                                                                                                                   |
| nginx.ingress.kubernetes.io/session-cookie-max-age                   | строка                    | x                                                                                                                   |
| nginx.ingress.kubernetes.io/session-cookie-name                      | строка                    | x                                                                                                                   |
| nginx.ingress.kubernetes.io/session-cookie-path                      | строка                    | x                                                                                                                   |
| nginx.ingress.kubernetes.io/session-cookie-samesite                  | строка                    | x                                                                                                                   |
| nginx.ingress.kubernetes.io/session-cookie-secure                    | строка                    | x                                                                                                                   |
| nginx.ingress.kubernetes.io/ssl-redirect                             | "true" или "false"        | v                                                                                                                   |
| nginx.ingress.kubernetes.io/ssl-passthrough                          | "true" или "false"        | x                                                                                                                   |
| nginx.ingress.kubernetes.io/stream-snippet                           | строка                    | x                                                                                                                   |
| nginx.ingress.kubernetes.io/upstream-hash-by                         | строка                    | x                                                                                                                   |
| nginx.ingress.kubernetes.io/x-forwarded-prefix                       | строка                    | x                                                                                                                   |
| nginx.ingress.kubernetes.io/load-balance                             | строка                    | x                                                                                                                   |
| nginx.ingress.kubernetes.io/upstream-vhost                           | строка                    | v                                                                                                                   |
| nginx.ingress.kubernetes.io/denylist-source-range                    | CIDR                      | o можно достичь аналогичного эффекта с помощью [modsecurity](../how_to/modsecurity.mdx)                          |
| nginx.ingress.kubernetes.io/whitelist-source-range                   | CIDR                      | o можно достичь аналогичного эффекта с помощью [modsecurity](../how_to/modsecurity.mdx)                          |
| nginx.ingress.kubernetes.io/proxy-buffering                          | строка                    | x                                                                                                                   |
| nginx.ingress.kubernetes.io/proxy-buffers-number                     | число                     | x                                                                                                                   |
| nginx.ingress.kubernetes.io/proxy-buffer-size                        | строка                    | x                                                                                                                   |
| nginx.ingress.kubernetes.io/proxy-max-temp-file-size                 | строка                    | x                                                                                                                   |
| nginx.ingress.kubernetes.io/ssl-ciphers                              | строка                    | x                                                                                                                   |
| nginx.ingress.kubernetes.io/ssl-prefer-server-ciphers                | "true" или "false"        | x                                                                                                                   |
| nginx.ingress.kubernetes.io/connection-proxy-header                  | строка                    | x                                                                                                                   |
| nginx.ingress.kubernetes.io/enable-access-log                        | "true" или "false"        | o по умолчанию включен access_log, формат фиксированный                                                           |
| nginx.ingress.kubernetes.io/enable-opentelemetry                     | "true" или "false"        | v [otel](./otel.mdx)                                                                                             |
| nginx.ingress.kubernetes.io/opentelemetry-trust-incoming-span        | "true" или "false"        | v [otel](./otel.mdx)                                                                                             |
| nginx.ingress.kubernetes.io/enable-modsecurity                       | bool                      | v [modsecurity](../how_to/modsecurity.mdx)                                                                       |
| nginx.ingress.kubernetes.io/enable-owasp-core-rules                  | bool                      | v [modsecurity](../how_to/modsecurity.mdx)                                                                       |
| nginx.ingress.kubernetes.io/modsecurity-transaction-id               | строка                    | v [modsecurity](../how_to/modsecurity.mdx)                                                                       |
| nginx.ingress.kubernetes.io/modsecurity-snippet                      | строка                    | v [modsecurity](../how_to/modsecurity.mdx)                                                                       |
| nginx.ingress.kubernetes.io/mirror-request-body                      | строка                    | x                                                                                                                   |
| nginx.ingress.kubernetes.io/mirror-target                            | строка                    | x                                                                                                                   |
| nginx.ingress.kubernetes.io/mirror-host                              | строка                    | x                                                                                                                   |
