---
weight: 10
sourceSHA: 7d1a69d3d920360ebc35e697ca4f3ba3145637f3d7b4c4251860a48be7593948
---

# Создание пула внешних IP-адресов

Пул внешних IP-адресов — это набор IP-адресов, которые MetalLB использует для получения внешних IP-адресов доступа для внутренних маршрутов типа LoadBalancer.

## Предварительные условия

Если вам необходимо использовать пул внешних IP-адресов типа BGP, пожалуйста, свяжитесь с администратором, чтобы включить соответствующие функции.

## Ограничения и лимиты

IP-ресурсы для внешнего адреса должны соответствовать следующим условиям:

- Пул внешних адресов должен быть подключен на уровне 2 (L2) к доступным узлам.

- IP-адреса должны быть доступны платформе и не могут включать IP-адреса, которые уже используются физической сетью, такие как IP-адреса шлюзов.

- Не должно быть пересечения с сетями, используемыми кластером, включая Cluster CIDR, Service CIDR, подсети и т.д.

- В среде с поддержкой двух протоколов (dual-stack) убедитесь, что одновременно существуют как IPv4, так и IPv6 адреса в одном пуле внешних адресов, и их количество больше 0. В противном случае внутренние маршруты типа LoadBalancer в режиме dual-stack не смогут получить внешние адреса доступа.

- В среде IPv6 DNS узлов должен поддерживать IPv6; в противном случае плагин MetalLB не может быть успешно установлен.

## Развертывание плагина MetalLB

Использование пула внешних адресов зависит от плагина MetalLB.

### Шаги

1. Перейдите в **Управление платформой**.

2. В левой навигационной панели нажмите **Управление кластером** > **Кластер**.

3. Щелкните по ***Имени кластера***, в котором будет развернут плагин.

4. На вкладке **Плагины** нажмите **MetalLB** справа от ⋮ > **Развернуть**.

5. Подождите, пока статус развертывания не отобразит **Развертывание успешно**, чтобы завершить развертывание.

## Создание пула внешних IP-адресов

1. Перейдите в **Управление платформой**.

2. В левой навигационной панели нажмите **Управление сетью** > **Пул внешних IP-адресов**.

3. Нажмите **Создать пул внешних IP-адресов**.

4. Ознакомьтесь с инструкциями ниже, чтобы настроить некоторые параметры.

   | Параметр           | Описание                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
   | ------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
   | **Тип**            | <ul><li>L2: Связь и пересылка на основе MAC-адресов, подходит для небольших или локальных сетей, которые требуют простого и быстрого переключения на уровне 2, с преимуществами в простой настройке и низкой задержке.</li><li>BGP (Alpha): Маршрутизация и пересылка на основе IP-адресов, использует протокол BGP для обмена маршрутизируемой информацией, подходит для масштабных сетей, требующих сложной маршрутизации через несколько автономных систем, с преимуществами в высокой масштабируемости и надежности.</li></ul>                                                                                                                                                                                                                                                                                                                                                 |
   | **IP-ресурсы**    | Поддерживает ввод в форматах CIDR и диапазонов IP. Нажмите **Добавить**, чтобы поддерживать несколько записей, примеры:<br />**CIDR**: `192.168.1.1/24`.<br />**Диапазон IP**: `192.168.2.1` ~ `192.168.2.255`.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
   | **Доступные узлы** | В режиме L2 доступные узлы — это те, которые используются для передачи всего VIP-трафика; в режиме BGP доступные узлы — это те, которые используются для передачи VIP, установления BGP-соединений с пирами и объявления маршрутов наружу. <ul><li><b>Имя узла</b>: Выберите доступные узлы на основе имен узлов.</li><li><b>Выбор меток</b>: Выберите доступные узлы на основе меток.</li><li><b>Показать детали узла</b>: Просмотреть окончательные доступные узлы в формате списка.</li></ul><b>Примечание</b>: <ul><li>При использовании типа BGP доступные узлы — это узлы следующего перехода; убедитесь, что выбранные доступные узлы являются подмножеством [Узлов подключения BGP](./create_bgppeer.mdx).</li><li>Вы можете настроить либо выбор метки, либо имя узла отдельно для выбора доступных узлов; если оба настроены одновременно, окончательные доступные узлы являются пересечением обоих.</li></ul> |
   | **BGP-соседи**       | Выберите BGP-соседей; пожалуйста, обратитесь к [BGP-соседям](./create_bgppeer.mdx) для получения конкретных конфигураций.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |

5. Нажмите **Создать**.

## Просмотр политики сигнализации

1. Перейдите в **Управление платформой**.

2. В левой навигационной панели нажмите **Управление сетью** > **Пул внешних IP-адресов**.

3. Нажмите **Просмотреть политику сигнализации** в верхнем правом углу страницы, чтобы просмотреть общую политику сигнализации для MetalLB.
