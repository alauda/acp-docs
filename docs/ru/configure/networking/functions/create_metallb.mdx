---
weight: 10
sourceSHA: 7d1a69d3d920360ebc35e697ca4f3ba3145637f3d7b4c4251860a48be7593948
---

# Создание пула внешних IP-адресов

Пул внешних IP-адресов — это коллекция IP-адресов, которые MetalLB использует для получения внешних IP-адресов доступа для внутренних маршрутов типа LoadBalancer.

## Предварительные условия

Если вам необходимо использовать пул внешних IP-адресов типа BGP, пожалуйста, свяжитесь с администратором для включения соответствующих функций.

## Ограничения и ограничения

IP-ресурсы для внешнего адреса должны соответствовать следующим условиям:

- Пул внешних адресов должен быть соединен по уровню 2 (L2) с доступными узлами.

- IP-адреса должны быть доступны для платформы и не могут включать IP-адреса, которые уже используются физической сетью, такие как IP-адреса шлюза.

- Не должно быть перекрытия с сетями, используемыми кластером, включая Cluster CIDR, Service CIDR, подсети и т. д.

- В среде с двойным стеком убедитесь, что одновременно существуют как IPv4, так и IPv6 адреса в одном и том же пуле внешних адресов, и их количество больше 0. В противном случае внутренние маршруты типа LoadBalancer с двойным стеком не смогут получить внешние адреса доступа.

- В среде IPv6 DNS узлов должен поддерживать IPv6; в противном случае плагин MetalLB не может быть успешно развернут.

## Развертывание плагина MetalLB

Использование пула внешних адресов зависит от плагина MetalLB.

### Шаги

1. Перейдите в **Управление платформой**.

2. В левой навигационной панели нажмите **Управление кластером** > **Кластер**.

3. Нажмите на ***Имя кластера***, в котором будет развернут плагин.

4. На вкладке **Плагины** нажмите **MetalLB** справа от ⋮ > **Развернуть**.

5. Дождитесь, пока статус развертывания не покажет **Развертывание успешно**, чтобы завершить развертывание.

## Создание пула внешних IP-адресов

1. Перейдите в **Управление платформой**.

2. В левой навигационной панели нажмите **Управление сетью** > **Пул внешних IP-адресов**.

3. Нажмите **Создать пул внешних IP-адресов**.

4. Ознакомьтесь с следующими инструкциями для настройки определенных параметров.

   | Параметр           | Описание                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
   | ------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
   | **Тип**            | <ul><li>L2: Связь и пересылка на основе MAC-адресов, подходит для маломасштабных или локальных сетей, которые требуют простой и быстрой пересылки на уровне 2, с преимуществами в простой конфигурации и низкой задержке.</li><li>BGP (Alpha): Маршрутизация и пересылка на основе IP-адресов, использующая протокол BGP для обмена маршрутной информацией, подходит для крупных сетей, требующих сложной маршрутизации через несколько автономных систем, с преимуществами в высокой масштабируемости и надежности.</li></ul>                                                                                                                                                                                                                                                                                                                                                 |
   | **IP-ресурсы**    | Поддержка ввода в форматах CIDR и диапазона IP. Нажмите **Добавить**, чтобы поддерживать несколько записей, примеры следующие:<br />**CIDR**: `192.168.1.1/24`.<br />**Диапазон IP**: `192.168.2.1` \~ `192.168.2.255`.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
   | **Доступные узлы** | В режиме L2 доступные узлы — это те, которые используются для переноса всего трафика VIP; в режиме BGP доступные узлы — это те, которые используются для переноса VIP, установления BGP-соединений с пирами и объявления маршрутов внешне. <ul><li><b>Имя узла</b>: Выберите доступные узлы на основе имен узлов.</li><li><b>Селектор меток</b>: Выберите доступные узлы на основе меток.</li><li><b>Показать детали узла</b>: Просмотреть окончательные доступные узлы в формате списка.</li></ul><b>Примечание</b>: <ul><li>При использовании типа BGP доступные узлы — это узлы следующего перехода; убедитесь, что выбранные доступные узлы являются подмножеством [Узлов соединения BGP](./create_bgppeer.mdx).</li><li>Вы можете настроить либо селектор меток, либо имя узла отдельно для выбора доступных узлов; если оба настроены одновременно, окончательные доступные узлы будут пересечением обоих.</li></ul> |
   | **BGP-соседи**       | Выберите BGP-соседей; пожалуйста, обратитесь к [BGP-соседям](./create_bgppeer.mdx) для конкретных настроек.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |

5. Нажмите **Создать**.

## Просмотр политики тревог

1. Перейдите в **Управление платформой**.

2. В левой навигационной панели нажмите **Управление сетью** > **Пул внешних IP-адресов**.

3. Нажмите **Просмотреть политику тревог** в правом верхнем углу страницы, чтобы просмотреть общую политику тревог для MetalLB.
