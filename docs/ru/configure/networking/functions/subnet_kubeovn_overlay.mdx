---
weight: 20
sourceSHA: df0fd9220de91e62d618655742f67e7cf3fc3b199d13e15295de734e4367386f
---

# Создание подсети (сеть Kube-OVN Overlay)

Создайте подсеть в сети Kube-OVN Overlay для достижения более детализированной изоляции ресурсов в кластере.

**Примечание**: Платформа имеет встроенную подсеть **join** для связи между узлами и группами контейнеров; пожалуйста, избегайте конфликтов в сетевых сегментах между **join** и новосозданными подсетями.

## Правила распределения IP-адресов

**Описание**: Если проекту или пространству имен присвоено несколько подсетей, IP-адрес будет случайным образом выбран из одной из подсетей.

- Распределение проектов:

  - Если проект не привязан к подсети, Pods во всех пространствах имен под этим проектом могут использовать только IP-адреса из подсети по умолчанию. Если в подсети по умолчанию недостаточно IP-адресов, Pods не запустятся.
  - Если проект привязан к подсети, Pods во всех пространствах имен под этим проектом могут использовать только IP-адреса из этой подсети.

- Распределение пространств имен:

  - Если пространство имен не привязано к подсети, Pods в данном пространстве имен могут использовать только IP-адреса из подсети по умолчанию. Если в подсети по умолчанию недостаточно IP-адресов, Pods не запустятся.
  - Если пространство имен привязано к подсети, Pods в этом пространстве имен могут использовать только IP-адреса из этой подсети.

## Создание подсети и выделение для проектов или пространств имен

1. Войдите в **Управление платформой**.

2. В левой панели навигации нажмите на **Управление сетью** > **Подсеть**.

3. Нажмите на **Создать подсеть**.

4. Ознакомьтесь со следующими инструкциями для настройки связанных параметров.

   | Параметр                | Описание                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
   | ------------------------ | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
   | **Сетевой сегмент**      | После назначения подсети проекту или пространству имен, IP-адреса в этом сегменте будут случайным образом распределены для использования группами контейнеров.                                                                                                                                                                                                                                                                                                                                                                                                                                           |
   | **Резервированный IP**          | Набор зарезервированных IP-адресов не будет автоматически распределен. Например, он может использоваться в качестве IP-адреса для **фиксированного IP** вычислительных компонентов.                                                                                                                                                                                                                                                                                                                                                                                                                                    |
   | **Тип шлюза**         | Выберите тип шлюза для подсети для управления исходящим трафиком. <br />- **Распределенный**: Каждый узел в кластере может действовать как исходящий узел для групп контейнеров на текущем узле, что позволяет использовать распределенный выход. <br />- **Централизованный**: Все группы контейнеров в кластере используют один или несколько конкретных узлов в качестве исходящих узлов, облегчая внешнее аудирование и управление файрволом. Установка нескольких централизованных **узлов шлюза** может обеспечить высокую доступность.                                                                                                 |
   | **ECMP (альфа)**         | При выборе централизованного шлюза можно использовать функцию ECMP. По умолчанию шлюз работает в режиме мастер-слейв, при этом только мастер-шлюз обрабатывает трафик. При включении ECMP (маршрутизация с равнозначными затратами) исходящий трафик будет маршрутизироваться через несколько равнозначных путей ко всем доступным узлам шлюза, увеличивая общий пропускной способности шлюза. <br /><br />**Примечание**: Пожалуйста, заранее включите функции, связанные с ECMP.                                                                                                                 |
   | **Узлы шлюза**       | При использовании централизованного шлюза выберите один или несколько конкретных узлов в качестве узлов шлюза.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
   | **NAT для исходящего трафика** | Выберите, нужно ли включить NAT (трансляцию сетевых адресов) для исходящего трафика. По умолчанию он включен. <br />Он в основном используется для установки адреса доступа, который будет открыт для внешней сети, когда группы контейнеров в подсети выходят в интернет. <br />Когда NAT для исходящего трафика включен, IP-адрес узла будет использоваться в качестве адреса доступа для групп контейнеров в текущей подсети; когда он не включен, IP-адреса групп контейнеров в пределах подсети будут напрямую выставлены в открытый доступ. В этом случае рекомендуется использовать централизованный шлюз. |

5. Нажмите **Подтвердить**.

6. На странице деталей подсети выберите **Действия** > **Выделить проект** / **Пространство имен**.

7. Завершите настройку и нажмите **Выделить**.
