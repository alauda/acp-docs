---
weight: 20
sourceSHA: a8d76f292e963fff354447de3a75d81a8b370cafa7cd972a6cbe01f21ac1c0c0
---

# Создание подсети (Kube-OVN Overlay Network)

Создайте подсеть в Kube-OVN Overlay Network для достижения более детальной сетевой изоляции ресурсов в кластере.

**Примечание**: Платформа имеет встроенную подсеть **join** для связи между узлами и Pod; пожалуйста, избегайте конфликтов в сетевых сегментах между **join** и вновь созданными подсетями.

## Правила распределения IP

**Описание**: Если проекту или пространству имен назначено несколько подсетей, IP-адрес будет случайным образом выбран из одной из подсетей.

- Распределение по проектам:

  - Если проект не привязан к подсети, Pods во всех пространствах имен под этим проектом могут использовать только IP-адреса из подсети по умолчанию. Если в подсети по умолчанию недостаточно IP-адресов, Pods не запустятся.
  - Если проект привязан к подсети, Pods во всех пространствах имен под этим проектом могут использовать только IP-адреса из этой подсети.

- Распределение по пространствам имен:

  - Если пространство имен не привязано к подсети, Pods в этом пространстве имен могут использовать только IP-адреса из подсети по умолчанию. Если в подсети по умолчанию недостаточно IP-адресов, Pods не запустятся.
  - Если пространство имен привязано к подсети, Pods в этом пространстве имен могут использовать только IP-адреса из этой подсети.

## Создание подсети и распределение по проектам или пространствам имен

1. Войдите в **Управление платформой**.

2. В левой навигационной панели нажмите **Управление сетью** > **Подсеть**.

3. Нажмите **Создать подсеть**.

4. Ознакомьтесь с следующими инструкциями для настройки связанных параметров.

   | Параметр                | Описание                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
   | ------------------------ | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
   | **Сетевой сегмент**      | После назначения подсети проекту или пространству имен IP-адреса в этом сегменте будут случайным образом распределены для использования Pods.                                                                                                                                                                                                                                                                                                                                                                                                                   |
   | **Резервированный IP**          | Резервированный набор IP не будет автоматически распределен. Например, он может использоваться как IP-адрес для **фиксированного IP** вычислительных компонентов.                                                                                                                                                                                                                                                                                                                                                                                                |
   | **Тип шлюза**         | Выберите тип шлюза для подсети, чтобы контролировать исходящий трафик. <br />- **Распределенный**: Каждый узел в кластере может действовать как исходящий узел для Pods на текущем узле, что позволяет осуществлять распределенный выход. <br />- **Централизованный**: Все Pods в кластере используют один или несколько конкретных узлов в качестве исходящих узлов, что облегчает внешний аудит и контроль брандмауэра. Установка нескольких централизованных **узлов шлюза** может обеспечить высокую доступность.                                                                                     |
   | **ECMP (Alpha)**         | При выборе **Централизованного** шлюза можно использовать функцию ECMP. По умолчанию шлюз работает в режиме мастер-слейв, при этом только мастер-шлюз обрабатывает трафик. При включении ECMP (маршрутизация с равными затратами) исходящий трафик будет маршрутизироваться через несколько равнозначных путей ко всем доступным узлам шлюза, что увеличивает общую пропускную способность шлюза. <br /><br />**Примечание**: Пожалуйста, заранее включите функции, связанные с ECMP.                                                                             |
   | **Узлы шлюза**        | При использовании **Централизованного** шлюза выберите один или несколько конкретных узлов в качестве узлов шлюза.                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
   | **NAT для исходящего трафика** | Выберите, нужно ли включить NAT (преобразование сетевых адресов) для исходящего трафика. По умолчанию он включен. <br />Он в основном используется для установки адреса доступа, открытого для внешней сети, когда Pods в подсети получают доступ к интернету. <br />Когда NAT для исходящего трафика включен, IP-адрес хоста будет использоваться в качестве адреса доступа для Pods в текущей подсети; когда он не включен, IP-адреса Pods в подсети будут напрямую открыты для внешней сети. В этом случае рекомендуется использовать централизованный шлюз. |

5. Нажмите **Подтвердить**.

6. На странице деталей подсети выберите **Действия** > **Распределить проект** / **Пространство имен**.

7. Завершите настройку и нажмите **Распределить**.
