---
weight: 20
sourceSHA: d9fa9d4a7e322f8aaf21d78e414a380ec2cc494f423dd37417d4cf0ae22eb27f
---

:::info
Платформа теперь предоставляет два различных интерфейса для политик сетевой безопасности кластера. Старый интерфейс поддерживается по соображениям совместимости, в то время как новый более гибкий и предоставляет встроенный редактор YAML. Мы рекомендуем использовать новую версию.

Пожалуйста, свяжитесь с администратором платформы, чтобы включить функциональные возможности **cluster-network-policy** и **cluster-network-policy-next**, чтобы получить доступ к новому интерфейсу.
:::

# Настройка политик сетевой безопасности администратора

Новая политика сетевой безопасности кластера принимает стандартный дизайн политик сетевой безопасности администратора сообщества Kubernetes, предоставляя более гибкие методы конфигурации и богатые параметры конфигурации.

Когда применяется несколько политик сетевой безопасности, они следуют строгому порядку приоритета: Политика сетевой безопасности администратора имеет приоритет над Политикой сетевой безопасности, которая, в свою очередь, имеет приоритет над Базовой политикой сетевой безопасности администратора.

## Примечания

- Только Kube-OVN CNI поддерживает политики сетевой безопасности администратора.

- В сетевом режиме Kube-OVN эта функция находится на уровне зрелости Alpha.

- В кластере может существовать только одна Базовая политика сетевой безопасности администратора.

## Шаги

1. Перейдите в **Управление платформой**.

2. В левой навигационной панели нажмите **Сеть** > **Политики сетевой безопасности кластера**.

3. Нажмите **Создать политику сетевой безопасности администратора** или **Настроить базовую политику сетевой безопасности администратора**.

4. Следуйте приведенным ниже инструкциям, чтобы завершить соответствующую конфигурацию.

   <table>
     <thead>
       <tr>
         <th>Область</th>
         <th colSpan={2}>Параметр</th>
         <th>Описание</th>
       </tr>
     </thead>

     <tbody>
       <tr>
         <td rowSpan={2}>Основная информация</td>
         <td colSpan={2}>Имя</td>
         <td>Имя политики сетевой безопасности администратора или базовой политики сетевой безопасности администратора.</td>
       </tr>

       <tr>
         <td colSpan={2}>Приоритет</td>
         <td>Определяет порядок, в котором политики оцениваются и применяются. Более низкие числовые значения указывают на более высокий приоритет.
         <br /><b>Примечание:</b> Базовая политика сетевой безопасности администратора не имеет приоритета.</td>
       </tr>

       <tr>
         <td rowSpan={4}>Целевой Pod</td>
         <td colSpan={2}>Выбор пространства имен</td>
         <td>Введите метки целевых пространств имен в формате ключ-значение. Если не указано, политика будет применяться ко всем пространствам имен в текущем кластере. При указании политика будет применяться только к Pod'ам в пространствах имен, соответствующих этим селекторам.</td>
       </tr>

       <tr>
         <td colSpan={2}>Предварительный просмотр целевых Pod'ов, затронутых текущей политикой</td>
         <td>Нажмите <b>Предварительный просмотр</b>, чтобы увидеть целевые Pod'ы, затронутые этой политикой сетевой безопасности.</td>
       </tr>

       <tr>
         <td colSpan={2}>Выбор Pod'ов</td>
         <td>Введите метки целевых Pod'ов в формате ключ-значение. Если не указано, политика будет применяться ко всем Pod'ам в текущем пространстве имен.</td>
       </tr>

       <tr>
         <td colSpan={2}>Предварительный просмотр целевых Pod'ов, затронутых текущей политикой</td>
         <td>Нажмите <b>Предварительный просмотр</b>, чтобы увидеть целевые Pod'ы, затронутые этой политикой сетевой безопасности.</td>
       </tr>

       <tr>
         <td rowSpan={4}>Ingress</td>
         <td colSpan={2}>Действие с трафиком</td>
         <td>Указывает, как обрабатывать входящий трафик к целевым Pod'ам. Имеет три режима: <b>Разрешить</b> (разрешает трафик), <b>Запретить</b> (блокирует трафик) и <b>Пропустить</b> (пропускает все политики сетевой безопасности администратора более низкого приоритета, позволяя трафику обрабатываться Политикой сетевой безопасности, или, если Политики сетевой безопасности не существует, Базовой политикой сетевой безопасности администратора).
         <br /><b>Примечание:</b> Базовая политика сетевой безопасности администратора не имеет действия <b>Пропустить</b>.</td>
       </tr>

       <tr>
         <td rowSpan={2}>Правило<br /><br /><b>Описание</b>: Если в правиле добавлено несколько источников, между ними существует логическое <b>ИЛИ</b>.</td>
         <td>Выбор Pod'ов</td>
         <td>Сопоставляет пространства имен или Pod'ы с указанными метками в кластере; только соответствующие Pod'ы могут получить доступ к целевому Pod'у. Вы можете нажать <b>Предварительный просмотр</b>, чтобы увидеть Pod'ы, затронутые текущим правилом. <ul><li>Если настроены как выбор пространства имен, так и выбор Pod'ов, будет взято их пересечение, что означает, что Pod'ы с указанными метками будут выбраны из указанных пространств имен.</li><li>Если этот пункт не настроен, все Pod'ы во всех пространствах имен в кластере могут получить доступ к целевому Pod'у по умолчанию.</li></ul></td>
       </tr>

       <tr>
         <td>Выбор пространства имен</td>
         <td>Сопоставляет Pod'ы с указанными метками в текущем пространстве имен; только соответствующие Pod'ы могут получить доступ к целевому Pod'у. Вы можете нажать <b>Предварительный просмотр</b>, чтобы увидеть Pod'ы, затронутые текущим правилом. Если этот пункт не настроен, все Pod'ы в текущем пространстве имен могут получить доступ к целевому Pod'у по умолчанию.</td>
       </tr>

       <tr>
         <td colSpan={2}>Порты</td>
         <td>Сопоставляет трафик по указанным протоколам и портам; вы можете добавить числовые порты или имена портов на Pod'ах. Если этот пункт не настроен, будут сопоставлены все порты.</td>
       </tr>

       <tr>
         <td rowSpan={4}>Egress</td>
         <td rowSpan={3}>Правило<br /><br /><b>Описание</b>: Если в правиле добавлено несколько источников, между ними существует логическое <b>ИЛИ</b>.</td>
         <td>Выбор узла</td>
         <td>Указывает, какие IP-адреса узлов разрешены для доступа целевым Pod'ам. Вы можете выбрать узлы по их меткам, чтобы контролировать, какие IP-адреса узлов доступны из Pod'ов.</td>
       </tr>

       <tr>
         <td>Диапазон IP</td>
         <td>Укажите диапазоны CIDR, к которым разрешено подключение целевым Pod'ам. Если этот пункт не настроен, целевые Pod'ы могут подключаться к любому IP по умолчанию.</td>
       </tr>

       <tr>
         <td>Другие параметры</td>
         <td>Похожие на параметры Ingress, с теми же параметрами конфигурации и поведением.</td>
       </tr>
     </tbody>
   </table>

## Справка

Если вы хотите получить больше информации, ознакомьтесь с официальной документацией по [Политикам сетевой безопасности администратора](https://network-policy-api.sigs.k8s.io/api-overview/).
