---
sourceSHA: 0fd95abec74b2e7d083b18f261792dc0dac34ab1ce5783b902391645ff20a738
---

# Режимы доступа и режимы томов

В Kubernetes PersistentVolumeClaims (PVC) и StorageClasses работают вместе для управления тем, как хранилище выделяется и к нему получают доступ рабочие нагрузки. Два основных понятия в этой области — это **Режимы доступа** и **Режимы томов**. Эта статья исследует эти концепции и подчеркивает, как различные системы хранения их поддерживают.

## Режимы доступа в Kubernetes

Режимы доступа определяют, как том может быть смонтирован и использован подами. Ключевые режимы доступа:

- **ReadWriteOnce (RWO)**: Том может быть смонтирован в режиме чтения-записи только одним узлом.
- **ReadOnlyMany (ROX)**: Том может быть смонтирован в режиме только для чтения несколькими узлами.
- **ReadWriteMany (RWX)**: Том может быть смонтирован в режиме чтения-записи несколькими узлами.

### Режимы доступа по классу хранения

| Класс хранения            | Поддерживается RWO | Поддерживается ROX | Поддерживается RWX |
| ------------------------- | ------------------- | ------------------- | ------------------- |
| **CephFS File Storage**   | Да                  | Нет                 | Да                  |
| **CephRBD Block Storage** | Да                  | Нет                 | Нет                 |
| **TopoLVM**               | Да                  | Нет                 | Нет                 |
| **NFS Shared Storage**    | Да                  | Нет                 | Да                  |

Как показано выше, файловые системы на базе хранения, такие как **CephFS** и **NFS**, поддерживают несколько одновременных операций записи или чтения, что делает их подходящими для сценариев совместного доступа. С другой стороны, блочные системы хранения, такие как **CephRBD** и **TopoLVM**, обеспечивают эксклюзивный доступ только к одному узлу в одно время.

## Режимы томов в Kubernetes

Режимы томов определяют, как данные представлены поду:

- **Файловая система**: Том смонтирован в под как файловая система.
- **Блок**: Том представлен как необработанное блоковое устройство.

### Режимы томов по классу хранения

| Класс хранения            | Тип               | Поддерживаемые режимы томов |
| ------------------------- | ----------------- | ---------------------------- |
| **CephFS File Storage**   | Файловое хранилище| Файловая система             |
| **CephRBD Block Storage** | Блочное хранилище | Файловая система, Блок      |
| **TopoLVM**               | Блочное хранилище | Файловая система, Блок      |
| **NFS Shared Storage**    | Файловое хранилище| Файловая система             |

Блочные системы хранения, такие как **CephRBD** и **TopoLVM**, предлагают как доступ к файловой системе, так и необработанным блокам, обеспечивая гибкость для различных потребностей приложений. Файловые системы хранения, такие как **CephFS** и **NFS**, в свою очередь, поддерживают только режим файловой системы.

## Функции хранения: Снимки и расширение

Kubernetes также поддерживает расширенные функции, такие как снимки томов и динамическое расширение PVC, в зависимости от используемого класса хранения.

| Класс хранения            | Снимок тома      | Расширение       |
| ------------------------- | ----------------- | ---------------- |
| **CephFS File Storage**   | Поддерживается    | Поддерживается   |
| **CephRBD Block Storage** | Поддерживается    | Поддерживается   |
| **TopoLVM**               | Поддерживается    | Поддерживается   |
| **NFS Shared Storage**    | Не поддерживается | Не поддерживается |

Только динамически выделенные PVC, использующие классы хранения, поддерживают снимки томов. Эта функция полезна для резервного копирования и клонирования сред.

## Заключение

При конфигурировании хранилища в Kubernetes понимание **Режимов доступа** и **Режимов томов** PVC и поддерживающих их **StorageClasses** критически важно для выбора правильного решения для вашей рабочей нагрузки. Файловые решения хранения, такие как CephFS и NFS, идеально подходят для сценариев совместного доступа, в то время как блочное хранилище, такое как CephRBD и TopoLVM, превосходно подходит для высокопроизводительных развертываний с одним узлом. Более того, поддержка таких функций, как снимки и расширение, может значительно повысить гибкость хранения и стратегии управления данными.
