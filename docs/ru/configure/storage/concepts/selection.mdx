---
sourceSHA: 0fd95abec74b2e7d083b18f261792dc0dac34ab1ce5783b902391645ff20a738
---

# Режимы доступа и режимы томов

В Kubernetes PersistentVolumeClaims (PVC) и StorageClasses работают вместе для управления тем, как хранилище выделяется и используется рабочими нагрузками. Две важные концепции в этой области - это **Режимы доступа** и **Режимы томов**. Эта статья рассматривает эти концепции и подчеркивает, как различные системы хранения поддерживают их.

## Режимы доступа в Kubernetes

Режимы доступа определяют, как том может быть смонтирован и использован подами. Основные режимы доступа:

- **ReadWriteOnce (RWO)**: Том может быть смонтирован как доступный для чтения и записи только одним узлом.
- **ReadOnlyMany (ROX)**: Том может быть смонтирован как доступный только для чтения несколькими узлами.
- **ReadWriteMany (RWX)**: Том может быть смонтирован как доступный для чтения и записи несколькими узлами.

### Режимы доступа в зависимости от класса хранения

| Класс хранения            | Поддержка RWO | Поддержка ROX | Поддержка RWX |
| ------------------------- | ------------- | ------------- | ------------- |
| **Хранилище файлов CephFS** | Да            | Нет          | Да            |
| **Блочное хранилище CephRBD** | Да            | Нет          | Нет           |
| **TopoLVM**               | Да            | Нет          | Нет           |
| **Общее хранилище NFS**   | Да            | Нет          | Да            |

Как показано выше, файловые системы, такие как **CephFS** и **NFS**, поддерживают множество одновременных операций записи или чтения, что делает их подходящими для сценариев совместного доступа. С другой стороны, блочные системы хранения, такие как **CephRBD** и **TopoLVM**, предоставляют эксклюзивный доступ к одному узлу за раз.

## Режимы томов в Kubernetes

Режимы томов определяют, как данные представлены поду:

- **Файловая система**: Том смонтирован в под как файловая система.
- **Блок**: Том представлен как необработанное блочное устройство.

### Режимы томов в зависимости от класса хранения

| Класс хранения            | Тип            | Поддерживаемые режимы томов |
| ------------------------- | ------------- | --------------------------- |
| **Хранилище файлов CephFS** | Файловое хранилище | Файловая система             |
| **Блочное хранилище CephRBD** | Блочное хранилище | Файловая система, Блок      |
| **TopoLVM**               | Блочное хранилище | Файловая система, Блок      |
| **Общее хранилище NFS**   | Файловое хранилище | Файловая система             |

Блочные системы хранения, такие как **CephRBD** и **TopoLVM**, предлагают как файловый, так и необработанный блочный доступ, что обеспечивает гибкость для различных нужд приложений. В то время как файловые системы, такие как **CephFS** и **NFS**, в свою очередь, поддерживают только режим файловой системы.

## Особенности хранения: Снимки и расширение

Kubernetes также поддерживает расширенные функции, такие как снимки томов и динамическое расширение PVC, в зависимости от используемого класса хранения.

| Класс хранения            | Снимок тома  | Расширение   |
| ------------------------- | ------------- | ------------ |
| **Хранилище файлов CephFS** | Поддерживается | Поддерживается |
| **Блочное хранилище CephRBD** | Поддерживается | Поддерживается |
| **TopoLVM**               | Поддерживается | Поддерживается |
| **Общее хранилище NFS**   | Не поддерживается | Не поддерживается |

Только динамически выделенные PVC с использованием класса хранения поддерживают снимки томов. Эта функция полезна для резервного копирования и клонирования окружений.

## Заключение

При конфигурировании хранилища в Kubernetes понимание **Режимов доступа** и **Режимов томов** PVC и их поддерживающих **StorageClasses** критически важно для выбора правильного решения для вашей рабочей нагрузки. Файловые решения, такие как CephFS и NFS, идеально подходят для сценариев совместного доступа, в то время как блочное хранилище, такое как CephRBD и TopoLVM, превосходно показывает себя в высокопроизводительных развертываниях на одном узле. Более того, поддержка таких функций, как снимки и расширение, может существенно повысить гибкость хранения и стратегии управления данными.
