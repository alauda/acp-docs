---
weight: 15
sourceSHA: cf7c5933a8c205935aa5b48ead4a04f984681d767d362a87f237c01c1380bb0d
---

# Создание класса локального хранилища TopoLVM

TopoLVM — это решение локального хранилища на основе LVM, которое предоставляет простые, легкие в обслуживании и высокопроизводительные услуги локального хранилища, подходящие для таких сценариев, как базы данных и промежуточное ПО. Перед его использованием необходимо создать класс хранилища TopoLVM.

После того как запрос постоянного объема (PVC) будет связан с классом хранилища, платформа динамически создает постоянные объемы на узлах на основе запроса постоянного объема для использования бизнес-приложениями.

## Информация о пред背景

### Преимущества использования

- По сравнению с удаленным хранилищем (например, **NFS совместное хранилище**): хранилище типа TopoLVM расположено локально на узле, обеспечивая лучшую производительность IOPS и пропускной способности, а также меньшую задержку.

- По сравнению с hostPath (например, **local-path**): хотя оба являются локальным хранищем на узле, TopoLVM позволяет гибко планировать контейнерные группы на узлы с достаточными доступными ресурсами, избегая проблем, когда контейнерные группы не могут запускаться из-за нехватки ресурсов.

- TopoLVM по умолчанию поддерживает автоматическое расширение объемов. После изменения необходимой квоты хранилища в запросе постоянного объема расширение может быть выполнено автоматически без перезагрузки контейнерной группы.

### Сценарии использования

- Когда необходимо только временное хранилище, например, для разработки и отладки.

- Когда есть высокие требования к I/O хранилища, например, для индексации в реальном времени.

### Ограничения и ограничения

Пожалуйста, старайтесь использовать локальное хранилище только для приложений, в которых может быть реализовано реплицирование данных и резервное копирование на уровне приложения, например, MySQL. Избегайте потери данных из-за отсутствия гарантии постоянства данных от локального хранилища.

[Узнать больше](https://github.com/topolvm/topolvm/blob/main/docs/user-manual.md)

## Установка плагина объема

После нажатия кнопки развертывания на открывшейся странице [настроить локальное хранилище](/storage/storagesystem_topolvm/installation.mdx).

## Создание класса хранилища

1. Перейдите в **Управление платформой**.

2. В левой панели навигации нажмите **Управление хранилищем** > **Классы хранилища**.

3. Нажмите **Создать класс хранилища**.

4. Выберите **TopoLVM**, затем нажмите **Далее**.

5. Настройте параметры класса хранилища, как описано ниже.

   **Примечание**: Следующее содержание представлено в виде примера формы; вы также можете выбрать его создание с использованием YAML.

   | Параметр              | Описание                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
   | ---------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
   | **Имя**               | Имя класса хранилища, которое должно быть уникальным в текущем кластере.                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
   | **Отображаемое имя**   | Имя, которое может помочь вам идентифицировать или фильтровать его, например, китайское описание класса хранилища.                                                                                                                                                                                                                                                                                                                                                                                                                                            |
   | **Класс устройства**   | Класс устройства - это способ категоризации устройств хранения в TopoLVM, при этом каждый класс устройства соответствует группе устройств хранения с аналогичными характеристиками. Если специальных требований нет, используйте класс устройства **Автоматически назначенный**.                                                                                                                                                                                                                                               |
   | **Файловая система**   | <ul><li>**XFS** - это высокопроизводительная журналируемая файловая система, хорошо подходящая для обработки параллельных I/O нагрузок, поддерживающая работу с большими файлами и плавный перенос данных.</li><li>**EXT4** - это журналируемая файловая система в Linux, которая обеспечивает хранение файлов с использованием экстентов и поддерживает работу с большими файлами, с максимальной емкостью файловой системы 1 EiB и максимальным размером файла 16 TiB.</li></ul>                                                                                                                                                  |
   | **Политика рекламации**| Политика рекламации для постоянных объемов.<br /><ul><li>Удалить: Связанный постоянный объем будет так же удален вместе с PVC.</li><li>Сохранить: Связанный постоянный объем останется даже после удаления PVC.</li></ul>                                                                                                                                                                                                                                                                                                         |
   | **Режим доступа**      | ReadWriteOnce (RWO): может быть смонтирован в режиме чтения и записи одним узлом.                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
   | **Реконструкция PVC**  | Поддерживает реконструкцию PVC между узлами. При включении необходимо настроить **Время ожидания реконструкции**. Когда узел, на котором расположен PVC, созданный с использованием этого класса хранилища, выходит из строя, PVC будет автоматически восстановлен на других узлах после времени ожидания для обеспечения непрерывности бизнеса.<br />**Примечание**:<br /><ul><li>Восстановленный PVC не содержит оригинальных данных.</li><li>Пожалуйста, убедитесь, что количество узлов хранения превышает количество реплик экземпляров приложения, иначе это повлияет на реконструкцию PVC.</li></ul> |
   | **Выделенные проекты** | Запросы постоянного объема этого типа могут быть созданы только в определенных проектах.<br />Если проект в настоящее время не выделен, проект можно также **обновить позже**.                                                                                                                                                                                                                                                                                                                                                                          |

6. После подтверждения правильности конфигурационной информации нажмите кнопку **Создать**.

## Последующие действия

Когда все будет готово, вы можете уведомить разработчиков о том, чтобы они использовали функции TopoLVM. Например, создайте запрос постоянного объема и свяжите его с классом хранилища TopoLVM на странице **Хранилище** > **Запросы постоянных объемов** контейнерной платформы.
