---
weight: 15
sourceSHA: cf7c5933a8c205935aa5b48ead4a04f984681d767d362a87f237c01c1380bb0d
---

# Создание класса локального хранилища TopoLVM

TopoLVM — это локальное хранилище на основе LVM, которое предлагает простые, легкие в обслуживании и высокопроизводительные услуги локального хранения, подходящие для сценариев, таких как базы данных и промежуточное ПО. Перед его использованием необходимо создать класс хранилища TopoLVM.

После того, как Запрос Персистентного Объема (PVC) будет связан с классом хранилища, платформой динамически создаются персистентные объемы на узлах на основе Запроса Персистентного Объема для использования бизнес-приложениями.

## Фоновая информация

### Преимущества использования

- По сравнению с удаленным хранилищем (например, **NFS-совместимое хранилище**): Хранилище типа TopoLVM расположено локально на узле, обеспечивая лучшие показатели IOPS и пропускной способности, а также более низкую задержку.

- По сравнению с hostPath (например, **local-path**): Хотя оба являются локальным хранилищем на узле, TopoLVM позволяет гибкое распределение групп контейнеров по узлам с достаточными доступными ресурсами, избегая проблем, когда группы контейнеров не могут запуститься из-за нехватки ресурсов.

- TopoLVM поддерживает автоматическое расширение объемов по умолчанию. После изменения необходимого квоты на хранение в Запросе Персистентного Объема, расширение может быть выполнено автоматически без перезапуска группы контейнеров.

### Сценарии использования

- Когда требуется лишь временное хранилище, например, для разработки и отладки.

- Когда существуют высокие требования к I/O хранению, например, для индексирования в реальном времени.

### Ограничения и недостатки

Пожалуйста, старайтесь использовать локальное хранилище только для приложений, где может быть реализована репликация и резервное копирование данных на уровне приложения, таких как MySQL. Избегайте потерь данных из-за отсутствия гарантии устойчивости данных от локального хранилища.

[Узнать больше](https://github.com/topolvm/topolvm/blob/main/docs/user-manual.md)

## Установка плагина для объема

После нажатия на развернуть, на открывшейся странице [настройте локальное хранилище](/storage/storagesystem_topolvm/installation.mdx).

## Создание класса хранилища

1. Перейдите в **Управление платформой**.

2. В левой навигационной панели нажмите **Управление хранилищем** > **Классы хранилищ**.

3. Нажмите **Создать класс хранилища**.

4. Выберите **TopoLVM**, затем нажмите **Далее**.

5. Настройте параметры класса хранилища, как указано ниже.

   **Примечание**: Следующее содержание представлено в виде примера формы; вы также можете выбрать создание с помощью YAML.

   | Параметр              | Описание                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
   | ---------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
   | **Имя**               | Имя класса хранилища, которое должно быть уникальным в текущем кластере.                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
   | **Отображаемое имя**   | Имя, которое может помочь вам идентифицировать или фильтровать его, например, описание класса хранилища на китайском языке.                                                                                                                                                                                                                                                                                                                                                                                                                                            |
   | **Класс устройства**   | Класс устройства — это способ категоризации устройств хранения в TopoLVM, при этом каждый класс устройства соответствует группе устройств хранения с похожими характеристиками. Если нет специальных требований, используйте класс устройства **Автоматически назначенный**.                                                                                                                                                                                                                                                                                    |
   | **Файловая система**    | <ul><li>**XFS** — это высокопроизводительная журналируемая файловая система, хорошо подходящая для обработки параллельных I/O-выгрузок, поддерживающая работу с большими файлами и плавную передачу данных.</li><li>**EXT4** — это журналируемая файловая система под управлением Linux, которая предоставляет хранилище расширенных файлов и поддерживает работу с большими файлами, с максимальной емкостью файловой системы 1 EiB и максимальным размером файла 16 TiB.</li></ul>                                                                                                                                                  |
   | **Политика рекламации** | Политика рекламации для персистентных объемов.<br /><ul><li>Удалить: Связанный персистентный объем будет также удален вместе с PVC.</li><li>Сохранить: Связанный персистентный объем останется даже если PVC будет удален.</li></ul>                                                                                                                                                                                                                                                                                                         |
   | **Режим доступа**      | ReadWriteOnce (RWO): Может быть смонтирован как доступный для записи и чтения только одним узлом.                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
   | **Реконструкция PVC**  | Поддерживает реконструкцию PVC между узлами. При включении должно быть настроено **Время ожидания реконструкции**. Когда узел, на котором размещен PVC созданный с помощью этого класса хранилища, выходит из строя, PVC будет автоматически восстановлен на других узлах после времени ожидания для обеспечения непрерывности бизнеса.<br />**Примечание**:<br /><ul><li>Восстановленный PVC не содержит оригинальных данных.</li><li>Пожалуйста, убедитесь, что количество узлов хранения больше количества реплик экземпляров приложения, иначе это повлияет на реконструкцию PVC.</li></ul> |
   | **Назначенные проекты** | Персистентные объемные запросы этого типа могут быть созданы только в определенных проектах.<br />Если в настоящее время не назначен проект, проект также может быть **обновлен позже**.                                                                                                                                                                                                                                                                                                                                                                          |

6. После подтверждения правильности конфигурационной информации нажмите кнопку **Создать**.

## Дальнейшие действия

Как только все будет готово, вы можете уведомить разработчиков о том, чтобы они использовали функции TopoLVM. Например, создайте запрос на персистентный объем и свяжите его с классом хранения TopoLVM на странице **Хранилище** > **Запросы персистентного объема** контейнерной платформы.
