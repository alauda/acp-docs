---
weight: 50
sourceSHA: 189f4a78029cd100c524ef22b11c1c78c9acfef9327ef0df86d5e29c5f375160
---

# Создание постоянного тома (PV)

Вручную создайте статический постоянный том типа **HostPath** или **NFS Shared Storage**.

- **HostPath**: Подключает файловый каталог с хоста, на котором размещен контейнер, к указанному пути в контейнере (соответствующему HostPath в Kubernetes), позволяя контейнеру использовать файловую систему хоста для постоянного хранения данных. Если хост становится недоступным, HostPath может стать недоступным.

- **NFS Shared Storage**: NFS Shared Storage использует плагин хранения NFS CSI (Container Storage Interface) сообщества, который более соответствует принципам проектирования Kubernetes, предоставляя клиентский доступ для нескольких сервисов. Убедитесь, что в текущем кластере развернут **NFS storage plugin** перед использованием.

## Предварительные требования

- Подтвердите размер постоянного тома, чтобы быть созданным, и убедитесь, что система бэкенда в настоящее время имеет возможность предоставить соответствующее хранилище.

- Получите адрес доступа к хранилищу бэкенда, путь к файлу для монтирования, учетные данные доступа (если требуется) и другую соответствующую информацию.

## Шаги

1. Перейдите в **Управление платформой**.

2. В левой навигационной панели нажмите на **Управление хранилищем** > **Постоянные тома (PV)**.

3. Нажмите на **Создать постоянный том**.

4. Ознакомьтесь с приведенными ниже инструкциями и настройте параметры перед нажатием **Создать**.

### Информация о хранилище

<table>
  <thead>
    <tr>
      <th>Тип</th>
      <th>Параметр</th>
      <th>Описание</th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>HostPath</td>
      <td>Путь</td>
      <td>Путь к каталогу файлов на узле, поддерживающем том хранения. Например: <code>/etc/kubernetes</code>.</td>
    </tr>

    <tr>
      <td rowSpan={3}>NFS Shared Storage</td>
      <td>Адрес сервера</td>
      <td>Адрес доступа к NFS-серверу.</td>
    </tr>

    <tr>
      <td>Путь</td>
      <td>Путь монтирования файловой системы NFS на узле сервера, например <code>/nfs/data</code>.</td>
    </tr>

    <tr>
      <td>Версия протокола NFS</td>
      <td>В настоящее время поддерживаемые версии протокола NFS на платформе: <code>v3</code>, <code>v4.0</code> и <code>v4.1</code>. Вы можете выполнить <code>nfsstat -s</code> на стороне сервера, чтобы просмотреть информацию о версиях.</td>
    </tr>
  </tbody>
</table>

### Режимы доступа

Режимы доступа к постоянному тому зависят от соответствующих параметров, установленных системой хранения бэкенда.

| Режим доступа            | Значение                                       |
| ----------------------- | ----------------------------------------------- |
| **ReadWriteOnce (RWO)** | Может быть смонтирован в режиме чтения и записи только одним узлом.  |
| **ReadWriteMany (RWX)** | Может быть смонтирован в режиме чтения и записи несколькими узлами. |
| **ReadOnlyMany (ROX)**  | Может быть смонтирован в режиме только для чтения несколькими узлами.  |

### Политики возврата

| Политика возврата | Значение                                                                                                                                                                                                                                     |
| -------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **Delete**     | Удаляет запрос на постоянный том одновременно с удалением связанного постоянного тома, а также ресурса тома хранения бэкенда. <br />**Примечание**: Политика возврата для PV типа NFS Shared Storage не поддерживает **Delete**. |
| **Retain**     | Даже если запрос на постоянный том удален, связанный постоянный том и данные хранения все еще будут сохранены. В дальнейшем потребуется вручную обработать данные хранения и удалить постоянный том.               |

## Связанные операции

Вы можете щелкнуть ⋮ справа на странице списка или нажать на **Операции** в правом верхнем углу страницы с деталями, чтобы обновить или удалить постоянный том по мере необходимости.

Удаление постоянного тома применимо в следующих двух случаях:

- Удаление не подключенного постоянного тома: Том был не записан и больше не требуется для записи, таким образом, освобождается соответствующее место хранения после удаления.

- Удаление **Сохраненного** постоянного тома: Запрос на постоянный том был удален, но из-за политики сохранения он не был удален одновременно. Если данные в постоянном томе были сохранены на другом хранилище или больше не нужны, удаление его также может освободить соответствующее место хранения.
