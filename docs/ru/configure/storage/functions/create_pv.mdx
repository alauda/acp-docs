---
weight: 50
sourceSHA: 189f4a78029cd100c524ef22b11c1c78c9acfef9327ef0df86d5e29c5f375160
---

# Создание PV

Вручную создайте статический постоянный том типа **HostPath** или **NFS Shared Storage**.

- **HostPath**: Монтирует файловый каталог с хоста, на котором находится контейнер, в указанном пути в контейнере (соответствует HostPath в Kubernetes), позволяя контейнеру использовать файловую систему хоста для постоянного хранения. Если хост становится недоступным, HostPath может быть недоступен.

- **NFS Shared Storage**: NFS Shared Storage использует плагин хранения NFS CSI (Container Storage Interface) от сообщества, который более точно соответствует принципам проектирования Kubernetes, предоставляя возможности доступа клиентам для нескольких сервисов. Убедитесь, что текущий кластер развернул **плагин хранения NFS** перед использованием.

## Предварительные требования

- Подтвердите размер создаваемого постоянного тома и убедитесь, что бэкэнд-система хранения в настоящее время имеет возможность предоставить соответствующее хранилище.

- Получите адрес доступа к бэкэнд-хранилищу, путь к файлу, который нужно смонтировать, учетные данные доступа (если требуется) и другую соответствующую информацию.

## Шаги

1. Перейдите в **Управление платформой**.

2. В левой навигационной панели нажмите **Управление хранилищем** > **Постоянные тома (PV)**.

3. Нажмите **Создать постоянный том**.

4. Ознакомьтесь с инструкциями ниже и настройте параметры перед нажатием **Создать**.

### Информация о хранилище

<table>
  <thead>
    <tr>
      <th>Тип</th>
      <th>Параметр</th>
      <th>Описание</th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>HostPath</td>
      <td>Путь</td>
      <td>Путь к каталогу файлов на узле, поддерживающем том хранения. Например: <code>/etc/kubernetes</code>.</td>
    </tr>

    <tr>
      <td rowSpan={3}>NFS Shared Storage</td>
      <td>Адрес сервера</td>
      <td>Адрес доступа к NFS-серверу.</td>
    </tr>

    <tr>
      <td>Путь</td>
      <td>Путь монтирования файловой системы NFS на узле сервера, например <code>/nfs/data</code>.</td>
    </tr>

    <tr>
      <td>Версия протокола NFS</td>
      <td>В настоящее время поддерживаемые версии протокола NFS на платформе: <code>v3</code>, <code>v4.0</code> и <code>v4.1</code>. Вы можете выполнить <code>nfsstat -s</code> на стороне сервера, чтобы просмотреть информацию о версиях.</td>
    </tr>
  </tbody>
</table>

### Режимы доступа

Режимы доступа постоянного тома зависят от соответствующих параметров, установленных бэкэнд-хранилищем.

| Режим доступа             | Значение                                         |
| ------------------------- | ----------------------------------------------- |
| **ReadWriteOnce (RWO)**  | Может быть смонтирован в режиме чтения и записи только одним узлом.  |
| **ReadWriteMany (RWX)**  | Может быть смонтирован в режиме чтения и записи несколькими узлами. |
| **ReadOnlyMany (ROX)**   | Может быть смонтирован в режиме только для чтения несколькими узлами.  |

### Политики восстановления

| Политика восстановления | Значение                                                                                                                                                                                                                                     |
| ----------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **Delete**              | Удаляет запрос постоянного тома одновременно с удалением связанного постоянного тома, а также ресурса тома бэкэнд-хранилища. <br />**Примечание**: Политика восстановления для PV типа NFS Shared Storage не поддерживает **Delete**. |
| **Retain**              | Даже когда запрос постоянного тома удален, связанный постоянный том и данные хранилища все еще будут сохранены. В дальнейшем потребуется ручное управление данными хранилища и удаление постоянного тома.                                   |

## Связанные операции

Вы можете нажать ⋮ справа на странице списка или нажать **Операции** в правом верхнем углу страницы деталей, чтобы обновить или удалить постоянный том по мере необходимости.

Удаление постоянного тома применимо в следующих двух сценариях:

- Удаление не связанного постоянного тома: Не был записан и больше не требуется для записи, тем самым освобождая соответствующее пространство хранения при удалении.

- Удаление **Сохраненного** постоянного тома: Запрос постоянного тома был удален, но из-за политики сохранения он не был удален одновременно. Если данные в постоянном томе были сохранены в другом хранилище или больше не нужны, его удаление также может освободить соответствующее пространство хранения.
