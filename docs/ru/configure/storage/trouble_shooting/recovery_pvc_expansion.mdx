---
sourceSHA: 30540f3e9ef256ffb4675b45e709f8967a89884864eee6b0617c612ede36755d
---

# Восстановление после сбоя расширения PVC

Когда расширение PVC терпит неудачу в Kubernetes, администраторы могут вручную восстановить состояние Запрашиваемого Постоянного Хранилища (PVC) и отменить запрос на расширение.

### Процедура

1. Измените политику восстановления Привязанного Постоянного Хранилища (PV), связанного с PVC, на `Retain`. Для этого отредактируйте соответствующий PV и установите поле `persistentVolumeReclaimPolicy` в `Retain`.

2. Удалите исходный PVC.

3. Вручную отредактируйте PV, чтобы удалить запись `claimRef` из его спецификаций. Это гарантирует, что новый PVC сможет связаться с этим PV, изменив статус PV на `Available`.

4. Воссоздайте новый PVC с меньшим размером или размером, поддерживаемым используемым хранилищем.

5. Явно укажите поле `volumeName` в новом PVC, чтобы оно соответствовало имени исходного PV. Это гарантирует, что новый PVC точно свяжется с указанным PV.

6. Наконец, восстановите исходную политику восстановления PV.

### Дополнительные советы

- Убедитесь, что используемый `StorageClass` имеет разрешение на расширение томов, установив `allowVolumeExpansion` в `true`.
- Выполняйте эти действия осторожно, чтобы избежать риска потери данных.
