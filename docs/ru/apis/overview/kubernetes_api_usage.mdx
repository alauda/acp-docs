---
weight: 20
sourceSHA: 9f09b730fc77d5c9480c0beb5b3dbf9a0d31674ad902c058941e7bf1d1f88088
---

# Руководство по использованию API Kubernetes

## Дизайн документации

В документации по API Kubernetes <Term name="productShort" /> мы выбрали целенаправленный подход, сосредоточив внимание на определениях схем ресурсов, а не на перечислении конкретных путей API, параметров и методов запросов для каждого ресурса. Этот выбор дизайна основан на следующих соображениях:

1. **Согласованность**: Все ресурсы API Kubernetes следуют одному и тому же шаблону RESTful API, что делает избыточным повторение одних и тех же паттернов вызовов для каждого ресурса.

2. **Читаемость**: Документирование всех деталей API для каждого ресурса приведет к длинной, повторяющейся документации, с которой будет сложнее ориентироваться и усваивать.

3. **Сосредоточение на важном**: Для большинства пользователей понимание схемы ресурса (какие поля доступны и что они означают) важнее, чем механика вызовов API по HTTP.

4. **Совместимость с инструментами**: Большинство пользователей взаимодействуют с этими API через клиенты Kubernetes (kubectl, client-go и др.), а не через прямые HTTP-вызовы, что делает детали HTTP менее актуальными для повседневных операций.

Хотя наша документация по [API Kubernetes](../kubernetes_apis/) сосредоточена на определениях схем ресурсов, это руководство дополняет ее, объясняя общие паттерны использования и конвенции вызова для API Kubernetes. Здесь вы узнаете, как структурировать API-запросы, понимать общие методы HTTP и видеть стандартные URL-пути для различных операций - информация, которая применяется ко всем ресурсам Kubernetes.

## Стандартные паттерны вызова API Kubernetes

::: tip
Этот раздел предоставляет лишь базовое введение в паттерны использования API Kubernetes. Для более подробного и детального объяснения API Kubernetes, пожалуйста, обратитесь к [официальной документации по концепциям API Kubernetes](https://kubernetes.io/docs/reference/using-api/api-concepts/).
:::

Все ресурсы API Kubernetes поддерживают стандартный набор операций, которые следуют RESTful-конвенциям. Ниже представлены общие паттерны вызова API, которые применимы ко всем ресурсам, перечисленным в нашей документации по API Kubernetes:

### Коллекции ресурсов

Для коллекций ресурсов (например, Pods, Deployments и т. д.):

| Операция                          | Метод HTTP | Путь                                                         | Описание                                                                         |
| --------------------------------- | ----------- | ----------------------------------------------------------- | ----------------------------------------------------------------------------------- |
| Получить все ресурсы               | GET         | `/apis/{group}/{version}/namespaces/{namespace}/{resource}` | Возвращает список ресурсов в указанном пространстве имен                          |
| Получить все ресурсы (глобально)   | GET         | `/apis/{group}/{version}/{resource}`                        | Возвращает список ресурсов по всем пространствам имен (для ресурсов, поддерживающих это) |
| Создать ресурс                    | POST        | `/apis/{group}/{version}/namespaces/{namespace}/{resource}` | Создает новый ресурс в указанном пространстве имен                               |
| Создать ресурс (глобально)        | POST        | `/apis/{group}/{version}/{resource}`                        | Создает новый ресурс, охватывающий кластеры (для ресурсов, поддерживающих это)      |

### Индивидуальные ресурсы

Для отдельных экземпляров ресурсов:

| Операция                         | Метод HTTP | Путь                                                                | Описание                                                              |
| -------------------------------- | ----------- | ------------------------------------------------------------------- | ------------------------------------------------------------------------ |
| Получить ресурс                   | GET         | `/apis/{group}/{version}/namespaces/{namespace}/{resource}/{name}`  | Возвращает данные конкретного ресурса                                   |
| Получить ресурс (глобально)       | GET         | `/apis/{group}/{version}/{resource}/{name}`                         | Возвращает данные конкретного ресурса, охватывающего кластер           |
| Обновить ресурс                  | PUT         | `/apis/{group}/{version}/namespaces/{namespace}/{resource}/{name}`  | Заменяет весь ресурс предоставленным определением                        |
| Обновить ресурс (глобально)       | PUT         | `/apis/{group}/{version}/{resource}/{name}`                         | Заменяет весь ресурс кластерного уровня предоставленным определением     |
| Обновить ресурс (частично)      | PATCH       | `/apis/{group}/{version}/namespaces/{namespace}/{resource}/{name}`  | Обновляет определенные поля ресурса                                    |
| Обновить ресурс (частично, глобально) | PATCH       | `/apis/{group}/{version}/{resource}/{name}`                         | Обновляет определенные поля ресурса, охватывающего кластер               |
| Удалить ресурс                   | DELETE      | `/apis/{group}/{version}/namespaces/{namespace}/{resource}/{name}`  | Удаляет указанный ресурс                                               |
| Удалить ресурс (глобально)        | DELETE      | `/apis/{group}/{version}/{resource}/{name}`                         | Удаляет указанный ресурс, охватывающий кластер                          |

### Основная группа API

Для ресурсов в основной группе API (v1) пути немного отличаются:

| Операция          | Метод HTTP | Путь                                              | Описание                                                  |
| ------------------ | ----------- | -------------------------------------------------- | ----------------------------------------------------------- |
| Получить все ресурсы | GET         | `/api/v1/namespaces/{namespace}/{resource}`        | Возвращает список основных ресурсов в указанном пространстве имен |
| Получить ресурс     | GET         | `/api/v1/namespaces/{namespace}/{resource}/{name}` | Возвращает данные конкретного основного ресурса                 |

### Общие параметры запроса

API Kubernetes поддерживают несколько общих параметров запроса, которые можно добавить к URL запроса:

| Параметр         | Описание                                          | Пример                                                              |
| ----------------- | -------------------------------------------------- | -------------------------------------------------------------------- |
| `pretty=true`     | Возвращает ответ в более удобочитаемом формате    | `/api/v1/namespaces/default/pods?pretty=true`                        |
| `labelSelector`   | Фильтрует ресурсы на основе меток                | `/api/v1/namespaces/default/pods?labelSelector=app=nginx`            |
| `fieldSelector`   | Фильтрует ресурсы на основе значений полей        | `/api/v1/namespaces/default/pods?fieldSelector=status.phase=Running` |
| `watch=true`      | Начинает соединение для отслеживания изменений      | `/api/v1/namespaces/default/pods?watch=true`                         |
| `resourceVersion` | Указывает, с какой версии начинать наблюдение     | `/api/v1/namespaces/default/pods?watch=true&resourceVersion=12345`   |
| `limit`           | Ограничивает количество возвращаемых результатов    | `/api/v1/namespaces/default/pods?limit=50`                           |
| `continue`        | Токен для продолжения предыдущего списка запросов    | `/api/v1/namespaces/default/pods?continue=eyJ2IjoibWV0Y...`          |

## Заключение

Следуя стандартным паттернам API Kubernetes, описанным в этом документе, вы можете взаимодействовать с любыми ресурсами, документированными в нашем разделе API Kubernetes. Схемы, предоставленные в документации API, показывают, какие данные вы можете отправлять и получать, в то время как это руководство объясняет, как структурировать ваши API-запросы.

Для получения подробной информации о конкретных схемах ресурсов обратитесь к разделу [API Kubernetes](../kubernetes_apis/).
