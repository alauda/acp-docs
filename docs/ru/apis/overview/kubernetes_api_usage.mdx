---
weight: 20
sourceSHA: 9f09b730fc77d5c9480c0beb5b3dbf9a0d31674ad902c058941e7bf1d1f88088
---

# Руководство по использованию API Kubernetes

## Проектирование документации

В документации API Kubernetes <Term name="productShort" /> мы решили сосредоточиться на определениях схем ресурсов, а не перечислять конкретные пути API, параметры и методы запросов для каждого ресурса. Этот выбор дизайна основан на следующих соображениях:

1. **Последовательность**: Все ресурсы API Kubernetes следуют одной и той же модели RESTful API, что делает избыточным повторение одних и тех же паттернов вызовов для каждого ресурса.

2. **Читаемость**: Документирование полных деталей API для каждого ресурса привело бы к длинной, повторяющейся документации, что усложняет навигацию и восприятие.

3. **Сосредоточенность на важном**: Для большинства пользователей понимание схемы ресурсов (какие поля доступны и что они означают) более важно, чем HTTP-механика вызовов API.

4. **Совместимость с инструментами**: Большинство пользователей взаимодействует с этими API через клиенты Kubernetes (kubectl, client-go и т.д.), а не непосредственно через HTTP-запросы, что делает детали HTTP менее актуальными для повседневной работы.

Хотя наша [документация API Kubernetes](../kubernetes_apis/) сосредоточена на определениях схем ресурсов, это руководство дополняет ее, объясняя общие паттерны использования и соглашения о вызовах для API Kubernetes. Здесь вы узнаете, как структурировать API-запросы, понять общие HTTP-методы и увидеть стандартные URL-пути для различных операций - информация, которая является универсальной для всех ресурсов Kubernetes.

## Стандартные паттерны вызова API Kubernetes

::: tip
Этот раздел предоставляет только базовое введение в паттерны использования API Kubernetes. Для более полных и детализированных объяснений API Kubernetes, пожалуйста, обратитесь к [официальной документации по концепциям API Kubernetes](https://kubernetes.io/docs/reference/using-api/api-concepts/).
:::

Все ресурсы API Kubernetes поддерживают стандартный набор операций, которые следуют RESTful соглашениям. Ниже приведены общие паттерны вызова API, которые применимы ко всем ресурсам, перечисленным в нашей документации API Kubernetes:

### Сборники ресурсов

Для сборников ресурсов (таких как Pods, Deployments и т. д.):

| Операция                          | HTTP метод | Путь                                                        | Описание                                                                         |
| --------------------------------- | ----------- | ----------------------------------------------------------- | -------------------------------------------------------------------------------- |
| Список всех ресурсов              | GET         | `/apis/{group}/{version}/namespaces/{namespace}/{resource}` | Возвращает список ресурсов в указанном пространстве имен                        |
| Список всех ресурсов (по всему кластеру) | GET         | `/apis/{group}/{version}/{resource}`                        | Возвращает список ресурсов по всем пространствам имен (для ресурсов, которые поддерживают это) |
| Создать ресурс                    | POST        | `/apis/{group}/{version}/namespaces/{namespace}/{resource}` | Создает новый ресурс в указанном пространстве имен                               |
| Создать ресурс (по всему кластеру) | POST        | `/apis/{group}/{version}/{resource}`                        | Создает новый ресурс, имеющий область действия кластера (для ресурсов, которые поддерживают это) |

### Индивидуальные ресурсы

Для отдельных экземпляров ресурса:

| Операция                        | HTTP метод | Путь                                                               | Описание                                                              |
| -------------------------------- | ----------- | ------------------------------------------------------------------ | --------------------------------------------------------------------- |
| Получить ресурс                  | GET         | `/apis/{group}/{version}/namespaces/{namespace}/{resource}/{name}` | Возвращает детали конкретного ресурса                                 |
| Получить ресурс (по всему кластеру) | GET         | `/apis/{group}/{version}/{resource}/{name}`                        | Возвращает детали конкретного ресурса с областью действия кластера    |
| Обновить ресурс                  | PUT         | `/apis/{group}/{version}/namespaces/{namespace}/{resource}/{name}` | Заменяет весь ресурс на предоставленное определение                   |
| Обновить ресурс (по всему кластеру) | PUT         | `/apis/{group}/{version}/{resource}/{name}`                        | Заменяет весь ресурс с областью действия кластера на предоставленное определение |
| Частичное обновление ресурса     | PATCH       | `/apis/{group}/{version}/namespaces/{namespace}/{resource}/{name}` | Обновляет определенные поля ресурса                                   |
| Частичное обновление ресурса (по всему кластеру) | PATCH       | `/apis/{group}/{version}/{resource}/{name}`                        | Обновляет определенные поля ресурса с областью действия кластера      |
| Удалить ресурс                   | DELETE      | `/apis/{group}/{version}/namespaces/{namespace}/{resource}/{name}` | Удаляет указанный ресурс                                             |
| Удалить ресурс (по всему кластеру) | DELETE      | `/apis/{group}/{version}/{resource}/{name}`                        | Удаляет указанный ресурс с областью действия кластера                 |

### Основная группа API

Для ресурсов в основной группе API (v1) пути немного отличаются:

| Операция          | HTTP метод | Путь                                               | Описание                                                 |
| ------------------ | ----------- | -------------------------------------------------- | ------------------------------------------------------- |
| Список всех ресурсов | GET         | `/api/v1/namespaces/{namespace}/{resource}`        | Возвращает список основных ресурсов в указанном пространстве имен |
| Получить ресурс     | GET         | `/api/v1/namespaces/{namespace}/{resource}/{name}` | Возвращает детали конкретного основного ресурса         |

### Общие параметры запроса

API Kubernetes поддерживают несколько общих параметров запроса, которые можно добавить к URL запроса:

| Параметр         | Описание                                          | Пример                                                              |
| ----------------- | -------------------------------------------------- | -------------------------------------------------------------------- |
| `pretty=true`     | Возвращает ответ в более удобочитаемом формате    | `/api/v1/namespaces/default/pods?pretty=true`                        |
| `labelSelector`   | Фильтрует ресурсы на основе меток                 | `/api/v1/namespaces/default/pods?labelSelector=app=nginx`            |
| `fieldSelector`   | Фильтрует ресурсы на основе значений полей        | `/api/v1/namespaces/default/pods?fieldSelector=status.phase=Running` |
| `watch=true`      | Начинает соединение для отслеживания изменений     | `/api/v1/namespaces/default/pods?watch=true`                         |
| `resourceVersion` | Указывает, с какой версии начинать отслеживание    | `/api/v1/namespaces/default/pods?watch=true&resourceVersion=12345`   |
| `limit`           | Ограничивает количество возвращаемых результатов    | `/api/v1/namespaces/default/pods?limit=50`                           |
| `continue`        | Токен для продолжения предыдущего запроса списка    | `/api/v1/namespaces/default/pods?continue=eyJ2IjoibWV0Y...`          |

## Заключение

Следуя стандартным паттернам API Kubernetes, описанным в этом документе, вы можете взаимодействовать с любыми ресурсами, документированными в нашем разделе API Kubernetes. Схемы, предоставленные в документации API, сообщают вам, какие данные вы можете отправлять и получать, в то время как это руководство объясняет, как структурировать ваши запросы API.

Для получения детальной информации о схемах конкретных ресурсов, обратитесь к разделу [API Kubernetes](../kubernetes_apis/).
