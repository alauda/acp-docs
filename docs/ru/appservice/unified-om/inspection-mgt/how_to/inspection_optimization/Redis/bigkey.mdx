---
weight: 10
sourceSHA: 08fa64ae9ae12557bf7ba851b09d7c7def503b03ee30e5693cee1e401147b1e2
---

# Redis BigKey

## Введение в BigKey

В Redis BigKeys потребляют чрезмерные ресурсы памяти, что влияет на производительность и доступность Redis.

В общем случае, следующие условия могут привести к тому, что ключ будет считаться BigKey:

- Для строковых ключей, если выделенная память превышает 5 МБ.
- Для ключей типа список, если количество элементов превышает 20 000, или выделенная память превышает 1 МБ.
- Для ключей типа множество, если количество элементов превышает 5 000, или выделенная память превышает 1 МБ.
- Для ключей типа отсортированное множество, если количество элементов превышает 10 000, или выделенная память превышает 1 МБ.
- Для ключей типа хэш, если количество полей превышает 1 000, или выделенная память превышает 1 МБ.

**Примечание**: Эти пороги не являются жесткими правилами и должны оцениваться на основе вашей фактической ситуации для определения того, квалифицируется ли ключ как BigKey.

## Как идентифицировать BigKeys в экземпляре Redis?

Используйте следующую команду для выборки и проверки ключей в Redis, выявляя те, которые занимают большой объем памяти, а также их типы и размеры.

```bash
redis-cli --bigkeys
```

Для более подробных методов обнаружения BigKeys, обратитесь к <ExternalSiteLink name="redis" href="trouble_shooting/20-bigkeycheck.mdx" children="Обнаружение и обработка BigKeys" />.

## Как исправить BigKeys в экземпляре Redis?

| Тип BigKey    | Методы исправления                                                                                                                                                                                                                                                                                                                      |
| -------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **Строка**     | Рассмотрите возможность разделения BigKey на несколько меньших строк для хранения. Используйте команды `GETRANGE` и `SETRANGE` для чтения и изменения частей строки, тем самым разбивая большую строку на несколько меньших строк.                                                                                                           |
| **Хэш**       | Разделите BigKey на несколько меньших хэшей. Первоначально разбейте ключи большого хэша на части, затем разделите наборы полей каждого соответствующего хэша, и в конце разбейте каждое поле на части. Таким образом, большой хэш может быть разделен на несколько меньших хэшей.                                  |
| **Список**       | Рассмотрите возможность разделения BigKey на несколько меньших списков для хранения. Используйте команды `LRANGE` и `RPUSH` для чтения и изменения частей списка, тем самым сегментируя большой список на несколько меньших списков.                                                                                                                       |
| **Множество**        | Рассмотрите возможность разделения BigKey на несколько меньших множеств для хранения. Используйте команды `SMEMBERS` и `SADD` для чтения и изменения элементов в множестве, тем самым разделяя большое множество на несколько меньших множеств.                                                                                                                         |
| **Отсортированное множество** | Разделите BigKey на несколько меньших отсортированных множеств. Сначала разбейте ключи большого отсортированного множества, затем разделите элементы каждого соответствующего отсортированного множества. Используйте команды `ZRANGE` и `ZADD` для чтения и изменения элементов в отсортированном множестве, тем самым разделяя большое отсортированное множество на несколько меньших отсортированных множеств. |
