---
weight: 20
sourceSHA: b0ce5d4df868f034b0db43dd0cfcb727487f403d3e61d278c099778f282a399d
---

# Архитектура

## Техническая архитектура

![](../../../en/storage/storagesystem_ceph/assets/rook_ceph_architecture.png)

Примеры приложений показаны выше для трех поддерживаемых типов хранения:

- Блочное хранилище представлено синим приложением, которое имеет смонтированный том ReadWriteOnce (RWO). Приложение может читать и записывать на том RWO, в то время как Ceph управляет вводом-выводом.
- Общая файловая система представлена двумя фиолетовыми приложениями, которые используют общий том ReadWriteMany (RWX). Оба приложения могут одновременно активно читать или записывать на том. Ceph обеспечит безопасное хранение данных для нескольких писателей с помощью демона MDS.
- Объектное хранилище представлено оранжевым приложением, которое может читать и записывать в бакет с помощью стандартного клиента S3.

Ниже пунктирной линии на вышеуказанной диаграмме компоненты разделяются на три категории:

- [Оператор Rook](./concepts/concept.mdx#rook-operator) (синий уровень): Оператор автоматизирует конфигурацию Ceph.
- [Плагины и поставщики CSI](./concepts/concept.mdx#ceph-csi) (оранжевый уровень): Драйвер Ceph-CSI обеспечивает предоставление и монтирование томов.
- [Демоны Ceph](./concepts/concept.mdx#ceph-module-functions) (красный уровень): Демоны Ceph запускают основную архитектуру хранилища. См. Глоссарий для получения дополнительной информации о каждом демоне.

**Блочное хранилище**\
На диаграмме выше поток для создания приложения с томом RWO:

- (синий) приложение создает PVC для запроса хранилища.
- PVC определяет класс хранилища Ceph RBD (sc) для предоставления хранилища.
- K8s вызывает поставщик Ceph-CSI RBD для создания образа Ceph RBD.
- Kubelet вызывает плагин тома CSI RBD для монтирования тома в приложении.
- Том теперь доступен для чтения и записи.
- Том ReadWriteOnce может быть смонтирован только на одном узле за раз.

**Общая файловая система**\
На диаграмме выше поток для создания приложений с томом RWX:

- (фиолетовое) приложение создает PVC для запроса хранилища.
- PVC определяет класс хранилища CephFS (sc) для предоставления хранилища.
- K8s вызывает поставщик Ceph-CSI CephFS для создания подтома CephFS.
- Kubelet вызывает плагин тома CSI CephFS для монтирования тома в приложении.
- Том теперь доступен для чтения и записи.
- Том ReadWriteMany может быть смонтирован на нескольких узлах для использования вашим приложением.

**Объектное хранилище S3**\
На диаграмме выше поток для создания приложения с доступом к бакету S3:

- (оранжевое) приложение создает BucketClaim для запроса бакета.
- Драйвер Ceph COSI создает бакет Ceph RGW.
- Драйвер Ceph COSI создает секрет с учетными данными для доступа к бакету.
- Приложение извлекает учетные данные из секрета.
- Приложение теперь может читать и записывать в бакет с помощью клиента S3.
