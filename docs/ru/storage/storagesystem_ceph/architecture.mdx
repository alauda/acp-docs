---
weight: 20
sourceSHA: b0ce5d4df868f034b0db43dd0cfcb727487f403d3e61d278c099778f282a399d
---

# Архитектура

## Техническая архитектура

![](../../../en/storage/storagesystem_ceph/assets/rook_ceph_architecture.png)

На приведенном выше изображении показаны примеры приложений для трех поддерживаемых типов хранения:

- Блочное хранилище представлено синим приложением, которое имеет смонтированный том ReadWriteOnce (RWO). Приложение может читать и записывать данные в том RWO, в то время как Ceph управляет вводом-выводом.
- Общая файловая система представлена двумя фиолетовыми приложениями, которые совместно используют том ReadWriteMany (RWX). Оба приложения могут одновременно активно читать или записывать данные в том. Ceph обеспечит безопасную защиту данных для нескольких писателей с помощью демона MDS.
- Объектное хранилище представлено оранжевым приложением, которое может читать и записывать данные в ведро с помощью стандартного S3 клиента.

Ниже пунктирной линии на приведенной выше схеме компоненты делятся на три категории:

- [Оператор Rook](./concepts/concept.mdx#rook-operator) (синий уровень): Оператор автоматизирует конфигурацию Ceph
- [Плагины и провайдеры CSI](./concepts/concept.mdx#ceph-csi) (оранжевый уровень): Драйвер Ceph-CSI обеспечивает создание и монтирование томов
- [Демоны Ceph](./concepts/concept.mdx#ceph-module-functions) (красный уровень): Демоны Ceph управляют основной архитектурой хранения. См. Глоссарий, чтобы узнать больше о каждом демоне.

**Блочное хранилище**\
На схеме выше поток для создания приложения с томом RWO следующий:

- (синее) приложение создает PVC для запроса хранилища.
- PVC определяет класс хранения Ceph RBD (sc) для предоставления хранилища.
- K8s вызывает провайдер Ceph-CSI RBD для создания изображения Ceph RBD.
- Kubelet вызывает плагин тома CSI RBD для монтирования тома в приложении.
- Том теперь доступен для чтения и записи.
- Том ReadWriteOnce может быть смонтирован только на одном узле за раз.

**Общая файловая система**\
На схеме выше поток для создания приложений с томом RWX следующий:

- (фиолетовое) приложение создает PVC для запроса хранилища.
- PVC определяет класс хранения CephFS (sc) для предоставления хранилища.
- K8s вызывает провайдер Ceph-CSI CephFS для создания подсервиса CephFS.
- Kubelet вызывает плагин тома CSI CephFS для монтирования тома в приложении.
- Том теперь доступен для чтения и записи.
- Том ReadWriteMany может быть смонтирован на нескольких узлах для использования вашим приложением.

**Объектное хранилище S3**\
На схеме выше поток для создания приложения с доступом к ведру S3 следующий:

- (оранжевое) приложение создает BucketClaim для запроса ведра.
- Драйвер Ceph COSI создает ведро Ceph RGW.
- Драйвер Ceph COSI создает секрет с учетными данными для доступа к ведру.
- Приложение извлекает учетные данные из секрета.
- Приложение теперь может читать и записывать в ведро с помощью клиента S3.
