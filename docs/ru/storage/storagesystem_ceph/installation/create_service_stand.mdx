---
weight: 16
sourceSHA: 6646528d1d1ffc5e22133f31681f3855b538aa1deab82941a6868cd8b37a03fa
---

# Создание кластера стандартного типа

Кластер стандартного типа является наиболее типичным методом развертывания хранения Ceph. Он распределяет реплики данных между жесткими дисками на разных хостах, гарантируя, что если один хост выйдет из строя, копии данных на других хостах все равно смогут обеспечить доступность сервиса.

## Предварительные требования

- В кластере хранения требуется как минимум 3 узла.

- Каждый узел должен иметь как минимум 1 пустой жесткий диск или 1 неформатированный раздел жесткого диска.

- Рекомендуемая доступная емкость жесткого диска составляет более 50 ГБ.

- Если вы используете прикрепленный кластер Kubernetes с Containerd в качестве компонента времени выполнения, убедитесь, что значение параметра `LimitNOFILE` в файле `/etc/systemd/system/containerd.service` настроено на `1048576` на всех узлах кластера, чтобы обеспечить успешное развертывание распределенного хранения. Для инструкций по настройке обратитесь к [Изменение конфигурации Containerd]().

  **Примечание**: При обновлении с версий раньше v3.10.2 до текущей версии, если вам нужно развернуть распределенное хранение Ceph на вашем индивидуальном кластере Kubernetes с Containerd в качестве компонента времени выполнения, вам также необходимо установить значение параметра `LimitNOFILE` в файле `/etc/systemd/system/containerd.service` на `1048576` на всех узлах кластера.

## Предостережения

**Создание сервисов хранения** и **Доступ к сервисам хранения** поддерживают выбор только одного метода.

## Порядок действий

<Steps>
  ### Развертывание оператора

  1. Перейдите в **Управление платформой**.

  2. В боковом меню слева нажмите **Управление хранилищем** > **Распределенное хранилище**.

  3. Нажмите **Настроить сейчас**.

  4. На странице мастера **Развертывание оператора** нажмите кнопку **Развернуть оператора** внизу справа.

     - Когда страница автоматически перейдет к следующему шагу, это указывает на успешное развертывание оператора.

     - Если развертывание не удалось, обратитесь к запросу на интерфейсе **Очистить развернутую информацию и повторить попытку** и повторно разверните оператора; если вы хотите вернуться на страницу выбора распределенного хранилища, нажмите **Магазин приложений**, сначала удалите ресурсы в уже развернутом **rook-operator**, а затем удалите **rook-operator**.

  ### Создание кластера

  1. На странице мастера **Создание кластера** настройте соответствующие параметры и нажмите кнопку **Создать кластер** внизу справа.

     | Параметр                          | Объяснение                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
     | ---------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
     | **Тип кластера**                   | Выберите **Стандартный**.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
     | **Тип класса устройства**              | Классы устройств - это группировки жестких дисков; вы можете настраивать классы устройств в зависимости от ваших потребностей в хранении, распределяя различный контент на дисках разной производительности. <ul><li>**Класс устройства по умолчанию**: Платформа автоматически классифицирует типы жестких дисков в узлах кластера. Например, создавая классы устройств с названиями `hdd`, `ssd`, `nvme`.</li><li>**Пользовательский класс устройства**: Настройте название пользовательского класса устройства для конкретных комбинаций дисков в узле, поддерживается добавление нескольких классов устройств. Один и тот же жесткий диск может принадлежать только одному классу устройства.</li></ul> |
     | **Имя класса устройства**            | Название класса устройства. При выборе **Пользовательского класса устройства** название класса устройства не может использовать следующие названия: `hdd`, `ssd`, `nvme`.                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
     | **Класс устройства - Устройства хранения** | Выберите **Пустой жесткий диск** или **Неформатированный раздел жесткого диска** на узлах. <ul><li>Когда переключатель "Открыть все пустые устройства" включен: Все пустые устройства под узлом будут добавлены в класс устройства;</li><li>Когда переключатель "Открыть все пустые устройства" выключен: Введите названия пустых устройств под узлом вручную, например `sda`.</li></ul>                                                                                                                                                                                                                                                             |
     | **Снимок**                       | При включении поддерживает создание снимков PVC и использование снимков для настройки новых PVC для быстрой резервной копии и восстановления бизнес-данных. <br />Если вы не включали снимки при создании хранилища, вы все равно можете включить их по мере необходимости в разделе **Операции** на странице деталей кластера хранения. <br />**Примечание**: Пожалуйста, убедитесь, что вы [развернули плагины снимков томов](/configure/storage/functions/snapshot_con.mdx) для текущего кластера перед использованием.                                                                                                                                    |
     | **Мониторинг и оповещение**               | При включении обеспечит сбор метрик мониторинга и возможности оповещения из коробки, см. [Мониторинг и оповещение](../functions/monitor.mdx). <br />**Примечание**: Если в данный момент не включено, вам необходимо будет найти альтернативные решения для мониторинга хранилища и оповещений. Например, вручную настраивать панели мониторинга и стратегии оповещения в центре эксплуатации и обслуживания.                                                                                                                                                                                                         |

  2. Щелкните **Расширенная конфигурация** для расширенной настройки компонентов.

     | Параметр                            | Объяснение                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
     | ------------------------------------ | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
     | **Сетевые настройки**            | <ul><li>**Сеть хоста**: Кластер хранения будет использовать сеть хоста, и вы должны заполнить соответствующие параметры оптимизации в столбце оптимизационных параметров, например, настроить подсети `public` и `cluster`. Если оставить пустым, будет использоваться подсеть хоста по умолчанию.<br />**Примечание**: Использование сети хоста может подвергать риску безопасности из-за незащищенной (в открытом виде) передачи данных через порты хоста. Пожалуйста, свяжитесь с командой поддержки платформы, чтобы получить решение для зашифрованной передачи.</li><li>**Сеть контейнеров**: Кластер хранения будет использовать сетевую контейнеризацию; вы можете создавать подсети в управлении сетью и назначать их пространству имен `rook-ceph`. Если оставить пустым, будет использоваться подсеть по умолчанию.<br />**Примечание**:<br />IPv6 не поддерживается.<br />При использовании контейнерной сети хранилище доступно только внутри кластера. <br />Сбои или перезапуск Ceph CSI Pod могут привести к сбоям в обслуживании.</li></ul> |
     | **Оптимизационные параметры**          | Поддерживает заполнение параметров в формате файла конфигурации Ceph; система перезаписывает параметры по умолчанию на основе предоставленного содержимого. <br />**Примечание**: После первого заполнения или изменения параметров инициализации, пожалуйста, нажмите на параметры инициализации; успешная инициализация требуется перед созданием кластера.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
     | **Фиксированное развертывание компонентов** | Вы можете развернуть компоненты на указанных узлах; требуется как минимум три узла для обеспечения минимальной доступности. Компоненты, подходящие для конфигурации фиксированного развертывания, включают MON, MGR, MDS, RGW.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |

     - Когда страница автоматически перейдет к следующему шагу, это указывает на успешное развертывание кластера Ceph.

     - Если создание не удалось, вы можете нажать для очистки **Созданной информации или повторить попытку**, чтобы автоматически очистить ресурсы и повторно создать кластер или вручную очистить ресурсы в соответствии с документацией [Очистка ресурсов службы распределенного хранения](../how_to/clean_ceph.mdx).

  ### Создание пула хранения

  1. На странице мастера **Создание пула хранения** настройте соответствующие параметры и нажмите кнопку **Создать пул хранения** внизу справа.

     | Параметр         | Объяснение                                                                                                                                                                                                                                                                                                                                                                                     |
     | ----------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
     | **Тип хранения**  | - Файловое хранилище: Обеспечивает безопасные, надежные и масштабируемые услуги общего файлового хранения. Подходит для совместного использования файлов, резервного копирования данных и т. д.<br />- Блочное хранилище: Обеспечивает высокие IOPS и низкие задержки в услугах хранения. Подходит для баз данных, виртуализации и т. д.<br />- Объектное хранилище: Обеспечивает услуги хранения с стандартным интерфейсом S3, подходит для больших данных, резервного архива, облачного хранения и т. д. |
     | **Количество реплик** | Чем больше количество реплик, тем выше избыточность и безопасность данных; однако коэффициент использования хранилища уменьшится. Обычно он устанавливается на 3 для удовлетворения большинства потребностей.                                                                                                                                                                                                              |
     | **Класс устройства**  | УUniformно классифицируйте типы для одного типа устройства или дисков с одной бизнес-логикой, выбирая из классов устройств, добавленных на предыдущем шаге. <ul><li>При выборе класса устройства данные будут храниться в выбранном классе устройства.</li><li>Если класс устройства не выбран, данные будут храниться случайно по всем устройствам в пуле хранения.</li></ul>                           |

     Если это объектное хранилище, вам также необходимо настроить следующие параметры:

     | Параметр           | Объяснение                                                                   |
     | ------------------- | ----------------------------------------------------------------------------- |
     | **Регион**          | Укажите регион, где расположен пул хранения.                         |
     | **Тип шлюза**    | По умолчанию S3 и не может быть изменен.                                         |
     | **Внутренний порт**   | Укажите порт для внутреннего доступа в кластере.                          |
     | **Внешний доступ** | Включение/отключение внешнего доступа создаст/уничтожит сервис типа Nodeport. |
     | **Количество экземпляров**  | Количество ресурсоэкземпляров для объектного хранилища.                          |

     - Когда страница автоматически перейдет к следующему шагу, это указывает на успешное развертывание пула хранения.

     - Если развертывание не удалось, пожалуйста, обратитесь к запросам интерфейса для проверки основных компонентов, а затем нажмите **Очистить созданную информацию и повторить попытку**, чтобы заново создать пул хранения.

  2. Нажмите **Создать пул хранения**. На вкладке **Детали** вы можете просмотреть информацию о созданном пуле хранения.
</Steps>

## Связанные операции

### Создание кластера расширенного типа

Для получения подробной информации обратитесь к [Создание кластера расширенного типа](./create_service_extend.mdx).

### Очистка распределенного хранилища

Для получения подробной информации обратитесь к [Очистка распределенного хранилища](../how_to/clean_ceph.mdx).
