---
weight: 16
sourceSHA: 6646528d1d1ffc5e22133f31681f3855b538aa1deab82941a6868cd8b37a03fa
---

# Создание кластера стандартного типа

Кластер стандартного типа является наиболее типичным методом развертывания хранилища Ceph. Он распределяет реплики данных по жестким дискам на разных хостах, гарантируя, что если один хост выйдет из строя, копии данных на других хостах смогут по-прежнему сохранять доступность сервиса.

## Предварительные условия

- Для хранения кластера требуется по крайней мере 3 узла.

- Каждый узел должен иметь по крайней мере 1 незанятый жесткий диск или 1 неформатированный раздел жесткого диска.

- Рекомендуется, чтобы доступный объем жесткого диска был больше 50 Г.

- Если вы используете прикрепленный кластер Kubernetes с Containerd в качестве компонента выполнения, убедитесь, что значение параметра `LimitNOFILE` в файле `/etc/systemd/system/containerd.service` настроено на `1048576` на всех узлах кластера, чтобы обеспечить успешное развертывание распределенного хранилища. Для инструкций по настройке, пожалуйста, ознакомьтесь с [Изменением информации о настройке Containerd]().

  **Примечание**: При обновлении с версий ранее v3.10.2 до текущей версии, если вам необходимо развернуть распределенное хранилище Ceph на вашем собственном кластере Kubernetes с Containerd в качестве компонента выполнения, вы также должны установить значение параметра `LimitNOFILE` в файле `/etc/systemd/system/containerd.service` на `1048576` на всех узлах кластера.

## Предостережения

**Создание службы хранения** и **Доступ к службе хранения** поддерживают выбор только одного метода.

## Процедура

<Steps>
  ### Развертывание оператора

  1. Перейдите в **Управление платформой**.

  2. В левой боковой панели нажмите **Управление хранилищем** > **Распределенное хранилище**.

  3. Нажмите **Настроить сейчас**.

  4. На странице мастера **Развертывание оператора** нажмите кнопку **Развернуть оператора** в правом нижнем углу.

     - Когда страница автоматически переходит к следующему шагу, это указывает на успешное развертывание оператора.

     - Если развертывание не удалось, пожалуйста, обратитесь к подсказке на интерфейсе **Очистка развернутой информации и повторная попытка**, и повторно разверните оператора; если вы хотите вернуться на страницу выбора распределенного хранилища, нажмите **Магазин приложений**, сначала удалите ресурсы, уже развернутые в **rook-operator**, а затем удалите **rook-operator**.

  ### Создание кластера

  1. На странице мастера **Создание кластера** настройте соответствующие параметры и нажмите кнопку **Создать кластер** в правом нижнем углу.

     | Параметр                          | Объяснение                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
     | ---------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
     | **Тип кластера**                   | Выберите **Стандарт**.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
     | **Тип класса устройства**              | Классы устройств представляют собой группировки жестких дисков; вы можете настраивать классы устройств в зависимости от ваших потребностей в хранении, выделяя различный контент для дисков с разной производительностью. <ul><li>**Класс устройства по умолчанию**: Платформа автоматически классифицирует типы жестких дисков в узлах кластера. Например, создать классы устройств с именами `hdd`, `ssd`, `nvme`.</li><li>**Пользовательский класс устройства**: Настройте имя класса устройства для конкретных комбинаций дисков в узле; поддерживается добавление нескольких классов устройств. Один и тот же жесткий диск может принадлежать только одному классу устройства.</li></ul> |
     | **Класс устройства - Имя**            | Имя класса устройства. При выборе **Пользовательского класса устройства** класс устройства не может использовать следующие имена: `hdd`, `ssd`, `nvme`.                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
     | **Класс устройства - Устройства хранения** | Выберите **Пустой жесткий диск** или **Неформатированный раздел жесткого диска** на узлах. <ul><li>Когда переключатель "Открыть все пустые устройства" включен: Все пустые устройства под узлом будут добавлены в класс устройства;</li><li>Когда переключатель "Открыть все пустые устройства" выключен: Введите названия пустых устройств под узлом вручную, например `sda`.</li></ul>                                                                                                                                                                                                                                                             |
     | **Снимок**                       | Когда включено, это поддерживает создание снимков PVC и использование снимков для настройки новых PVC для быстрого резервирования и восстановления бизнес-данных. <br />Если вы не включили снимки при создании хранилища, вы все равно можете включить их по мере необходимости в разделе **Операции** на странице деталей кластера хранения. <br />**Примечание**: Пожалуйста, убедитесь, что вы [развернули плагины снимков томов](/configure/storage/functions/snapshot_con.mdx) для текущего кластера перед использованием.                                                                                                                                    |
     | **Мониторинг тревог**               | Когда включено, это предоставит готовую к использованию возможность сбора мониторинговых метрик и алертов, смотрите [Мониторинг и тревога](../functions/monitor.mdx). <br />**Примечание**: Если на данный момент не включено, вам придется найти альтернативные решения для мониторинга и тревог хранения. Например, вручную настраивать панели мониторинга и стратегии оповещения в центре эксплуатации и обслуживания.                                                                                                                                                                                                         |

  2. Нажмите **Расширенная конфигурация** для настройки компонентов.

     | Параметр                            | Объяснение                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
     | ------------------------------------ | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
     | **Сетевая конфигурация**            | <ul><li>**Сетевая хост**: Хранилище кластера будет использовать сетевую хост, и вы должны заполнить соответствующие параметры оптимизации в столбце параметров оптимизации, такие как настройка подсетей `public` и `cluster`. Если оставить пустым, будет использоваться подсеть хоста по умолчанию.<br />**Примечание**: Использование сети хоста может подвергнуть риску безопасности из-за незашифрованной (в открытом виде) передачи данных через порты хоста. Пожалуйста, свяжитесь с командой поддержки платформы, чтобы получить решение для зашифрованной передачи.</li><li>**Сетевая контейнер**: Хранилище кластера будет использовать контейнерные сети; вы можете создавать подсети в управлении сетью и назначать их пространству имен `rook-ceph`. Если оставить пустым, будет использоваться подсеть по умолчанию.<br />**Примечание**:<br />IPv6 не поддерживается.<br />При использовании сети контейнера, доступ к хранилищу возможен только внутри кластера. <br />Сбои или перезагрузки пода Ceph CSI могут привести к прерываниям сервиса.</li></ul> |
     | **Параметры оптимизации**          | Поддерживает заполнение параметров в формате конфигурационного файла Ceph; система заменит параметры по умолчанию на основе предоставленного контента. <br />**Примечание**: После первого заполнения или изменения инициализационных параметров, пожалуйста, нажмите на инициализационные параметры; успешная инициализация необходима, прежде чем кластер сможет быть создан.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
     | **Фиксированное развертывание компонентов** | Вы можете развернуть компоненты на определенных узлах; требуется как минимум три узла для обеспечения минимальной доступности. Компоненты, подходящие для настройки фиксированного развертывания, включают MON, MGR, MDS, RGW.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |

     - Когда страница автоматически переходит к следующему шагу, это указывает на успешное развертывание кластера Ceph.

     - Если создание не удалось, вы можете нажать для очистки **Созданной информации или повторной попытки**, чтобы автоматически очистить ресурсы и повторно создать кластер, или вручную очистить ресурсы в соответствии с документацией [Очистка ресурсов службы распределенного хранения](../how_to/clean_ceph.mdx).

  ### Создание пула хранения

  1. На странице мастера **Создание пула хранения** настройте соответствующие параметры и нажмите кнопку **Создать пул хранения** в правом нижнем углу.

     | Параметр         | Объяснение                                                                                                                                                                                                                                                                                                                                                                                     |
     | ----------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
     | **Тип хранения**  | - Файловое хранилище: Предлагает безопасные, надежные и масштабируемые услуги общего файлового хранения. Подходит для совместного использования файлов, резервного копирования данных и т. д.<br />- Блочное хранилище: Предлагает высокие IOPS и низкие задержки услуг хранения. Подходит для баз данных, виртуализации и т. д.<br />- Объектное хранилище: Предлагает услуги хранения с интерфейсом стандартного S3, подходит для больших данных, резервного архивирования, облачного хранения и т. д. |
     | **Количество реплик** | Чем больше количество реплик, тем выше избыточность и безопасность данных; однако коэффициент использования хранилища будет снижаться. Обычно устанавливается на 3, чтобы удовлетворить большинство потребностей.                                                                                                                                                                                                              |
     | **Класс устройства**  | Упорядочите типы для одинаковых типов устройств или дисков с одной и той же бизнес-логикой, выбирая из классов устройств, добавленных на предыдущем шаге. <ul><li>При выборе класса устройства данные будут храниться в выбранном классе устройства.</li><li>Если класс устройства не выбран, данные будут случайным образом храниться по всем устройствам в пуле хранения.</li></ul>                           |

     Если это объектное хранилище, вам также нужно настроить следующие параметры:

     | Параметр           | Объяснение                                                                   |
     | ------------------- | ----------------------------------------------------------------------------- |
     | **Регион**          | Укажите регион, где находится пул хранения.                         |
     | **Тип шлюза**      | По умолчанию S3 и не может быть изменен.                                         |
     | **Внутренний порт**   | Укажите порт для внутреннего доступа в кластере.                          |
     | **Внешний доступ** | Включение/выключение внешнего доступа создаст/удалит сервис типа Nodeport. |
     | **Количество экземпляров**  | Количество ресурсных экземпляров для объектного хранения.                          |

     - Когда страница автоматически переходит к следующему шагу, это указывает на успешное развертывание пула хранения.

     - Если развертывание не удалось, пожалуйста, обратитесь к подсказкам интерфейса, чтобы проверить основные компоненты, а затем нажмите **Очистка созданной информации и повторная попытка** для повторного создания пула хранения.

  2. Нажмите **Создать пул хранения**. На вкладке **Детали** вы можете просмотреть информацию о созданном пуле хранения.
</Steps>

## Связанные операции

### Создание кластера расширенного типа

Для получения дополнительных сведений смотрите [Создание кластера расширенного типа](./create_service_extend.mdx).

### Очистка распределенного хранения

Для получения дополнительных сведений смотрите [Очистка распределенного хранения](../how_to/clean_ceph.mdx).
