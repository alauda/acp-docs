---
weight: 67
sourceSHA: 86a17ff046a52ad19c9314542a58a80ece33ac67e444b4f02ea24f0fa1260d70
---

# Обновите параметры оптимизации

Платформа поддерживает заполнение параметров оптимизации в формате конфигурационного файла Ceph при создании хранилища кластера, но не предоставляет способа их изменения через интерфейс после создания. Вам необходимо вручную обновить их в соответствии со следующими шагами.

## Процедура

1. Сначала обновите параметры оптимизации хранилища в Configmap с именем `rook-config-override-user`, замените поле `.data.config` и установите значение поля `.metadata.annotations[rook.cpaas.io/need-sync]` на `true`. Например:

   ```
   apiVersion: v1
   data:
     config: |
       [global]
       mon_memory_target=1073741824
       mds_cache_memory_limit=2147483648
       osd_memory_target=4147483648
   kind: ConfigMap
   metadata:
     annotations:
       cpaas.io/creator: admin
       cpaas.io/updated-at: "2022-03-01T12:24:04Z"
       rook.cpaas.io/need-sync: "true"
       rook.cpaas.io/sync-status: synced
     creationTimestamp: "2022-03-01T12:24:04Z"
     finalizers:
     - rook.cpaas.io/config-merge
     name: rook-config-override-user
     namespace: default
     resourceVersion: "38816864"
     uid: ce3a8f3e-6453-4bdd-bff0-e16cf7d5d5fa
   ```

2. Выполните команду `ceph tell [mon|osd|mgr|mds|rgw].* config set [key] [value]` в Pod rook-ceph-tools для применения конфигурации в реальном времени.

3. Чтобы запустить Pod инструментов, отредактируйте ClusterServiceVersion (CSV) в пространстве имен rook-ceph и установите значение replicas для rook-ceph-tools в разделе Deployments на 1.
