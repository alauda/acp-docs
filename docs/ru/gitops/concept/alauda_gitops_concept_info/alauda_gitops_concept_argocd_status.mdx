---
weight: 20
i18n:
  title:
    en: ACP GitOps Sync and Health Status
    zh: ACP GitOps 的同步及健康检查
title: ACP GitOps Sync and Health Status
sourceSHA: 06fdbcc3d5e8ba2245e1d4bbdfde649bd3464de2f48fa688adb935270c2dd81d
---

# ACP GitOps Синхронизация и Состояние Здоровья

ACP GitOps абстрагирует состояние ресурсов `Application`, используя статус подлежащих ресурсов Kubernetes. Состояние ресурсов `Application` напрямую управляет состоянием связанных ресурсов `ApplicationSet`.

## Объяснение Состояния Синхронизации

Как ресурсы Kubernetes, так и приложения имеют четыре состояния синхронизации: **Сбой Синхронизации**, **Вне Синхронизации**, **Синхронизация** и **Синхронизировано**.

| **Статус Синхронизации** | **Описание**                                                                                                         |
| :----------------------- | :------------------------------------------------------------------------------------------------------------------- |
| **Сбой Синхронизации**  | Синхронизация не удалась из-за ошибок сети, проблем конфигурации или проблем с правами доступа. Проверьте журналы для определения причины. |
| **Вне Синхронизации**   | Состояние ресурсов кластера отличается от желаемого состояния, определенного в Git. Требуется ручная/автоматическая синхронизация.              |
| **Синхронизация**       | В процессе активной согласованности между состоянием кластера и состоянием, определенным в Git.                                          |
| **Синхронизировано**    | Состояние ресурсов кластера соответствует желаемому состоянию, определенному в Git.                                                               |

:::info
**Приоритет Отображения Состояния Синхронизации**: Приоритетный порядок **Сбой Синхронизации** > **Вне Синхронизации** > **Синхронизация** > **Синхронизировано**.

**Примеры**:

- Если у приложения есть два ресурса со статусами **Синхронизация** и **Синхронизировано**, его общее состояние будет **Синхронизация**.
- Если `ApplicationSet` управляет двумя приложениями со статусами **Сбой Синхронизации** и **Синхронизировано**, его общее состояние будет **Сбой Синхронизации**.\
  :::

## Объяснение Состояния Здоровья

Ресурсы Kubernetes и приложения имеют шесть состояний здоровья: **Неизвестно**, **Отсутствует**, **Ухудшено**, **Приостановлено**, **В Процессе** и **Здорово**.

| **Статус Здоровья** | **Описание**                                                                                                 | **Ссылочная Солюшн**                                                                     |
| :------------------- | :------------------------------------------------------------------------------------------------------------ | :--------------------------------------------------------------------------------------- |
| **Неизвестно**       | Не удается определить состояние здоровья, обычно из-за ошибок контроллера или отсутствия данных о статусе.  | Проверьте `status.conditions` ресурса YAML для диагностической информации.               |
| **Отсутствует**      | Ресурс не найден в кластере.                                                                                | Начальное создание: ждите согласования <br /> Произвольное удаление: инициируйте ручную синхронизацию. |
| **Ухудшено**         | Ресурсы нагрузки (например, Deployment) не смогли достичь здорового состояния в течение установленного времени (по умолчанию: 10 минут). | Исследуйте сбои Pod (например, сбои, ограничения ресурсов).                              |
| **Приостановлено**   | Развертывание ресурсов нагрузки намеренно приостановлено (например, через <code>kubectl rollout pause</code>). | Возобновите развертывание, если это уместно.                                           |
| **В Процессе**       | Ресурс успешно создан, но не полностью готов (например, Pods инициализируются).                             | Наблюдайте до перехода в Здорово/Ухудшено.                                              |
| **Здорово**          | Ресурс работает нормально.                                                                                   | -                                                                                          |

:::info
**Приоритет Состояния Здоровья**: Приоритетный порядок **Неизвестно** > **Отсутствует** > **Ухудшено** > **Приостановлено** > **В Процессе** > **Здорово**

**Примеры**:

- Если у приложения есть ресурсы со статусами **Здорово** и **Неизвестно**, его общее состояние здоровья будет **Неизвестно**.
- Если `ApplicationSet` управляет приложениями со статусами **Отсутствует** и **В Процессе**, его общее состояние здоровья будет **Отсутствует**.\
  :::

## Правила Признания

Правила признания статуса **Здорово** для ресурсов Kubernetes:

| **Тип Ресурса** | **Статус**                                                                 |
| :--------------- | :------------------------------------------------------------------------- |
| **Deployment**   | Завершено обновление с завершенными всеми репликами.                      |
| **StatefulSet**  | Обновление завершено с готовыми всеми Pod.                               |
| **ReplicaSet**   | Все Pods здоровы.                                                          |
| **DaemonSet**    | Желаемое количество Pods запланировано и здорово.                        |
| **Ingress**      | IP/доменное имя LoadBalancer указаны в статусе.                          |
| **Service**      | IP/доменное имя LoadBalancer указаны (если применимо).                    |
| **PVC**          | Статус **Привязан**.                                                      |
| **Pod**          | Все контейнеры готовы без перезапусков, превышающих пороги.                |
| **Job**          | Job успешно завершён (`.status.succeeded >= 1`).                           |
| **HPA**          | Успешная операция масштабирования с текущими репликами, соответствующими желаемому количеству. |
