---
weight: 20
i18n:
  title:
    en: ACP GitOps Sync and Health Status
    zh: ACP GitOps 的同步及健康检查
title: ACP GitOps Sync and Health Status
sourceSHA: 06fdbcc3d5e8ba2245e1d4bbdfde649bd3464de2f48fa688adb935270c2dd81d
---

# ACP GitOps Sync and Health Status

ACP GitOps абстрагирует состояние ресурсов `Application`, используя статус базовых ресурсов Kubernetes. Состояние ресурсов `Application` непосредственно контролирует состояние связанных ресурсов `ApplicationSet`.

## Объяснение статуса синхронизации

Как ресурсы Kubernetes, так и приложения имеют четыре состояния синхронизации: **Синхронизация не удалась**, **ВнешняяСинхронизация**, **Синхронизация**, и **Синхронизировано**.

| **Статус синхронизации** | **Описание**                                                                                                         |
| :----------------------- | :------------------------------------------------------------------------------------------------------------------ |
| **Синхронизация не удалась** | Синхронизация не удалась из-за сетевых ошибок, проблем конфигурации или проблем с разрешениями. Проверьте журналы на предмет причины. |
| **ВнешняяСинхронизация**   | Состояние ресурсов кластера отличается от желаемого состояния, определенного в Git. Необходима ручная/автоматическая синхронизация.                              |
| **Синхронизация**         | Активное согласование между состоянием кластера и состоянием, определенным в Git.                                      |
| **Синхронизировано**      | Состояние ресурсов кластера совпадает с желаемым состоянием, определенным в Git.                                     |

:::info
**Приоритет отображения статуса синхронизации**: Приоритетный порядок **Синхронизация не удалась** > **ВнешняяСинхронизация** > **Синхронизация** > **Синхронизировано**.

**Примеры**:

- Если приложение имеет два ресурса с состояниями **Синхронизация** и **Синхронизировано**, его общий статус - **Синхронизация**.
- Если `ApplicationSet` управляет двумя приложениями с состояниями **Синхронизация не удалась** и **Синхронизировано**, его общий статус - **Синхронизация не удалась**.\
  :::

## Объяснение статуса здоровья

Ресурсы Kubernetes и приложения имеют шесть состояний здоровья: **Неизвестно**, **Отсутствует**, **Ухудшено**, **Приостановлено**, **В процессе** и **Здорово**.

| **Статус здоровья** | **Описание**                                                                                                 | **Решение для справки**                                                                     |
| :------------------ | :----------------------------------------------------------------------------------------------------------- | :------------------------------------------------------------------------------------------- |
| **Неизвестно**      | Не удается определить состояние здоровья, обычно из-за ошибок контроллера или отсутствия данных о статусе.   | Просмотрите `status.conditions` YAML ресурса для диагностики.                               |
| **Отсутствует**     | Ресурс не найден в кластере.                                                                                 | Первоначальное создание: дождитесь согласования <br /> Случайное удаление: инициируйте ручную синхронизацию. |
| **Ухудшено**        | Ресурсы нагрузки (например, Deployment) не смогли достичь здорового состояния в пределах установленного времени (по умолчанию: 10 минут). | Исследуйте сбои Pod (например, сбои, ограничение ресурсов).                                  |
| **Приостановлено**   | Разворачивание ресурсов нагрузки намеренно приостановлено (например, через <code>kubectl rollout pause</code>). | Возобновите развертывание, если это необходимо.                                            |
| **В процессе**      | Ресурс успешно создан, но не полностью готов (например, инициализирующие Pods).                              | Следите до перехода в состояние Здорово/Ухудшено.                                           |
| **Здорово**        | Ресурс работает нормально.                                                                                    | -                                                                                             |

:::info
**Приоритет статуса здоровья**: Приоритетный порядок **Неизвестно** > **Отсутствует** > **Ухудшено** > **Приостановлено** > **В процессе** > **Здорово**

**Примеры**:

- Если приложение имеет ресурсы со статусами **Здорово** и **Неизвестно**, его общее состояние здоровья - **Неизвестно**.
- Если `ApplicationSet` управляет приложениями со статусами **Отсутствует** и **В процессе**, его общее состояние здоровья - **Отсутствует**.\
  :::

## Правила признания

Правила признания состояния **Здорово** для ресурсов Kubernetes:

| **Тип ресурса** | **Статус**                                                                  |
| :-------------- | :-------------------------------------------------------------------------- |
| **Deployment**  | Роллинг-обновление завершено с доступными всеми репликами.                  |
| **StatefulSet** | Обновление завершено, и все Pod готовы.                                    |
| **ReplicaSet**  | Все Pods здоровы.                                                           |
| **DaemonSet**   | Желаемое количество Pods запланировано и здорово.                           |
| **Ingress**     | IP/имя хоста LoadBalancer заполнены в статусе.                              |
| **Service**     | IP/имя хоста LoadBalancer заполнены (если применимо).                      |
| **PVC**         | Статус - **Привязан**.                                                      |
| **Pod**         | Все контейнеры готовы без перезапусков, превышающих пороговые значения.    |
| **Job**         | Задание успешно завершено (`.status.succeeded >= 1`).                        |
| **HPA**         | Успешная операция масштабирования с текущими репликами, соответствующими желаемому количеству. |
