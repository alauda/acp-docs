---
weight: 10
i18n:
  title:
    en: Создание GitOps приложения
    zh: 创建 GitOps 的 Application
title: Создание GitOps приложения
sourceSHA: aa9e888425fffac5d1608c1878aefd1a2ccdc643f975a66705507f71489d4368
---

# Создание GitOps приложения

# Обзор

Используйте возможности управления приложениями **ACP GitOps**, чтобы визуально создать ApplicationSet Argo CD для комплексного управления жизненным циклом контейнеризованных приложений через **GitOps приложения**.

## Предварительные требования

- **Установите ACP GitOps**:
  - Если не установлено, пожалуйста, свяжитесь с администратором для [Установки ACP GitOps](/gitops/install_gitops/install_gitops_plugin.mdx)

- **Интеграция с репозиторием Git** (выберите один из методов):
  - [Интеграция кодовых репозиториев через панель управления Argo CD](../../how_to/argocd_git.mdx)
  - Администратор должен предоставить кодовые репозитории через **DevOps Toolchain** > **Интеграция**

## Создание Argo CD приложения через веб-консоль

> Упрощение распределения приложений через визуальные управляющие интерфейсы.

### Процедура

1. Перейдите в **Container Platform** и выберите **GitOps Applications**.

2. Нажмите на **Создать GitOps приложение**.

3. Настройте параметры в секциях **Основная информация** и **Кодовый репозиторий**:

| **Параметр**                | **Описание**                                                                                                                                                                                                                                                                                                                                                                                         |
| :--------------------------- | :------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **Тип**                     | **Приложение**: Объект приложения Argo CD для развертывания в одном пространстве имен <br /> **ApplicationSet**: ApplicationSet Argo CD для развертываний в кластерах/пространствах имен с различными конфигурациями                                                                                                                                                                                             |
| **Источник**                 | **Интегрированная платформа**: Предварительно настроенные репозитории GitLab/GitHub/Bitbucket <br /> **Интегрировано ArgoCD**: Репозитории GitLab/GitHub/Bitbucket/Gitee/Gitea, интегрированные через Argo CD. Пожалуйста, обратитесь к [Интеграции кодовых репозиториев через панель управления Argo CD](../../how_to/argocd_git.mdx)                                                                                                                   |
| **Имя проекта интеграции**   | Проект инструментария, назначенный администратором                                                                                                                                                                                                                                                                                                                                                          |
| **Идентификаторы версий**    | Основы развертывания: `Branch`/`Tag`/`Commit`<br />**Примечание**:<ul><li>`Branch` использует последнюю фиксацию<br /></li><li>`Tag`/`Commit` по умолчанию устанавливает последнюю версию, но может быть настроен</li></ul>                                                                                                                                                                                                                                   |
| **Тип файла источника**      | **Kustomize**: Использует kustomization.yaml для наложения конфигураций; для получения дополнительной информации, пожалуйста, обратитесь к [Официальной документации Kustomize](https://kubectl.docs.kubernetes.io/guides/) <br />**Helm**: Использует values.yaml для шаблонов; для получения дополнительной информации, пожалуйста, обратитесь к [Официальной документации Helm](https://helm.sh/docs/chart_template_guide/values_files/) <br />**Каталог**: Сырые манифесты |
| **Исходный каталог**         | Путь к репозиторию, содержащий базовые манифесты. Поддерживает выбор корневого каталога. Все ресурсы в этом пути будут развернуты в целевых кластерах                                                                                                                                                                                                                                                             |
| **Пользовательские значения** | Если **Тип файла источника** **Helm**, вы можете выбрать пользовательский файл значений Helm                                                                                                                                                                                                                                                                                                                               |

4. Настройте параметры в секциях **Назначение**:

   - **Приложение**: Дифференциальные конфигурации не изменяют базовые файлы в исходном каталоге.

   - **ApplicationSet**: Много кластерное развертывание с **Дифференцированной конфигурацией**.

   **Примечание**: **Дифференцированная конфигурация** не изменяет базовые файлы в **Исходном каталоге**.

5. **Политика синхронизации** (интервал согласования 3 минуты).

   | **Параметр**                 | **Описание**                                                                                                                                                                          |
   | :---------------------------- | :--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
   | **Ручная синхронизация**     | Требуется подтверждение пользователя при обнаружении отклонения.                                                                                                                                          |
   | **Автоматическая синхронизация** | Автоматическое согласование без человеческого вмешательства.                                                                                                                                     |
   | **Игнорировать конфигурацию синхронизации** | Настройка с использованием встроенных/пользовательских шаблонов игнорирования, вы можете [Просмотреть поля конфигурации игнорирования синхронизации в YAML файле](#viewyaml).<br /> **Примечание**: Пользовательские шаблоны требуют настройки администратора. |

6. Нажмите **Создать**.

:::info
**Примечание по ручной синхронизации**: Выберите **Синхронизировать немедленно** для немедленного развертывания или **Синхронизировать позже**, чтобы вызвать вручную через страницу деталей.
:::

<a id="viewyaml" />

### Просмотр полей конфигурации игнорирования синхронизации в YAML файле

После настройки правил игнорирования синхронизации проверьте через:

1. Перейдите в **GitOps приложение**

2. Выберите целевое приложение

3. Нажмите **Действие > Обновить**

4. Проверьте YAML файл.

```yaml
ignoreDifferences: # Конфигурация, фактически игнорируемая выбранным шаблоном пользовательской синхронизации игнорирования
- group: apps
  kind: Deployment
  jsonPointers:
  - /spec/replicas
```

## Создание Argo CD приложения через YAML

### Процедура

1. Перейдите в **Container Platform** и выберите **GitOps Applications**.

2. Нажмите на **Создать GitOps приложение**.

3. Переключитесь на вкладку **YAML**.

4. В секции **YAML** обратитесь к следующему YAML файлу и настройте соответствующую информацию. Замените `namespace` и `project` на свое пространство имен и проект.

```yaml
apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  name: guestbook
  namespace: argocd # Замените на свое пространство имен
spec:
  project: default # Замените на свой проект
  source:
    repoURL: https://github.com/argoproj/argocd-example-apps.git
    targetRevision: master
    path: helm-guestbook
  destination:
    server: https://kubernetes.default.svc
    namespace: guestbook
  syncPolicy:
    automated:
      prune: true
      selfHeal: true
    syncOptions:
    - CreateNamespace=true
```

5. Нажмите **Создать**.

## Создание Argo CD приложения через CLI

### Предварительные требования

Плагин веб-клиента установлен и переключатель `web-cli` включен.

```bash
kubectl apply -f application.yaml
```
