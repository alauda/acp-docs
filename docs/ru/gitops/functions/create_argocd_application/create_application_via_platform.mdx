---
weight: 10
i18n:
  title:
    en: Создание GitOps приложения
    zh: 创建 GitOps 的 Application
title: Создание GitOps приложения
sourceSHA: aa9e888425fffac5d1608c1878aefd1a2ccdc643f975a66705507f71489d4368
---

# Создание GitOps приложения

# Обзор

Используйте возможности управления приложениями **ACP GitOps** для визуального создания Argo CD ApplicationSet для комплексного управления жизненным циклом контейнеризированных приложений через **GitOps приложения**.

## Предварительные условия

- **Установите ACP GitOps**:
  - Если не установлено, обратитесь к администратору для [установки ACP GitOps](/gitops/install_gitops/install_gitops_plugin.mdx)

- **Интеграция с Git репозиторами** (выберите один метод):
  - [Интеграция кодовых репозиториев через панель управления Argo CD](../../how_to/argocd_git.mdx)
  - Администратор должен предоставить кодовые репозитории через **DevOps Toolchain** > **Интеграция**

## Создание Argo CD приложения через веб-консоль

> Оптимизируйте распределение приложений через визуальные интерфейсы управления.

### Процедура

1. **Контейнерная платформа**, и перейдите к **GitOps приложениям**.

2. Нажмите на **Создать GitOps приложение**.

3. Настройте параметры в разделах **Основная информация** и **Кодовый репозиторий**:

| **Параметр**                 | **Описание**                                                                                                                                  |
| :---------------------------  | :------------------------------------------------------------------------------------------------------------------------------------------- |
| **Тип**                       | **Приложение**: объект Argo CD Application для развертывания в одном пространстве имен <br /> **ApplicationSet**: Argo CD ApplicationSet для развертывания на разных кластерах/в разных пространствах имен с дифференцированными конфигурациями |
| **Источник**                  | **Интегрированная платформа**: Предварительно настроенные репозитории GitLab/GitHub/Bitbucket <br /> **Интегрированный ArgoCD**: репозитории GitLab/GitHub/Bitbucket/Gitee/Gitea, интегрированные через Argo CD. Пожалуйста, ознакомьтесь с [Интеграцией кодовых репозиториев через панель управления Argo CD](../../how_to/argocd_git.mdx) |
| **Название интеграционного проекта** | Проект инструментов, назначенный администратором                                                                                                    |
| **Идентификаторы версии**     | Основа развертывания: `Branch`/`Tag`/`Commit`<br />**Примечание**:<ul><li>`Branch` использует последний коммит<br /></li><li>`Tag`/`Commit` по умолчанию использует последний, но его можно настроить</li></ul> |
| **Тип файла источника**       | **Kustomize**: использует kustomization.yaml для наложенных конфигураций; для получения дополнительных сведений обратитесь к [Официальной документации Kustomize](https://kubectl.docs.kubernetes.io/guides/) <br />**Helm**: использует values.yaml для шаблонизации; для получения дополнительных сведений обратитесь к [Официальной документации Helm](https://helm.sh/docs/chart_template_guide/values_files/) <br />**Каталог**: необработанные манифесты |
| **Директория источника**      | Путь репозитория, содержащий базовые манифесты. Поддерживается выбор корневого каталога. Все ресурсы в этом пути будут развернуты в целевые кластеры                      |
| **Пользовательские значения**  | Если **Тип файла источника** равен **Helm**, вы можете выбрать файл пользовательских значений Helm                                                    |

4. Настройте параметры в разделе **Назначение**:

   - **Приложение**: Дифференцированные конфигурации не изменяют базовые файлы в исходной директории.

   - **ApplicationSet**: Много-кластерное развертывание с **Дифференцированной конфигурацией**.

   **Примечание**: **Дифференцированная конфигурация** не изменяет базовые файлы в **Исходной директории**.

5. **Политика синхронизации** (интервал сверки 3 минуты).

   | **Параметр**                 | **Описание**                                                                                                                                                                          |
   | :---------------------------- | :--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
   | **Ручная синхронизация**      | Требует подтверждения пользователя при обнаружении отклонения.                                                                                                                                          |
   | **Автоматическая синхронизация** | Автоматическая сверка без человеческого вмешательства.                                                                                                                                     |
   | **Игнорировать конфигурацию синхронизации** | Настройка с использованием встроенных/настраиваемых шаблонов игнорирования, вы можете [Просмотреть поля конфигурации игнорирования синхронизации в YAML-файле](#viewyaml).<br /> **Примечание**: Пользовательские шаблоны требуют настройки администратора. |

6. Нажмите **Создать**.

:::info
**Примечание о ручной синхронизации**: Выберите **Синхронизировать немедленно** для немедленного развертывания или **Синхронизировать позже**, чтобы вызвать вручную через страницу сведений.
:::

<a id="viewyaml" />

### Просмотр полей конфигурации игнорирования синхронизации в YAML-файле

После настройки правил игнорирования синхронизации проверьте:

1. Перейдите к **GitOps приложению**

2. Выберите целевое приложение

3. Щелкните **Действие > Обновить**

4. Просмотрите YAML-файл.

```yaml
ignoreDifferences: # Конфигурация, фактически игнорируемая выбранным шаблоном пользовательской конфигурации игнорирования синхронизации
- group: apps
  kind: Deployment
  jsonPointers:
  - /spec/replicas
```

## Создание Argo CD приложения через YAML

### Процедура

1. **Контейнерная платформа**, и перейдите к **GitOps приложениям**.

2. Нажмите на **Создать GitOps приложение**.

3. Переключитесь на вкладку **YAML**.

4. В секции **YAML** обратитесь к следующему YAML-файлу и настройте соответствующую информацию. Замените `namespace` и `project` на ваше пространство имен и проект.

```yaml
apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  name: guestbook
  namespace: argocd # Замените на ваше пространство имен
spec:
  project: default # Замените на ваш проект
  source:
    repoURL: https://github.com/argoproj/argocd-example-apps.git
    targetRevision: master
    path: helm-guestbook
  destination:
    server: https://kubernetes.default.svc
    namespace: guestbook
  syncPolicy:
    automated:
      prune: true
      selfHeal: true
    syncOptions:
    - CreateNamespace=true
```

5. Нажмите **Создать**.

## Создание Argo CD приложения через CLI

### Предварительные условия

Плагин web-cli установлен и переключатель `web-cli` включен.

```bash
kubectl apply -f application.yaml
```
