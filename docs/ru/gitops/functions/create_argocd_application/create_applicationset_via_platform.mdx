---
weight: 10
i18n:
  title:
    en: Создание GitOps ApplicationSet
    zh: 创建 GitOps 的 ApplicationSet
title: Создание GitOps ApplicationSet
sourceSHA: fc42ba7fbf448f4dfa0525e8bcbec8d0a96413f23fe32a14a1e7b532115c0a71
---

# Создание GitOps ApplicationSet

## Обзор

Используйте возможности управления приложениями **ACP GitOps** для визуального создания Argo CD ApplicationSet для комплексного управления жизненным циклом контейнеризованных приложений с помощью **GitOps Applications**.

## Предварительные требования

- **Установка ACP GitOps**:
  - Если не установлено, обратитесь к администратору для [Установки ACP GitOps](/gitops/install_gitops/install_gitops_plugin.mdx)

- **Интеграция с репозиториями Git** (выберите один из методов):
  - [Интеграция кодовых репозиториев через интерфейс Argo CD](../../how_to/argocd_git.mdx)
  - Администратор должен настроить кодовые репозитории через **DevOps Toolchain** > **Integrate**

## Ключевые преимущества

- **Визуальное распределение GitOps приложений**: включает в себя управление несколькими кластерами, дифференциальные настройки и визуальные операции, соответствующие платформе, для упрощения развертывания в мультиоблаках/мультиэкземплярах.

## Создание GitOps приложения

> Упростите распределение приложений с помощью визуальных интерфейсов управления.

### Процедура

1. **Платформа контейнеров**, и перейдите в **GitOps Applications**.

2. Нажмите **Создать GitOps приложение**.

3. Настройте параметры в разделах **Основная информация** и **Кодовый репозиторий**:

| **Параметр**                | **Описание**                                                                                                                                                                                                                                                                                                                                                                                            |
| :--------------------------- | :--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **Тип**                     | **Приложение**: объект Argo CD Application для развертывания в одном пространстве имен <br /> **ApplicationSet**: Argo CD ApplicationSet для развертывания между кластерами/пространствами имен с дифференциальными настройками                                                                                                                                                                                               |
| **Источник**                   | **Интегрированная платформа**: Предварительно настроенные репозитории GitLab/GitHub/Bitbucket <br /> **Интегрированный ArgoCD**: Репозитории GitLab/GitHub/Bitbucket/Gitee/Gitea, интегрированные с помощью Argo CD. Пожалуйста, обратитесь к [Интеграции кодовых репозиториев через интерфейс Argo CD](../../how_to/argocd_git.mdx)                                                                                                                     |
| **Имя интеграционного проекта** | Проект инструментов, назначенный администратором                                                                                                                                                                                                                                                                                                                                                            |
| **Идентификаторы версии**      | Основание развертывания: `Branch`/`Tag`/`Commit` <br /> **Примечание**:<ul><li>`Branch` использует последний коммит</li><li>`Tag`/`Commit` по умолчанию является последним, но может быть настроен</li></ul>                                                                                                                                                                                                                                          |
| **Тип файла источника**         | **Kustomize**: Использует `kustomization.yaml` для оверлейных настроек; для получения дополнительной информации, пожалуйста, обратитесь к [Официальной документации Kustomize](https://kubectl.docs.kubernetes.io/guides/) <br />**Helm**: Использует values.yaml для шаблонизации; для получения дополнительной информации, пожалуйста, обратитесь к [Официальной документации Helm](https://helm.sh/docs/chart_template_guide/values_files/) <br />**Каталог**: сырые манифесты |
| **Исходный каталог**         | Путь к репозиторию, содержащему базовые манифесты. Поддерживает выбор корневого каталога. Все ресурсы в этом пути будут развернуты в целевых кластерах                                                                                                                                                                                                                                                               |
| **Пользовательские значения**            | Если **Тип файла источника** **Helm**, вы можете выбрать пользовательский файл значений Helm                                                                                                                                                                                                                                                                                                                                 |

4. Настройте параметры в разделах **Назначение**:

   - **Приложение**: Дифференциальные настройки не изменяют базовые файлы в каталоге источника.

   - **ApplicationSet**: Многокластерное развертывание с **Дифференцированной настройкой**.

   **Примечание**: **Дифференцированная настройка** не изменяет базовые файлы в **Исходном каталоге**.

5. **Политика синхронизации** (интервал согласования 3 минуты).

   | **Параметр**                 | **Описание**                                                                                                                                                                         |
   | :---------------------------- | :-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
   | **Ручная синхронизация**             | Требует подтверждения пользователя при обнаружении отклонений                                                                                                                                          |
   | **Автоматическая синхронизация**            | Автоматическое согласование без вмешательства человека                                                                                                                                     |
   | **Игнорирование конфигурации синхронизации** | Настройте с помощью встроенных/пользовательских шаблонов игнорирования, вы можете [Просмотреть поля конфигурации игнорирования синхронизации в YAML-файле](#viewyaml) <br /> **Примечание**: Пользовательские шаблоны требуют настройки администратором |

6. Нажмите **Создать**.

:::info
**Примечание по ручной синхронизации**: Выберите **Синхронизировать немедленно** для немедленного развертывания или **Синхронизировать позже**, чтобы запустить вручную через страницу деталей.
:::

<a id="viewyaml" />

### Просмотр полей конфигурации игнорирования синхронизации в YAML-файле

После настройки правил игнорирования синхронизации проверьте через:

1. Перейдите к **GitOps Application**.

2. Выберите целевое приложение.

3. Нажмите **Действие** > **Обновить**.

4. Проверьте файл YAML.

```yaml
ignoreDifferences: # Конфигурация, фактически игнорируемая выбранным пользовательским шаблоном конфигурации игнорирования синхронизации
- group: apps
  kind: Deployment
  jsonPointers:
  - /spec/replicas
```

## Управление GitOps приложениями

| **Действие**                   | **Описание**                                                                                                                                                                                                             |
| :--------------------------- | :-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **Обновить**                   | Инициируйте обновления через:<ul><li>Иконка редактирования (✎) в списке **GitOps Applications** </li><li> **Действие** > **Обновить** в детальном представлении. </li><li>**ОСТОРОЖНО**: Эта операция перезапишет все созданные экземпляры приложения</li></ul> |
| **Ручная синхронизация**            | Когда **Политика синхронизации** установлена на **Ручная синхронизация** :<ul><li> Запустите синхронизацию через **Действие** > **Синхронизировать** в детальном представлении при обнаружении отклонения конфигурации </li><li> Обновляет последние коммиты во всех управляемых экземплярах</li></ul>         |
| **Удалить**                   | Удалите через: <ul><li>Иконка удаления (🗑) на странице списка</li><li>**Действие** > **Удалить** в детальном представлении</li><li>**УНИЧТОЖЕНИЕ**: Удаляет приложение и все дочерние ресурсы</li></ul>                                             |
| **Автоматическая синхронизация**           | Включите автоматическое согласование для поддержания желаемого состояния. Все экземпляры автоматически синхронизируются с изменениями в репозитории каждые 3 минуты                                                                                                    |
| **Источник**                   | Для приложений типа **ApplicationSet**: <ul><li>Нажмите на ссылку **Источник**, чтобы перейти к странице деталей родительского приложения. </li></ul>                                                                                                  |
| **Распределение приложений** | Расширьте:<br />1. Обновите существующую конфигурацию **ApplicationSet** <br />2. В деталях **ApplicationSet**: **Приложения** > **Добавить распределение**                                                                                   |
