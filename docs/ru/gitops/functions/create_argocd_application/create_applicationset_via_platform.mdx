---
weight: 10
i18n:
  title:
    en: Создание GitOps ApplicationSet
    zh: 创建 GitOps 的 ApplicationSet
title: Создание GitOps ApplicationSet
sourceSHA: fc42ba7fbf448f4dfa0525e8bcbec8d0a96413f23fe32a14a1e7b532115c0a71
---

# Создание GitOps ApplicationSet

## Обзор

Используйте возможности управления приложениями **ACP GitOps** для визуального создания Argo CD ApplicationSet для комплексного управления жизненным циклом контейнеризованных приложений через **GitOps Applications**.

## Предварительные условия

- **Установка ACP GitOps**:
  - Если не установлено, обратитесь к администратору для [установки ACP GitOps](/gitops/install_gitops/install_gitops_plugin.mdx)

- **Интеграция с репозиториями Git** (выберите один из методов):
  - [Интеграция репозиториев кода через панель управления Argo CD](../../how_to/argocd_git.mdx)
  - Администратор должен предоставить репозитории кода через **DevOps Toolchain** > **Integrate**

## Ключевые преимущества

- **Визуальное распределение GitOps приложений**: объединяет управление многими кластерами, дифференцированные конфигурации и визуальные операции, согласованные с платформой, для упрощенного развертывания в многократных облаках и средах.

## Создание GitOps приложения

> Упрощение распределения приложений через визуальные интерфейсы управления.

### Процедура

1. Перейдите на **Container Platform** и выберите **GitOps Applications**.

2. Нажмите на **Создать GitOps приложение**.

3. Настройте параметры в разделах **Основная информация** и **Код репозитория**:

| **Параметр**                | **Описание**                                                                                                                                                                                                                                                                                                                                                                                            |
| :--------------------------- | :--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **Тип**                     | **Приложение**: объект Argo CD Application для развертывания в одном пространстве имен <br /> **ApplicationSet**: набор приложений Argo CD для развертываний через кластеры/пространства имен с дифференцированными конфигурациями                                                                                                                                                                                               |
| **Источник**                   | **Интегрировано с платформой**: предварительно настроенные репозитории GitLab/GitHub/Bitbucket <br /> **Интегрировано с ArgoCD**: репозитории GitLab/GitHub/Bitbucket/Gitee/Gitea, интегрированные через Argo CD. Пожалуйста, ознакомьтесь с [интеграцией репозиториев кода через панель управления Argo CD](../../how_to/argocd_git.mdx)                                                                                                                     |
| **Название интеграционного проекта** | Проект инструментов, назначенный администратором                                                                                                                                                                                                                                                                                                                                                            |
| **Идентификаторы версий**      | Основы для развертывания: `Branch`/`Tag`/`Commit` <br />**Примечание**:<ul><li>`Branch` использует последний коммит</li><li>`Tag`/`Commit` по умолчанию устанавливается на последний, но может быть настроен</li></ul>                                                                                                                                                                                                                                          |
| **Тип исходного файла**         | **Kustomize**: использует `kustomization.yaml` для дополнительных конфигураций; для получения дополнительных сведений, пожалуйста, обратитесь к [официальной документации Kustomize](https://kubectl.docs.kubernetes.io/guides/) <br />**Helm**: использует values.yaml для шаблонирования; для получения дополнительных сведений, пожалуйста, обратитесь к [официальной документации Helm](https://helm.sh/docs/chart_template_guide/values_files/) <br />**Directory**: исходные манифесты |
| **Исходный каталог**         | Путь к репозиторию, содержащему базовые манифесты. Поддерживается выбор корневого каталога. Все ресурсы в этом пути будут развернуты в целевых кластерах                                                                                                                                                                                                                                                               |
| **Пользовательские значения**            | Если **Тип исходного файла** это **Helm**, вы можете выбрать пользовательский файл значений Helm                                                                                                                                                                                                                                                                                                                                 |

4. Настройте параметры в разделах **Назначение**:

   - **Приложение**: Дифференцированные конфигурации не изменяют базовые файлы в исходном каталоге.

   - **ApplicationSet**: Развертывание через несколько кластеров с **Дифференцированной конфигурацией**.

   **Примечание**: **Дифференцированная конфигурация** не изменяет базовые файлы в **Исходном каталоге**.

5. **Политика синхронизации** (интервал согласования 3 минуты).

   | **Параметр**                 | **Описание**                                                                                                                                                                         |
   | :---------------------------- | :-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
   | **Ручная синхронизация**             | Требует подтверждения пользователя при обнаружении отклонений                                                                                                                                          |
   | **Автоматическая синхронизация**            | Автоматическое согласование без участия человека                                                                                                                                     |
   | **Игнорировать конфигурацию синхронизации** | Настройка с использованием встроенных/пользовательских шаблонов игнорирования, вы можете [Просмотреть поля конфигурации игнорирования синхронизации в YAML файле](#viewyaml) <br /> **Примечание**: Пользовательские шаблоны требуют настройки администратором |

6. Нажмите **Создать**.

:::info
**Примечание о ручной синхронизации**: выберите **Синхронизировать немедленно** для немедленного развертывания или **Синхронизировать позже**, чтобы запустить вручную через страницу подробностей.
:::

<a id="viewyaml" />

### Просмотр полей конфигурации игнорирования синхронизации в YAML файле

После настройки правил игнорирования синхронизации проверьте через:

1. Перейдите на **GitOps приложение**.

2. Выберите целевое приложение.

3. Нажмите **Действие** > **Обновить**.

4. Проверьте файл YAML.

```yaml
ignoreDifferences: # Конфигурация, которая на самом деле игнорируется выбранным шаблоном пользовательского игнорирования синхронизации
- group: apps
  kind: Deployment
  jsonPointers:
  - /spec/replicas
```

## Управление GitOps приложениями

| **Действие**                   | **Описание**                                                                                                                                                                                                             |
| :--------------------------- | :-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **Обновить**                   | Инициируйте обновления через:<ul><li>Значок редактирования (✎) в списке **GitOps Application** </li><li> **Действие** > **Обновить** в представлении деталей. </li><li>**ОСТОРОЖНО**: Эта операция перезапишет все созданные экземпляры приложений</li></ul> |
| **Ручная синхронизация**            | Когда **Политика синхронизации** установлена на **Ручную синхронизацию** :<ul><li> Запустите синхронизацию через **Действие** > **Синхронизировать** в представлении деталей при обнаружении отклонений в конфигурации </li><li> Последние коммиты распространяются на все управляемые экземпляры</li></ul>         |
| **Удалить**                   | Удалите через: <ul><li>Значок удаления (🗑) на странице списка</li><li>**Действие** > **Удалить** в представлении деталей</li><li>**УНИЧТОЖИТЕЛЬНО**: Удаляет приложение и ВСЕ дочерние ресурсы</li></ul>                                             |
| **Автоматическая синхронизация**           | Включите автоматическое согласование для поддержания желаемого состояния. Все экземпляры автоматически синхронизируются с изменениями репозитория каждые 3 минуты                                                                                                    |
| **Источник**                   | Для приложений типа **ApplicationSet**: <ul><li>Нажмите на ссылку **Источник**, чтобы перейти на страницу деталей родительского приложения. </li></ul>                                                                                                  |
| **Распределение приложений** | Расширьте:<br />1. Обновите существующую конфигурацию **ApplicationSet** <br />2. В деталях **ApplicationSet**: **Приложения** > **Добавить распределение**                                                                                   |
