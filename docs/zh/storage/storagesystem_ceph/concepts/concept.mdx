---
weight: 10
---

# 核心概念

## Rook Operator

Rook Operator 是一个简单的容器，包含了启动和监控存储集群所需的所有组件。Operator 会启动并监控 Ceph MON Pods、Ceph OSD 守护进程以提供 RADOS 存储，同时还会启动和管理其他 Ceph 守护进程。Operator 通过管理存储池、对象存储（S3/Swift）以及文件系统的 CRDs 来初始化运行服务所需的 Pods 和其他资源。

Operator 会监控存储守护进程，以确保集群的健康状态。Ceph MON 会在必要时启动或进行故障转移，同时随着集群的扩展或收缩进行其他调整。Operator 还会监视 Ceph 自定义资源（CRs）中指定的期望状态变更，并应用这些变更。

Rook 会自动配置 Ceph-CSI 驱动，将存储挂载到您的 Pods 中。rook/ceph 镜像包含了管理集群所需的所有工具。

## Ceph CSI

Ceph CSI 插件实现了支持 CSI 的容器编排器（CO）与 Ceph 集群之间的接口。它们支持动态配置 Ceph 卷并将其挂载到工作负载中。

## Ceph 模块功能

| 模块 | 功能描述 |
| :--- | :---|
| MON | 监视器（Monitor，MON）在 Ceph 集群中扮演领导者的角色，维护了整个集群的状态，是 Ceph 集群中最重要的组件。MON 保证集群的相关组件在同一时刻能够达成一致，相当于集群的领导层，由 MON 守护进程负责收集、更新和发布集群信息。|
| MGR | 管理器（Manager，MGR），主要功能是一个监控系统，包含采集、存储、分析（包含报警）和可视化几部分，用于把集群的一些指标暴露给外界使用。通常来说，Ceph 的 Manager 守护进程与 MON daemon 一起运行，MGR 可以分担和拓展 MON 节点的部分功能，减轻 MON 节点的负担。|
| OSD | 对象存储设备（Object Storage Device，OSD）是Ceph存储集群的核心，由对应的守护进程（ OSD daemon）执行实际存储数据的过程，通常一个 OSD daemon 绑定一个物理磁盘。在 Ceph 中，每一个对象都会存储在 OSD 中，OSD 会在存储设备中进行读/写与复制操作。OSD daemon 会检查自己和其他 OSD 的状态，并报告给 MON。|
| MDS | 元数据服务（Metadata server，MDS），跟踪文件层次结构并存储只供 CephFS 使用的元数据，使简单的文件系统操作不会影响 OSD daemon 的负担。MDS 的目的是将所有文件系统元数据(目录、文件所有权、访问模式等) 与数据分离，使 Ceph 文件系统可以在不增加 Ceph 存储集群负担的情况下提供高性能的服务。其中，Ceph 块设备和 RADOS 网关不需要元数据。MDS 不直接给 Client 提供数据服务。|
| RGW | Ceph 对象存储，也被称为 RADOS 对象网关（RADOS Gateway，RGW），是 Ceph 集群对外提供对象存储服务的一个网关。RGW 为客户端访问 Ceph 集群提供了一个兼容 S3 和 Swift 的 RESTful API 接口。|
| RADOS | 可靠自修复分布式对象存储（Reliable Autonomic Distributed Object Store，RADOS），也叫 Ceph 存储集群，是 Ceph 存储集群的基础，其关键特性包括数据高可靠性与对于故障的自修复能力等内容。Ceph 以 RADOS 对象的形式将数据进行管理，每个对象都有自己的命名、属性及可变大小的数据有效负载内容，而 RADOS 负责将这些对象存储在对象池中并进行管理。一个基本的 RADOS 系统由大量 OSD 和一部分负责管理 OSD 集群成员的 MON 节点组成。RADOS 在允许节点半自主地通过小集群图来进行自管理复制、故障检测和故障恢复的同时，也确保了数据一致性与语义安全。|
| LIBRADOS | Librados 是客户端操作 RADOS 对象存储的接口，客户端可以通过 Librados API 来访问 Ceph 存储集群，与其中的 MON daemon 和 OSD daemon 进行交互，目前提供了 PHP、Ruby、Java、Python、C 和 C++ 等语言接口。|
| RBD | Ceph 块设备（RADOS Block Device，RBD），对外提供块存储。Ceph 通过划分块设备以获取高性能，并使设备可以像磁盘一样被映射、格式化和挂载到服务器上。|
| CephFS | Ceph 文件系统（ Ceph File System，CephFS）在基于对象的 Ceph 存储集群之上，提供了一个兼容 POSIX 的分布式文件系统。CephFS 文件会被映射为Ceph存储集群中的对象，CephFS 依赖 Ceph MDS 来跟踪管理文件层次结构等内容，即文件元数据与文件数据分离。|