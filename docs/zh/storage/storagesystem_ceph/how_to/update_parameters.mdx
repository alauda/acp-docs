---
weight: 67
---

# 更新优化参数

平台支持在创建存储集群时以 Ceph 配置文件格式填写优化参数，但创建后未提供界面修改方式，您需根据以下方案手动更新。

## 操作步骤
        
1. 您需先将存储优化的参数更新至名为 `rook-config-override-user` 的 Configmap 中，替换 `.data.config` 字段，并将 ` .metadata.annotations[rook.cpaas.io/need-sync]` 字段值设置为 `true`，举例如下：

    ```
    apiVersion: v1
    data:
      config: |
        [global]
        mon_memory_target=1073741824
        mds_cache_memory_limit=2147483648
        osd_memory_target=4147483648
    kind: ConfigMap
    metadata:
      annotations:
        cpaas.io/creator: admin
        cpaas.io/updated-at: "2022-03-01T12:24:04Z"
        rook.cpaas.io/need-sync: "true"
        rook.cpaas.io/sync-status: synced
      creationTimestamp: "2022-03-01T12:24:04Z"
      finalizers:
      - rook.cpaas.io/config-merge
      name: rook-config-override-user
      namespace: default
      resourceVersion: "38816864"
      uid: ce3a8f3e-6453-4bdd-bff0-e16cf7d5d5fa
    ```

2. 在 rook-ceph-tools 的 Pod 中执行 `ceph tell [mon|osd|mgr|mds|rgw].* config set [key] [value] ` 来实时生效配置。

3. 若要启动 tools 的 Pod，需要编辑 rook-ceph 命名空间下的 ClusterServiceVersion (CSV)，将 Deployments 部分的 rook-ceph-tools 的 replicas 值设置为 1。

