---
weight: 10
sourceSHA: 83344fbc7fba2b7878b5ac3f064e8056c3e7a2515dbe5c02378072b2a47b51db
---

# 数据灾难恢复

MinIO 支持通过远程数据备份或双活部署的方式建立灾难恢复中心，以确保灾难发生时原有数据不会丢失或遭到损坏，从而保证数据的安全性和可靠性。

## 适用场景

- **热备**：在同城市或不同地点存在两个数据中心，一个为主中心，一个为备中心。数据实时从主集群复制到备集群，以确保数据一致性。当主集群发生灾难时，业务流量可以无缝切换到备集群，以确保业务的连续性。

- **市级双活**：在市级双活（多集群）架构中，存在两个位于不同集群的数据中心。两个数据中心均处于活动状态，能够同时接收业务流量。当其中一个数据中心遭遇灾难时，业务可以在另一个数据中心不间断地继续运行。

## 名词解释

- **主集群**：指当前处于活动状态且正在处理业务请求的集群。它是数据的源头或操作的发起者。在主集群中，数据被创建、修改或更新，业务流量首先发送到这个集群进行处理。

- **目标集群**：指接收数据复制、迁移或故障转移的集群。它通常处于备份或待命状态，准备接收来自主集群的数据或接管业务流量。当主集群发生故障或需要切换时，目标集群将接收来自主集群的数据副本或接管业务流量，以确保业务连续性。在双活场景中，两集群可以相互作为对方的目标集群。

## 前提条件

- 主集群和目标集群必须启用外网访问。具体配置方法请参考 [创建对象存储](/storage/storagesystem_minio/installation.mdx)。

- 主集群必须使用 **LoadBalancer** 访问方式，而目标集群建议支持 **负载均衡** 功能。

- 主集群和目标集群必须使用相同的访问协议，即均使用 HTTP 或均使用 HTTPS。

- 使用 HTTPS 协议时，主集群和目标集群需要分别配置自身及对方的 DNS 解析。

- 使用 HTTPS 协议时，建议主集群和目标集群使用 CA 签发的证书，以确保通信安全和信任；如果使用自签名证书，则需要双方相互导入并信任对方的自签名证书，以便成功建立安全的 HTTPS 连接。

## 操作步骤

1. 进入 **平台管理**。

2. 在左侧导航栏中，单击 **存储管理** > **对象存储**。

3. 在 **数据灾难恢复** 页签下，单击 **添加目标集群**。

4. 根据以下说明配置目标集群的相关参数。

   | 参数               | 说明                                                                                                                                                                                          |
   |--------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
   | **访问地址**      | 目标集群的外网访问地址，以 http:// 或 https:// 开头。                                                                                                                                   |
   | **Access Key**     | 目标集群的访问密钥 ID。与私有访问密钥关联的唯一标识符；与私有访问密钥一起使用，对请求进行加密。                                                                                               |
   | **Secret Key**     | 与访问密钥 ID 结合使用的私有访问密钥，用于加密请求、标识发送方并防止请求被修改。                                                                                                            |

5. 单击 **添加**。

   - 添加成功后，将能够查看目标集群的状态以及集群间的同步状态。

     | 参数                  | 说明                                                                                                                                                                                        |
     |-----------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
     | **集群状态**          | 目标集群的状态，包括 **健康**、**异常** 或 **未知**。                                                                                                                                 |
     | **存储桶**            | 待同步和已同步的存储桶数量。<br /><ul><li>在热备场景中，待同步的数量是主集群需要同步到目标集群的存储桶数量。</li><li>在市级双活场景中，待同步的数量是主集群和目标集群之间需要同步的存储桶总数。</li></ul> |
     | **对象**              | 存储桶中同步失败的对象数量。<br />**说明**：此数量仅供参考，因 MinIO 在同步过程中会同步相关的文件配置。                                                                                     |
     | **网络流量速率**      | 主集群的网络入口和出口速率。<br /><ul><li>在热备场景中，网络入口速率始终为 0。</li><li>在市级双活场景中，入口和出口速率均有数据。</li></ul>                                                 |

   - 如果目标集群添加失败，可以单击 **重新添加** 清除集群信息并返回添加目标集群页面，以便重新添加目标集群。

## 相关操作

当不再需要数据灾难恢复时，可以单击 **移除目标集群**。移除目标集群不会删除已同步的数据；如果有数据正在同步，将会被中断。
