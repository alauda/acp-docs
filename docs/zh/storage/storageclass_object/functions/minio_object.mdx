---
weight: 20
---

# 创建 MinIO 对象存储类型存储类


MinIO 对象存储可为平台提供基于 MinIO 存储集群提供安全可靠、可扩展的共享文件存储服务，适用于文件共享、数据备份等场景。

## 名词解释

|名词| 全称  |  描述 |
| ---- | ---- | ---- |
|**COSI**|Container Object Storage Interface|容器对象存储接口，它的目标是成为跨多个对象存储供应商的公共抽象层，动态地为工作负载提供对象存储服务，同时第三方存储厂商也可以使用 COSI 编写插件，从而在 Kubernetes 中暴露为新的存储系统，无需修改 Kubernetes 的核心代码。|

## 功能比较

<table border="1" cellspacing="0">
    <thead>
        <tr>
            <th>存储类名称</th>
            <th>适用场景及功能</th>
            <th>接入方式</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>MinIO 对象存储 </td>
            <td><ul><li>需安装 MinIO 对象存储卷插件。</li><li>MinIO 是一个轻量级对象存储系统，旨在提供高性能、低延迟的对象存储服务，适合需要快速访问和检索数据的场景。</li></ul></td>
            <td rowSpan={2}>基于 COSI 的存储接入方式。</td>
        </tr>
        <tr>
            <td>Ceph 对象存储</td>
            <td><ul><li>需安装 Ceph 对象存储卷插件。</li><li>Ceph 是一个复杂的存储系统，其设计目标更为广泛，适用于多种存储需求，包括块存储、对象存储、文件存储，由于其复杂性，Ceph 可以应对更复杂的业务场景。</li></ul></td>
        </tr>
    </tbody>
</table>

## 前提条件

使用下述任意一种方式，提前准备 MinIO 存储服务。

* 使用平台内部的 MinIO 存储服务，具体请参考 [创建对象存储](/storage/storagesystem_minio/functions/create_minio.mdx)。

* 使用平台外部的 MinIO 存储服务。

## 操作步骤

### 部署容器对象存储接口插件

为使用对象存储功能，您须首先部署容器对象存储接口插件。

1. 进入 **平台管理**。

1. 在左侧导航栏中，单击 **集群管理** > **集群**。

2. 单击待部署组件的 ***集群的名称***。

3. 在 **插件** 页签下，单击 **容器对象存储接口** 右侧的 ⋮ > **部署**。

5. 等待部署状态为 **部署成功** 后完成部署。


### 部署卷插件

1. 在左侧导航栏中，单击 **存储管理** > **对象存储类**。

2. 单击 **创建对象存储类**。

2. 单击 **MinIO 对象存储** 卡片上的 **部署**。

3. 在 **插件** 页签下，单击右侧的 ⋮ > **部署**。

5. 把 [获取信息](#geturl) 中的 `接入地址` 填写到 **接入地址** 中。
 
5. 单击 **创建**，把 [获取信息](#geturl) 中的 `accesskey` 和 `secretkey` 的值，分别填写到 `ACCESSKEY` 和 `SECRETKEY` 对应的 **值** 中。
        
6. 单击 **创建**，在 **密钥** 下拉选择框中选择创建的密钥。
    
4. 单击 **部署**。

### 创建存储类

1. 在左侧导航栏中，单击 **存储管理** > **对象存储类**。

    **说明**：下述内容以表单方式为例，您也可选择YAML 创建完成操作。

2. 单击 **创建对象存储类**。
    
3. 选择 **MinIO 对象存储**，单击 **下一步**。

2. 参考以下说明，配置部分参数。

    |参数|说明          |
    | -------- | ----------------  |
    | **回收策略**   | 存储桶的回收策略。默认使用 **删除** 策略，即删除存储桶声明的同时，也会删除绑定的存储桶。|
    | **分配项目**   | 请分配可使用此类型存储的项目。<br/>如果暂时没有项目需要使用此类型存储，您也可先不分配项目，后续再更新项目。|

3. 单击 **创建**。

## 相关操作

### 获取信息\{#geturl}

由于对接存储位置的不同，获取 **接入地址**、**ACCESSKEY** 和 **SECRETKEY** 的方式也不相同，请根据实际配置并选择下述一种方式进行获取。

* **对接平台外部 MinIO 对象存储**：

    * **接入地址**：联系相关人员获取 MinIO 对象存储服务接入地址，例如：`http://10.7.122.127:7480`。

    * **ACCESSKEY** 和 **SECRETKEY**：联系相关人员获取具有管理员权限的 `accesskey` 和 `secretkey`。


* **对接平台内部 MinIO 对象存储**：

    * **接入地址**
    
        1. 在左侧导航栏中，单击 **存储管理** > **对象存储**。
    
        2. 切换至 **访问方式** 页签，将 **集群内访问** 区域内的信息，通过拼接作为接入地址。例如：`http://10.7.122.127:80` 或 `http://minio.minio-system.svc.cluster.local:80`。


    * **ACCESSKEY** 和 **SECRETKEY**

    

        1. 使用下述命令获取对象存储名称（NAME），选择并记录需要对接的 **对象存储名称**。

            ```
            kubectl get tenant -A
            ```

        2. 使用需要对接的 **对象存储名称** 替换下述命令中的 `对象存储名称`，并在平台 CLI 工具中输入下述命令获取相关信息。其中 `MINIO_ROOT_USER` 即为 `accesskey`、`MINIO_ROOT_PASSWORD` 即为 `secretkey`。
              
            ```
            kubectl -n minio-system get secret <对象存储名称>-env-configuration -o jsonpath='{.data.config\.env}'  | base64 -d | grep -E "MINIO_ROOT_USER|MINIO_ROOT_PASSWORD"
            ```
           



