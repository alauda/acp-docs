---
weight: 10
---


#  创建 TopoLVM 本地存储类型存储类


TopoLVM 是基于 LVM 的本地存储方案，可提供简单、易维护和高性能的本地存储服务，适用于数据库、中间件等场景。在此之前，您需先创建 TopoLVM 存储类。

持久卷声明（PVC，PersistentVolumeClaim）中绑定存储类后，平台将根据持久卷声明在节点上动态创建持久卷供业务应用使用。


## 背景信息

### 使用优势

* 相比远程存储（例如 **NFS 共享存储**）：TopoLVM 类型的存储位于节点本地，具有更优的 IOPS 和吞吐表现，以及更低时延。

* 相比 hostPath （例如 **local-path**）：同为节点上的本地存储，但 TopoLVM 可将容器组灵活调度到可用资源充足的节点上，避免因资源不足导致容器组无法启动。
* TopoLVM 默认支持卷自动扩容，修改持久卷声明所需存储配额后，无需重启容器组，便可自动完成扩容。

### 使用场景

* 仅需使用临时存储时，例如开发调试。


* 对存储 IO 要求较高时，例如实时索引。

### 约束与限制

请尽量只在可实现应用层数据复制和备份的应用中使用本地存储，例如 MySQL。避免因本地存储无法提供数据持久性保障而导致数据丢失。

[查看更多](https://github.com/topolvm/topolvm/blob/main/docs/user-manual.md)


## 部署卷插件

单击部署后，在新打开的页面中 [配置本地存储](/storage/storagesystem_topolvm/functions/create_topolvm.mdx)。

## 创建存储类

1. 进入 **平台管理**。

1. 在左侧导航栏中，单击 **存储管理** > **存储类**。

2. 单击 **创建存储类**。
3. 选择 **TopoLVM**，单击 **下一步**。

2. 参照以下说明，配置存储类相关参数。

    **说明**：下述内容以表单方式为例，您也可选择YAML 创建完成操作。
    

    |参数|说明                                                         |
    | -------- | ----------------  | 
    | **名称**   | 存储类的名称。需在当前集群中唯一。 |
    | **显示名称**   | 可帮助您进行识别或筛选的名称，例如存储类的中文描述。 |
    | **设备类**   | 设备类是 TopoLVM 中用于对存储设备进行分类的方式，每个设备类中对应一组相同特性的存储设备。如无特殊要求，可使用集群 **自动分配** 的设备类。|
    | **文件系统**   | <ul><li>**XFS** 是一种高性能的日志文件系统。擅长处理并行 I/O 工作负载，支持处理大型文件，且能平滑进行数据传输。 </li><li> **EXT4** 是 Linux 下的一种日志文件系统，提供 extent 文件存储方式，支持处理大型文件。文件系统容量可达 1 EiB，支持的文件大小可达 16 TiB。</li></ul>|
    | **回收策略**   | 持久卷的回收策略。<br/><ul><li>删除：删除持久卷声明的同时，也会删除绑定的持久卷。</li><li>保留：即使删除持久卷声明，其绑定的持久卷仍会被保留。</li></ul>|
    | **访问模式**   | 单节点读写 (RWO)：可以被一个节点以读写方式挂载。|
    | **PVC 重建**   | 支持 PVC 跨节点重建，开启后需配置 **重建等待时间**。当使用此存储类创建的 PVC 所在节点故障时，会在重建等待时间结束后自动在其他节点重建 PVC，以确保业务不中断。<br/>**说明**：<br/><ul><li>重建的 PVC 中不包含原始数据。</li><li>使用此功能前请保证存储节点数大于上层应用实例副本数，否则将会影响 PVC 重建。</li></ul>|
    | **分配项目**   | 仅可在特定项目创建此类型的持久卷声明。<br/>如果暂不分配项目，也可后续 **更新项目**。|
            
        
3. 确认配置信息无误后，单击 **创建** 按钮。


## 后续操作

一切就绪后，可通知开发人员使用 TopoLVM 功能。例如，在容器平台的 **存储** > **持久卷声明** 页面创建持久卷声明并绑定 TopoLVM 存储类。
