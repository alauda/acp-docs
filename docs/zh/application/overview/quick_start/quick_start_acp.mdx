---
weight: 10
---


# 使用镜像快速部署一个简单应用

本文档用于指导您如何快速在容器平台中部署、管理和访问应用。

## 介绍

### 适用场景

- 您是一位刚接触容器平台的新用户，希望快速了解如何将一个容器化的 Web 应用部署到平台上，并将其暴露给外部访问。
- 您想通过一个简单且完整的示例，了解如何使用平台的基本功能，包括：创建项目、命名空间、部署应用、使用内部路由暴露应用等。

### 预计阅读时间

预计完成本文档的阅读和操作需要 10-15 分钟。

## 注意事项

- 本文档不会对配置过程中的参数进行详细说明和配置，仅作为快速入门参考，具体说明及配置步骤请参考相关文档。
- 创建项目、命名空间及集成镜像仓库三个操作步骤需要具备相应权限。

## 前提条件

* 已经仔细阅读平台概览及基础概念文档，对于平台和基本名词有了初步了解。
* 已经参考项目创建文档创建一个项目。

## 流程概述

| 序号 | 操作步骤                                | 描述                                                                                                     |
| ---- | --------------------------------------- | -------------------------------------------------------------------------------------------------------- |
| 1    | [创建命名空间](#namespace)              | 创建命名空间，用于隔离和管理不同的应用。                                                                 |
| 2    | [准备镜像](#image)                      | 在创建应用前需准备容器镜像。平台支持 **通过工具链集成的镜像仓库**、**使用第三方镜像仓库服务** 两种方式，本文档以开源的 HelloWorld 镜像为例进行介绍。 |
| 3    | [使用部署创建一个简单应用](#deployment) | 使用部署及准备的镜像创建一个简单的应用并进行相关查看和管理。                                             |
| 4    | [使用内部路由暴露应用](#service)        | 使用内部路由暴露应用，以供外部访问。                                                                     |
| 5    | [访问应用](#application)                | 通过内部路由暴露的端口访问应用。                                                                         |

## 操作步骤

### 创建命名空间 \{#namespace}

命名空间是实现多租户的基础，它可以将集群资源划分为相互隔离的用户组，并根据不同用户组的需求合理分配资源、进行应用管理。创建命名空间的步骤如下：

**前提条件**

- 需要具备命名空间的创建、更新及删除权限（例如：集群管理员、项目管理员权限）。

- 使用平台的 Kubectl 工具或第三方 CLI 工具连接到集群对应的 Master 节点。

**操作步骤**

1. 单击页面左上角 **平台 Logo** 后方的视图名称，切换至 **项目管理** 视图。

2. 在左侧导航栏中，单击 **项目管理** > **命名空间**。

2. 单击 **创建命名空间**。

3. 参考如下参数配置 **基本信息**，其他参数保持默认。

   | 参数     | 说明                                                 |
   | -------- | ---------------------------------------------------- |
   | 所属集群 | 在项目已关联的集群中，选择一个要创建命名空间的集群。 |
   | 命名空间 | 命名空间的名称，名称的固定前缀为项目名称。           |

4. 单击 **创建**。至此，一个没有任何资源使用限制的命名空间创建成功。

### 准备镜像 \{#image}


在创建应用之前，需准备容器镜像。平台支持下述两种方式获取镜像：

- 通过工具链集成的镜像仓库。
- 使用第三方镜像仓库服务。

#### 通过工具链集成的镜像仓库

1. 单击页面左上角 **平台 Logo** 后方的视图名称，切换至 **平台管理** 视图。

2. 在左侧导航栏中，单击 **工具链管理** > **工具链集成**。

3. 单击 **集成**。

4. 选择一个工具后，参考以下说明配置相关参数。

   | 参数     | 说明                                                                                                                                      |
   | -------- | ----------------------------------------------------------------------------------------------------------------------------------------- |
   | 集成名称 | 输入集成工具的名称，该名称不可与已有工具集成名称重复。                                                                                    |
   | 访问地址 | 输入工具的访问地址。                                                                                                                      |
   | API 地址 | 输入集成工具的服务地址。服务地址的格式是：HTTP/HTTPS 协议 + IP + 端口号或 HTTP/HTTPS 协议 + 域名。公有代码仓库不支持修改默认的 API 地址。 |
   | 凭据     | 选择一个已创建的凭据或添加一个新的凭据 。                                                                                                 |

5. 单击 **集成**。

6. 单击创建的工具卡片。

7. 单击列表中对应工具项目名称右侧 ⋮ > **分配平台项目**。

8. 选择希望使用此工具项目的平台项目。

9. 单击 **分配**。


#### 使用第三方镜像仓库服务

需要确保镜像地址可以被集群访问，否则无法正常使用。

### 使用部署创建一个简单应用 \{#deployment}

部署（Deployment）是平台中最常用的工作负载之一，它提供了声明式的方式来管理 Pod。通过部署可以定义应用的期望状态（例如：运行的副本数、容器镜像等）、实现应用的滚动更新和回滚、自动处理 Pod 的扩缩容和故障恢复。

#### 创建应用

1. 单击页面左上角 **平台 Logo** 后方的视图名称，切换至 **Container Platform** 视图。

2. 单击视图名称后方区域，选择 **命名空间**。

3. 在左侧导航栏中，单击 **计算组件** > **部署**。

4. 单击 **创建部署**。

4. 选择通过工具链集成的镜像仓库地址或输入第三方平台的镜像仓库地址，单击 **确认**。

   **说明**：本文以开源镜像 helloworld 为例进行介绍。

5. 输入名称，单击 **创建**。至此，一个运行 helloworld 的 Deployment 创建成功。

#### 管理应用

可通过详情信息页面查看应用的运行状态、副本数等信息，并对部署及容器进行管理。也可以通过切换页签，查看应用的日志、监控、事件、YAML 等。

### 使用内部路由暴露应用 \{#service}

内部路由（Service）可用于计算组件的服务发现，即提供了统一的 IP 地址或主机端口用于访问计算组件。

1. 在左侧导航栏中，单击 **网络** > **内部路由**。

2. 单击 **创建内部路由**。

3. 参考如下参数配置 **基本信息**，其他参数保持默认。

   | 参数     | 说明                                                                                                                                                                  |
   | -------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
   | 名称     | 输入该 Service 的名称。                                                                                                                                               |
   | 类型     | 选择 NodePort。                                                                                                                                                       |
   | 组件名称 | 选择之前创建的部署。                                                                                                                                                  |
   | 端口     | <ul><li>服务端口：内部路由在集群内部暴露的服务端口号， 即 Port。例如 8080 。</li><li>容器端口：服务端口映射的目标端口号（或名称），即 targetPort。例如 80。</li></ul> |

4. 单击 **创建**。至此，内部路由创建成功。


### 访问应用 \{#application}

1. 进入内部路由详情信息页面。

2. 复制容器组区域的 **节点 IP 地址**。

3. 复制端口区域的 **主机端口**。

4. 在浏览器中输入 `<节点 IP 地址>:<主机端口>`，即可成功访问应用。本文档中节点 IP 地址为 192.1.1.3，主机端口为 31217，访问结果如下图所示。

   <img src="./assets/quick_start.png" width="900" />