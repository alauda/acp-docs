---
weight: 90
---

# 使用卷快照

卷快照是持久卷声明某个时间点副本，可用于配置新的持久卷声明（预先填充快照数据）或将现有持久卷声明回滚到先前状态，达到备份应用数据并按需还原的效果，从而保障业务应用数据的可靠性。


## 前提条件

* 管理员已为当前集群部署了卷快照组件 **快照控制器**，并在存储集群中开启了快照相关功能。

* 持久卷声明的创建方式需为 **动态创建**，且状态为 **已绑定**。

* 持久卷声明中绑定的存储类支持快照功能，例如 **CephRBD 内置存储**、**CephFS 内置存储** 或 **TopoLVM**。
    
## 创建卷快照

### 基于指定持久卷声明 (PVC) 创建卷快照

**方式一**

1. 进入 **Container Platform**。

1. 在左侧导航栏中，单击 **存储 > 持久卷声明(PVC)**。

2. 单击列表中对应持久卷声明右侧的 ⋮ > **创建卷快照**。

3. 填写快照描述。描述可帮助您记录持久卷的当前状态，例如 *应用升级前* 。

4. 单击 **创建**。快照耗时与网络状况和数据量有关，请耐心等待。

    当快照变为 `可用` 状态时，说明创建成功。
    
**方式二**

1. 进入 **Container Platform**。

1. 在左侧导航栏中，单击 **存储 > 持久卷声明(PVC)**。

2. 单击列表中持久卷声明名称。

3. 切换至 **卷快照** 页签。

4. 单击 **创建卷快照**，并按需配置相关参数。

4. 单击 **创建**。快照耗时与网络状况和数据量有关，请耐心等待。

    当快照变为 `可用` 状态时，说明创建成功。

### 基于自定义的方式创建卷快照

1. 进入 **Container Platform**。

1. 在左侧导航栏中，单击 **存储 > 卷快照**。

2. 单击 **创建卷快照**，并按需配置相关参数。

4. 单击 **创建**。快照耗时与网络状况和数据量有关，请耐心等待。

    当快照变为 `可用` 状态时，说明创建成功。

## 使用卷快照创建持久卷声明

目前平台仅支持使用存储类 **动态创建** 的 PVC 为其创建卷快照，您可基于该快照创建新的 PVC 并与之绑定。

**提示**：使用快照创建 PVC 时支持的访问模式与使用存储类创建 PVC 时支持的访问模式有所不同，已在表中 **加粗** 显示。

|创建卷快照使用的存储类| 单节点读写（RWO） | 多节点只读（ROX） | 多节点读写（RWX） |
| --- | --- | --- | --- |
|**TopoLVM**| 支持   | 不支持  | 不支持  |
|**CephRBD 块存储**| 支持   | 不支持  | 不支持   |
|**CephFS 文件存储**| 支持   | **支持**  | 支持   |

### 创建方式一

1. 进入 **Container Platform**。

1. 在左侧导航栏中，单击 **存储 > 持久卷声明(PVC)**。

2. 单击列表中持久卷声明名称。

3. 切换至 **卷快照** 页签。

3. 单击列表中对应卷快照右侧的 ⋮ > **创建持久卷声明**，并配置相关参数。

4. 单击 **创建**。

### 创建方式二

1. 进入 **Container Platform**。

1. 在左侧导航栏中，单击 **存储 > 卷快照**。

2. 单击列表中对应卷快照右侧的 ⋮ > **创建持久卷声明**，并配置相关参数。

4. 单击 **创建**。
