---
weight: 40
---

# 如何获得 Argo CD 访问信息

> 本篇内容将介绍通过如何获取 Argo CD Dashboard 的访问信息，包括：平台的 Alauda GitOps 集群插件 Argo CD 和 通过 Argo CD Operator。


## 使用场景

- 获得 Argo CD 访问信息后，可实现通过 Argo CD Dashboard 管理原生 Argo CD 的所有资源。

## 如何获取通过平台部署的 GitOps 集群插件的 Argo CD 访问信息？

### 前提条件
- 已在 **global** 集群中部署 GitOps 集群插件。
- 已安装 CLI 插件，并开启 web-cli 开关。
- 有平台管理员权限。

### 操作步骤
:::info

推荐部署 GitOps 集群插件时
 - 开启 **Argo CD 原生 UI** 开关。
 - 开启 **单点登录** 开关。

:::

> 请按以下步骤，获取 Argo CD 访问信息：

1. 登录平台，进入 **平台管理** 页面。

2. 左侧导航栏选择 **应用商店管理**， 进入 **集群插件** 列表页面。

3. 找到 **GitOps** 插件，点击 ** GitOps **，弹出 **GitOps 集群插件** 详情信息。

4. Argo CD 原生 UI
   - 未开启：可回到 **集群插件** 列表页面，找到 **GitOps** 插件，点击 **操作** 按钮，选择 **更新**，即可打开 **Argo CD 原生 UI** 开关。
   - 如开启：可直接点击 **访问地址**，即可打开 Argo CD Dashboard。

5. **单点登录**
   - 如开启：可通过平台账号登录 Argo CD Dashboard。
   - 未开启：平台部署账号默认使用 `admin`，密码信息则需在 **Kubectl** 中执行如下命令获取：
   ```
   kubectl get secret -n argocd argocd-gitops-cluster -o template --template='{{index .data "admin.password"}}'|base64 -d
   ```

## 如果获取通过 Argo CD Operator 部署的 Argo CD 访问信息

### 前提条件
- 已部署 Argo CD Operator 的集群。
- 已安装 CLI 插件，并开启 web-cli 开关。
- 有平台管理员权限。

### 操作步骤

#### 步骤 1：获取 Argo CD Dashboard URL

1. 登录平台，进入 **平台管理** 页面。

2. 左侧导航栏选择 **集群管理**， 进入 **资源管理** 页面。

3. **资源组**, 搜索 `Service`, 左侧命名空间选择 ***argocd***，部署 argocd 实例的命名空间，通过平台部署的 Argo CD 默认命名空间为 ***argocd***。

4. 在右侧 **资源列表** 中，找到 `argocd-gitops-server` 资源，点击 ***操作*** 按钮，选择 **更新**，即可 打开 argocd-gitops-server YAML 详情，详细内容如图
<img src="../../gitops/assets/argo_cd_service_nodeport.png" width = "900" />

5. 找到 `type` 调整为 `NodePort` 类型，并记录 `nodePort` 端口，点击 **更新** 按钮。

6. 左侧导航栏选择 **集群管理**， 进入 **集群列表** 页面。

7. 选择 部署 `argocd operator` 的集群，进入 **集群详情页** , 选择 **节点**。

8. 获取 ***任意 Master*** 节点 IP 地址。

9. 通过 `http://{Master 节点 IP}:{nodePort}` ，访问 Argo CD Dashboard。

#### 步骤 2：获取 Argo CD 密码

在 **Kubectl** 中执行如下命令获取：
   ```
   kubectl get secret -n argocd argocd-gitops-cluster -o template --template='{{index .data "admin.password"}}'|base64 -d
   ```