---
weight: 40
i18n:
  title:
    en: How to Obtain Argo CD Access Information
    zh: 如何获取 Argo CD 访问信息
title: 如何获取 Argo CD 访问信息
sourceSHA: 517f44fcde456c62147eefb9c7847618bf40d643a5adccfe28b9fa4676aad959
---

# 如何获取 Argo CD 访问信息

> 本篇内容将介绍如何获取 Argo CD 的访问信息，包括平台上的 ACP GitOps 集群插件 Argo CD 和通过 Argo CD Operator 安装的版本。

## 使用场景

- 获得 Argo CD 访问信息后，您可以通过 Argo CD Dashboard 管理所有原生 Argo CD 资源。

## 如何获取通过平台部署的 GitOps 集群插件的 Argo CD 访问信息？

### 前提条件
- 已在 **global** 集群中部署 GitOps 集群插件。
- 已安装 CLI 插件，并开启 `web-cli` 开关。
- 您拥有管理员权限。

### 操作步骤
:::info

建议在安装 ACP GitOps 集群插件时启用以下设置：

- 启用 **原生 Argo CD UI** 开关。
- 启用 **单点登录** 开关。

:::

> 请按以下步骤，获取 Argo CD 访问信息：

1. 登录平台，进入 **平台管理** 页面。

2. 左侧导航栏选择 **应用商店管理**，进入 **集群插件** 列表页面。

3. 找到 **GitOps** 插件，点击 **GitOps**，弹出 **GitOps 集群插件** 详情信息。

4. Argo CD 原生 UI
   - 如果未启用：可返回 **集群插件** 列表页面，找到 **GitOps** 插件，点击 **操作** 按钮，选择 **更新**，启用 **Argo CD 原生 UI** 开关。
   - 如果已启用：可直接点击 **访问地址**，打开 Argo CD Dashboard。

5. **单点登录**
   - 如果已启用：可通过平台账号登录 Argo CD Dashboard。
   - 如果未启用：默认账号为 `admin`，密码信息需在 **Kubectl** 中执行如下命令获取 [获取 Argo CD 密码](#argocd-password-cli)。

## 如何获取通过 Argo CD Operator 部署的 Argo CD 访问信息？

### 前提条件
- 已部署 Argo CD Operator 的集群。
- 已安装 CLI 插件，并开启 `web-cli` 开关。
- 您拥有管理员权限。

### 操作步骤

#### 获取 Argo CD Dashboard URL

1. 登录平台，进入 **平台管理** 页面。

2. 左侧导航栏选择 **集群管理**，进入 **资源管理** 页面。

3. 在 **资源组** 中，搜索 `Service`，选择 ***argocd*** 命名空间（即部署 argocd 实例的命名空间）。通过平台部署的 Argo CD 默认命名空间为 ***argocd***。

4. 在右侧 **资源列表** 中，找到 `argocd-gitops-server` 资源，点击 ***操作*** 按钮，选择 **更新**，以查看 argocd-gitops-server 的 YAML 详情，详见下图：

<img src="../assets/argo_cd_service_nodeport.png" width = "900" />

5. 将 `type` 修改为 `NodePort`，记录下 `nodePort`，然后点击 **更新** 按钮。

6. 左侧导航栏选择 **集群管理**，进入 **集群列表** 页面。

7. 选择部署 `argocd operator` 的集群，进入 **集群详情** 页面，选择 **节点**。

8. 获取 ***任意控制平面*** 节点的 IP 地址。

9. 通过 `http://{控制平面节点 IP}:{nodePort}` 访问 Argo CD Dashboard。

#### 获取 Argo CD 密码

在 **Kubectl** 中执行如下命令以获取密码：

```bash
kubectl get secret -n argocd argocd-gitops-cluster -o template --template='{{index .data "admin.password"}}'|base64 -d
```

### 更新 Argo CD admin 账户密码<a id="argocd-update-password-cli"></a>

通过 **ACP GitOps** 或者 **Argo CD Operator** 部署的 Argo CD 默认创建的 `admin` 账户密码不能通过 **Argo CD dashboard** 界面修改。如需更改请在 CLI 工具中执行下述命令。其中，`newpassword` 是您希望设置的新密码。

```bash
kubectl patch -n argocd secrets argocd-gitops-cluster -p '{"stringData":{"admin.password":"<newpassword>"}}'
```
