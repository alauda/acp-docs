---
weight: 10
i18n:
  title:
    en: GitOps Concept
---

# 深入理解 GitOps

## GitOps 定义
GitOps 是将 Git 仓库作为基础设施和应用程序配置的中心，所有操作通过 Git 进行版本控制、自动化管理和审计。GitOps 主要依赖声明性配置文件，通过将基础设施和应用部署的定义存储在 Git 仓库中，任何对这些配置的更改都需要通过 Git 提交并触发自动化流程进行部署。

## GitOps 理念

- **声明式**：声明式是实现 GitOps 的核心基础。在 GitOps 中，所有工具必须是声明式的，并且以 Git 作为单一来源，应用程序可以非常方便地部署到 Kubernetes 集群中，当出现平台级故障时，应用也可以随时部署到其他的标准平台上。
- **版本化和不可变**：以声明式为依托，基础设施和应用的版本可以映射为 Git 源码对应的版本，可以通过 Git Revert 随时进行回滚操作，且 Git 仓库不会随着时间的推移出现版本变化。
- **自动拉取**：一旦将声明式的状态合并到 Git 仓库中，也就意味着提交会自动应用到集群中，这种部署方式安全且高效，部署过程无需人工干预，整个过程是自动化的且无需人工运行命令，杜绝了人为错误的可能性，也可以在部署过程加入人工审批环节，确保安全。
- **持续协调、自我修复**：协调的过程实际上依赖于 Argo CD 等控制器，它会定期自动拉取 Git 仓库并对比差异，之后将差异应用到集群中，从而确保整个系统能够进行自我修复。

## GitOps 优势 <a id="gitops-advantage"></a>
- **简化团队协作、提升交付速度**：“以声明的方式”描述应用程序所需的基础设施、配置、版本、甚至是监控事件、目标状态等并存储在 Git 中，通过 GitOps 控制器等机制实现自动化部署能力，当应用测试通过后可一键部署到任意环境，简化团队协作、提升交付速度。
- **快速回滚及修复**：当应用出现异常时可实现，借助 Git 的版本化管理能力，通过 GitOps 控制器的“自动拉取、持续协调”能力“快速回滚、线上容灾、错误的快速恢复”。
- **多环境分发管理**：以 Git 作为唯一的事实来源，结合差异化配置管理能力，通过 GitOps 控制器实现应用的“多云、多环境的精准批量分发及运维管理” 。
- **强化安全性、合规性**：借助 Git 来存储配置文件，并通过 Git 自身的角色、权限控制、分支、审计、加密机制等能力来保护环境等信息，“强化安全性、合规性”。

## GitOps 的常用工具
- ArgoCD：一个常用且针对 Kubernetes 使用的声明式 GitOps 持续交付工具，它可实现应用程序定义、配置和环境应具有声明性并受版本控制。应用程序部署和生命周期管理应自动化、可审计且易于理解。
- Flux：一个轻量级的 Kubernetes GitOps 工具，能够持续监控 Git 仓库，并根据配置文件自动部署或更新 Kubernetes 中的应用程序。
- Jenkins X：一个自动化 CI/CD 平台，支持与 GitOps 集成，通过 GitOps 提供持续交付和自动化部署功能。

