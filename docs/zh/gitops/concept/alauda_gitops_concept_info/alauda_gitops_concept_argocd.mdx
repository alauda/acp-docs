---
weight: 10
i18n:
  title:
    en: Alauda GitOps Concept
---

# 介绍
Alauda GitOps 是基于 Argo CD 实现。通过 Argo CD 监视 Git 仓库中的配置文件（应用程序、基础设施配置等）并将其自动同步到目标环境，实现了基于 Git 的持续交付流程，通过将整个交付过程纳入 Git 版本控制系统，提高了软件交付的速度、可靠性和安全性，实现应用快速精准分发、部署到一个或多个 Kubernetes 集群。
同时，Alauda GitOps 也提供原生 Argo CD Operator 的支持，使用通过 Argo CD Operator 可以实现 Argo CD 的自动化部署、升级、回滚等操作。

## 为什么选择 Argo CD 
Argo CD 是一款非常流行的开源 GitOps 工具，它具有以下显著优势：
- 功能丰富： Argo CD 提供了丰富的功能，包括声明式部署、自动化同步、版本控制、回滚、监控、安全等。它可以满足各种复杂的部署场景。
- 易于使用： Argo CD 提供了友好的 Web UI 和命令行工具，使得用户可以轻松地管理应用程序的部署。它的配置也非常简单，易于上手。
- 与 Kubernetes 集成： Argo CD 与 Kubernetes 集成紧密，可以很好地利用 Kubernetes 的特性，如 Deployment、Service、Ingress 等。
- 多集群支持： Argo CD 支持多集群管理，可以方便地将应用程序部署到不同的 Kubernetes 集群中。
- 插件生态： Argo CD 拥有丰富的插件生态，可以与其他工具集成，如 Helm、Kustomize、Istio 等。
- 社区活跃： Argo CD 拥有活跃的社区，用户可以获得及时的支持和帮助。

## Alauda GitOps 优势 <a id="alauda-gitops-advantage"></a>
> 除了 GitOps 优势之外，Alauda GitOps 还具有以下优势：

- **Argo CD Operator 的兜底服务**

  - Argo CD Operator 的技术兜底，故障应答、安全问题修复等。

- **可视化的 GitOps 应用多环境分发管理**

  结合平台多集群管理、差异化配置等能力，实现与平台风格统一的可视化 GitOps 应用管理、集群配置管理，让多云、多环境的精准分发更简单易用。

- **可视化的 GitOps 应用运维**

  GitOps 应用下提供 Kubernetes Workload 资源的实时日志、事件等信息的快速查阅能力，当 GitOps 应用出现异常时，无需页面跳转即可结合 Argo CD 异常信息、Workload 的实时日志快速分析定位解决问题。

- **可视化的 GitOps 集群配置管理**
  
  通过 GitOps 管理集群配置，实现集群配置的统一管理及分发。

- **与平台所有产品结合实现 GitOps 管理应用的闭环**

  - 与平台 DevOps 提供的持续构建、制品管理、微服务灰度发布等能力结合，实现完全自动化的 GitOps 应用管理，使得持续集成与持续交付的协同能力实现完整闭环。
  - 与平台提供的 CrossPlane、MySQL、Developer Portal 等产品结合实现从基础设施初始化搭建、业务应用初始化（代码、流水线、GitOps 应用初始化等）、应用代码开发并上线的完整流程。


## Alauda GitOps 应用状态说明

### 同步状态
< 资源和应用共有 同步失败、待同步、同步中 及 已同步 四种状态。

| **同步状态**   | **说明**                               |
| :----- | :--------------------------------- |
| **同步失败** | 可能由于网络等原因导致资源同步失败，可查看失败原因。 |
| **待同步** | 集群中资源的当前状态与仓库中期望的状态不一致，需要同步。 |
| **同步中** | 集群中资源的当前状态与仓库中期望的状态不一致，正在同步中。 |
| **已同步** | 集群中资源的当前状态与仓库中期望的状态一致。|

:::info
同步状态显示优先级为：同步失败 > 待同步 > 同步中 > 已同步，示例如下：
- 通过 GitOps 应用创建的 Application 类型应用 中存在两个 Kubernetes 资源，同步状态分别为 ***同步中*** 和 ***已同步***，根据显示优先级可知，***同步中*** 的显示优先级高于 ***已同步***，则此 Application 类型应用的同步状态为 ***同步中***。
- 通过 GitOps 应用创建的 ApplicationSet 类型应用，并将配置分发至两个不同的命名空间中，此时会自动创建两个来源相同的 Application 类型应用，这两个应用的同步状态分别为 ***同步失败*** 和 ***已同步***，根据显示优先级可知，***同步失败*** 的显示优先级高于 ***已同步***，则此 ApplicationSet 类型应用的同步状态为 ***同步失败***。
:::

### 健康状态
< 资源和应用共有 未知、丢失、降级、暂停、处理中 及 健康 六种状态。

| **健康状态**   | **说明**                               | ***解决方案*** ｜
| :----- | :--------------------------------- | :--------------------------------- |
| **未知** | 无法判断当前资源的健康状态，大概率是由于发生异常导致的。 | 切换至资源对应的 YAML 文件，查看 status.condition 字段中的异常信息，可结合异常信息以及 Workload 的实时日志分析定位解决问题。 |
| **丢失** | 资源未创建。 | - 场景一：当首次创建资源时，需稍等一段时间，状态即可由丢失转为健康。若在此过程中资源的同步状态为同步失败，则需检查仓库配置是否正确。<br/> - 场景二：由于目标环境的资源被删除而导致资源丢失，需手动同步相关资源。 |
| **降级** | 用于 Workload 资源，表示在给定时间范围内，Workload 的 Pod 还未从 ***处理中*** 状态到达 ***健康*** 状态，此时间范围默认为 10 分钟。 | 查看 Pod 实时日志、事件分析定位解决问题。 |
| **暂停** | 用于 Workload 资源，表示滚动更新暂停。 | 查看 Workload 实时日志、事件分析定位解决问题。  |
| **处理中** | 资源已创建成功，但 Pod 暂未达到 Ready 状态，预计很快会到达健康状态。 | - |
| **健康** | 资源运行正常，状态健康。 | - |

:::info
健康状态显示优先级为：未知 > 丢失 > 降级 > 暂停 > 处理中 > 健康，示例如下：
- 通过 GitOps 应用创建的 Application 类型应用 中存在两个 Kubernetes 资源，健康状态分别为 ***健康*** 和 ***未知***，根据显示优先级可知，***未知*** 的显示优先级高于 ***健康***，则此 Application 类型应用的健康状态为 ***未知***。
- 通过 GitOps 应用创建的 ApplicationSet 类型应用，并将配置分发至两个不同的命名空间中，此时会自动创建两个来源相同的 Application 类型应用，这两个应用的健康状态分别为 ***丢失*** 和 ***处理中***，根据显示优先级可知，***丢失*** 的显示优先级高于 ***处理中***，则此 ApplicationSet 类型应用的健康状态为 ***丢失***。
:::

### 识别规则
< Kubernetes 资源 达到如下状态即显示为 健康状态，具体识别规则如下：


| **应用状态**   | **说明**                               |
| :----- | :--------------------------------- |
| **未知** | 无法判断当前资源的健康状态，大概率是由于发生异常导致的。 |
| **丢失** | 资源未创建。 |




