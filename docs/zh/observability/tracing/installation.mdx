---
weight: 15
i18n:
  title:
    en: Installation
---

:::warning

**该部署文档仅适用对接容器平台调用链的场景。**

该**调用链**组件和**服务网格**组件是互斥关系，如果您已经部署了服务网格组件，请先卸载服务网格组件。

:::

# 部署调用链

本指南为集群管理员提供了在 Alauda Container Platform 集群上安装调用链的过程。

先决条件:

* 您可以使用具有 `platform-admin-system` 权限的帐户访问 Alauda Container Platform 集群。
* 您已安装 `kubectl` CLI。
* 存储调用链数据的 `Elasticsearch` 组件，包括访问地址和 `basic auth` 信息。

## 安装 Jaeger Operator

### 使用 Web 控制台安装 Jaeger Operator

您可以使用 Alauda Container Platform **应用商店管理/Operators** 中列出的 Operator 安装 Jaeger Operator。

**步骤**

* 在 Web 控制台的 **平台管理** 视图下，选择要部署 Jaeger Operator 的**集群**，然后导航到 **应用商店管理** → **Operators**。
* 使用搜索框在目录中搜索 `Jaeger Operator`。点击 **Jaeger Operator** 标题。
* 阅读 **Jaeger Operator** 页面上的 Operator 简介。点击 **部署**。
* 在 **部署** 页面上：

  * 为 **升级策略** 选择 **自动**。这确保了 Operator 的未来升级由 Operator 生命周期管理器 (OLM) 自动处理。如果选择 `手动` 审批策略，OLM 会创建更新请求。作为集群管理员，您必须手动批准 OLM 更新请求以将 Operator 更新到新版本。
  * 选择 **stable 频道**。
  * 为 **命名空间** 选择 **推荐命名空间**。在推荐的 `jaeger-operator` 命名空间中安装 Operator，该 Operator 可以监视并在集群中的所有命名空间中可用。

* 点击 **部署**。您将在**已部署 Operators** 页面上看到 Operator。

* 验证 **状态** 是否设置为 **部署成功** 以确认成功安装 Jaeger Operator。

* 验证 Jaeger Operator 的所有组件是否已成功安装。在终端上登录集群，并运行以下命令：

  ```bash
  $ kubectl -n jaeger-operator get csv
  ```

  **示例输出**

  ```bash
  NAME                     DISPLAY           VERSION   REPLACES   PHASE
  jaeger-operator.v4.0.0   Jaeger Operator   4.0.0                Succeeded
  ```

  如果 `PHASE` 内容为 `Succeeded`，则表示 Operator 及其组件已成功安装。

## 部署 Jaeger 实例

TODO：

## 安装 OpenTelemetry Operator

### 使用 Web 控制台安装 OpenTelemetry Operator

您可以使用 Alauda Container Platform **应用商店管理/Operators** 中列出的 Operator 安装 OpenTelemetry Operator。

**步骤**

* 在 Web 控制台的 **平台管理** 视图下，选择要部署 OpenTelemetry Operator 的**集群**，然后导航到 **应用商店管理** → **Operators**。
* 使用搜索框在目录中搜索 `OpenTelemetry Operator`。点击 **OpenTelemetry Operator** 标题。
* 阅读 **OpenTelemetry Operator** 页面上的 Operator 简介。点击 **部署**。
* 在 **部署** 页面上：

  * 为 **升级策略** 选择 **自动**。这确保了 Operator 的未来升级由 Operator 生命周期管理器 (OLM) 自动处理。如果选择 `手动` 审批策略，OLM 会创建更新请求。作为集群管理员，您必须手动批准 OLM 更新请求以将 Operator 更新到新版本。
  * 选择 **alpha 频道**。
  * 为 **命名空间** 选择 **推荐命名空间**。在推荐的 `opentelemetry-operator` 命名空间中安装 Operator，该 Operator 可以监视并在集群中的所有命名空间中可用。

* 点击 **部署**。您将在**已部署 Operators** 页面上看到 Operator。

* 验证 **状态** 是否设置为 **部署成功** 以确认成功安装 OpenTelemetry Operator。

* 验证 OpenTelemetry Operator 的所有组件是否已成功安装。在终端上登录集群，并运行以下命令：

  ```bash
  $ kubectl -n opentelemetry-operator get csv
  ```

  **示例输出**

  ```bash
  NAME                            DISPLAY                  VERSION   REPLACES   PHASE
  openTelemetry-operator.v4.0.0   OpenTelemetry Operator   4.0.0                Succeeded
  ```

  如果 `PHASE` 内容为 `Succeeded`，则表示 Operator 及其组件已成功安装。

## 部署 OpenTelemetry 实例

TODO：

## 打开功能开关

调用链目前为 **Alpha 功能**，需进入**功能开关**视图，手动打开 `acp-tracing-ui` 功能开关。

然后，进入**Container Platform**视图，导航到 **可观测** → **调用链**，查看调用链功能。

## 卸载调用链

TODO：

介绍卸载组件的流程步骤。一般需要先删除组件的实例，然后删除组件的 Operator，最后删除组件的 CRD。
