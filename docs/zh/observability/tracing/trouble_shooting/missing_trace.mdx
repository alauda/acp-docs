---
weight: 10
i18n:
  disableAutoTranslation: true
---

# 查询不到所需的调用链

## 问题描述

在服务网格中查询调用链时，可能会遇到无法检索到目标调用链的情况。

## 根因分析

### 1. 调用链采样率配置过低

当调用链的采样率参数设置过低时，系统只会按比例采集调用链数据。在请求量不足或低峰时段，可能导致采样数据量低于可见阈值。

### 2. Elasticsearch 实时性限制

Elasticsearch索引默认配置`"refresh_interval": "10s"`，数据从内存缓冲区刷新到可搜索状态的延迟时间为10秒。查询最近生成的调用链时，可能因数据尚未持久化而导致结果缺失。

这种索引配置可以有效减少 Elasticsearch 的数据合并压力，提升索引速度和首次查询速度，但会在一定程度上降低数据的实时性。

## 根因1的解决方案

- 根据需求适当提高采样率。
- 使用更丰富的采样方式，如尾部采样。

## 根因2的解决方案

通过 `jaeger-collector` 的 `--es.asm.index-refresh-interval` 启动参数调整刷新间隔，默认值为 `10s`。

如果该参数的值为 `"null"`，则不会对索引的 `refresh_interval` 进行配置。

**注**：配置为 `"null"` 时，会影响 Elasticsearch 性能和查询速度。
