---
weight: 20
---

# VictoriaMetrics 监控数据备份与恢复

## 功能简介

VictoriaMetrics 监控数据备份与恢复功能允许您对监控数据进行定期备份和必要时的数据恢复，以确保监控数据的安全性和可用性。

## 使用场景

- 定期备份监控数据以防数据丢失
- 系统迁移时的数据迁移
- 灾难恢复
- 测试环境数据重建

## 前置条件

- 集群已部署 Monitoring with VictoriaMetrics 插件
- 确保有足够的存储空间用于备份
- 具备对 VictoriaMetrics 存储路径的访问权限

## 操作步骤

### 1. 确认存储路径

VictoriaMetrics 的监控数据存储在容器的指定路径下，由 `-storageDataPath` 参数指定，默认为 `/vm-data`。

配置示例：
```yaml
spec:
  template:
    spec:
      containers:
        - args:
            - '-storageDataPath=/vm-data'
```

**说明**：Monitoring with VictoriaMetrics 插件的计算组件名称为 `vmstorage-cluster`，类型为 `StatefulSet`。

### 2. 执行数据备份

使用 vmbackup 工具进行数据备份，详细操作请参考 [vmbackup 官方文档](https://docs.victoriametrics.com/vmbackup.html)。

### 3. 执行数据恢复

使用 vmrestore 工具恢复备份数据，详细操作请参考 [vmrestore 官方文档](https://docs.victoriametrics.com/vmrestore.html)。

## 操作结果

完成备份后，您将获得一份完整的监控数据备份文件。
执行恢复操作后，您的监控数据将恢复到备份时的状态。

## 了解更多

- [VictoriaMetrics 官方文档](https://docs.victoriametrics.com/)
- [数据备份最佳实践](https://docs.victoriametrics.com/vmbackup.html#best-practices)
- [数据恢复故障排查](https://docs.victoriametrics.com/vmrestore.html#troubleshooting)

## 后续操作

- 验证备份数据的完整性
- 设置定期备份计划
- 定期测试恢复流程
- 监控备份任务的执行状态
