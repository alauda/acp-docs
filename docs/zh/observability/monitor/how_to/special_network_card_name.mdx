---
weight: 30
---

# 采集自定义命名网卡的网络数据

## 功能简介

平台支持通过修改监控组件配置来采集自定义命名网卡的网络数据，使您能够在监控页面查看这些网卡的网络流量信息。

## 使用场景

当您的业务节点使用了自定义命名的网卡（不符合 `eth.|en.|wl.*|ww.*` 命名规则），且需要在平台监控中查看这些网卡的网络流量数据时。

## 前置条件

- 已创建业务集群
- 拥有平台管理员权限
- 已知自定义网卡的命名规则

## 操作步骤

1. 在平台顶部导航栏中，单击 CLI 工具图标。

2. 单击 **global**。

3. 在 global 集群中查找业务集群对应的 moduleinfo 资源名称：

    ```bash
    kubectl get moduleinfo | grep -E 'prometheus|victoriametrics'
    ```

    输出示例如下：

    ```
    global-6448ef7f7e5e3924c1629fad826372e7     global     prometheus          prometheus                          Running   v3.15.0-zz231204040711-9d1fc12474c2   v3.15.0-zz231204040711-9d1fc12474c2   v3.15.0-zz231204040711-9d1fc12474c2
    ovn-0954f21f0359720e8c115804376b3e7e        ovn        prometheus          prometheus                          Running   v3.15.0-zz231204040711-9d1fc12474c2   v3.15.0-zz231204040711-9d1fc12474c2   v3.15.0-zz231204040711-9d1fc12474c2
    ```

4. 编辑业务集群的 moduleinfo 资源：
    
    ```bash
    kubectl edit moduleinfo <业务集群的moduleinfo资源名称>
    ```

5. 添加或修改 valuesOverride 字段：

    ```yaml
    spec:
      valuesOverride:# 若本字段不存在，您须在 spec 下添加 valuesOverride 字段以及如下参数
        ait/chart-cpaas-monitor:
          global: 
            indicator:
              networkDevice: eth.*|em.*|en.*|wl.*|ww.*|[A-Z].*i|custom_interface # 替换 custom_interface 为自定义的正则表达式，以确保正确匹配网卡名称
    ```
6.等待 10 分钟后，请在节点的监控页面中查看网络相关图表，以确保改动生效。

## 操作结果

配置生效后，您可以在平台监控页面中查看自定义命名网卡的以下数据：
- 网络流量数据
- 网络吞吐量
- 网络包统计信息

## 了解更多

- 如需了解更多网络监控相关信息，请参考[监控架构说明文档](../architecture/index.mdx)

## 后续操作

- 监控自定义网卡的性能指标
- 根据监控数据设置告警规则

