---
weight: 20
---

# 参数配置

创建 Redis 实例时默认使用系统参数模板。您也可在参数模板中自定义配置。


## 注意事项

* Redis 版本升级后，如果有需要删除、废弃或变更的参数配置，请查阅 [Redis 官网](https://redis.io/topics/config) 对应修改。

* 为保障 Redis 环境稳定，不支持修改节点信息、存储配置等参数，例如 `rdbchecksum` 。


## 操作步骤


1. 在左侧导航栏中，单击 **Redis**。

2. 单击 ***命名空间的名称***。

2. 单击 ***实例名称*** 。

3. 在 **参数配置** 页签下，单击 **更新实例参数** 或 **更新哨兵参数**。

4. 设置参数。

5. 单击 **更新**。

# 附录

## 参数支持说明

**GENERAL**

| <span style={{display:'inline-block', maxWidth:'240px', width:'240px'}}>参数</span>  | <span style={{display:'inline-block', maxWidth:'48px', width:'48px'}}>5.0 默认值</span> | <span style={{display:'inline-block', maxWidth: '48px', width:'48px'}}>6.0 默认值</span> | <span style={{display: 'inline-block', maxWidth: '48px', width:'48px'}}>7.2 默认值</span> | <span style={{display:'inline-block', maxWidth: '100px', width:'100px'}}>取值范围</span> | <span style={{display: 'inline-block', maxWidth: '200px', width:'200px'}}>说明</span>  |
| --- | --- | --- | --- | --- | --- |
| daemonize | no  | no  | no  |     |     |
| supervised | no  | no  | no  |     |     |
| pidfile | /var/run/redis_6379.pid | /var/run/redis_6379.pid | /var/run/redis_6379.pid<br/>|     |     |
| loglevel | notice | notice | notice | debug |<br/>verbose |<br/>notice |<br/>warning |<br/>nothing(7.2 新加) | Specify the server verbosity level.<br/>This can be one of:<br/>*   debug (a lot of information, useful for development/testing)<br/>*   verbose (many rarely useful info, but not a mess like the debug level)<br/>*   notice (moderately verbose, what you want in production probably)<br/>*   warning (only very important / critical messages are logged) |
| logfile | ""  | ""  | ""  |     |     |
| syslog-enabled | no  | no  | no  |     |     |
| syslog-ident | redis | redis | redis |     |     |
| syslog-facility | local0 | local0 | local0 |     |     |
| crash-log-enabled | -  | -  | yes | no|yes | To disable the built in crash log, which will possibly produce cleaner core dumps when they are needed, uncomment the following: |
| crash-memcheck-enabled | -  | -  | no  | no|yes | To disable the fast memory check that's run as part of the crash log, which will possibly let redis terminate sooner, uncomment the following: |
| databases | 16  | 16  | 16  |     |     |
| always-show-logo | yes | yes | yes |     |     |
| set-proc-title | -  | -  | yes |     |     |
| proc-title-template | -  | -  | `{title} {listen-addr} {server-mode}` |     | Template variables are specified in curly brackets. The following variables are supported:<ul><li>/g`{title}`: Name of process as executed if parent, or type of child process.</li>/g<li>`{listen-addr}`: Bind address or '*' followed by TCP or TLS port listening on, or Unix socket if only that's available.</li><li>`{server-mode}`: Special mode, i.e. `[sentinel]` or `[cluster]`.</li><li>`{port}`: TCP port listening on, or 0.</li><li>`{tls-port}`: TLS port listening on, or `0`.</li><li>`{unixsocket}`: Unix domain socket listening on, or `""`.</li><li>`{config-file}`: Name of configuration file used. </li></ul>|
| locale-collate | -  | -  | ""  | en_US<br/>zh_CN 等 | Set the local environment which is used for string comparison operations, and also affect the performance of Lua scripts. Empty String indicates the locale is derived from the environment variables. |

**NETWORK**

| <span style={{display:'inline-block', maxWidth:'240px', width:'240px'}}>参数</span>  | <span style={{display:'inline-block', maxWidth:'48px', width:'48px'}}>5.0 默认值</span> | <span style={{display:'inline-block', maxWidth: '48px', width:'48px'}}>6.0 默认值</span> | <span style={{display: 'inline-block', maxWidth: '48px', width:'48px'}}>7.2 默认值</span> | <span style={{display:'inline-block', maxWidth: '100px', width:'100px'}}>取值范围</span> | <span style={{display: 'inline-block', maxWidth: '200px', width:'200px'}}>说明</span>  |
| --- | --- | --- | --- | --- | --- |
| bind | 127.0.0.1 | 127.0.0.1 | 127.0.0.1 -::1  (可一行写多个地址) |     |     |
| bind-source-addr | -  | -  | 支持绑定端口 |     | 格式：<br/>bind-source-addr 10.0.0.1 |
| protected-mode | yes | yes | yes |     |     |
| enable-protected-configs<br/>enable-debug-command<br/>enable-module-command | -  | -  | no<br/>no<br/>no | no<br/>yes<br/>local |     |
| port | 6379 | 6379 | 6379 |     |     |
| tcp-backlog | 511 | 511 | 511 |     | In high requests-per-second environments you need a high backlog in order to avoid slow clients connection issues. Note that the Linux kernel will silently truncate it to the value of /proc/sys/net/core/somaxconn so make sure to raise both the value of somaxconn and tcp_max_syn_backlog in order to get the desired effect. |
| unixsocket | ""  | ""  | ""  |     |     |
| unixsocketperm | ""  | ""  | ""  |     |     |
| timeout | 0   | 0   | 0   | 0-100000 | Close the connection after a client is idle for N seconds (0 to disable) |
| tcp-keepalive | 300 | 300 | 300 |     |     |
| socket-mark-id | -  | -  | 0   |     | Apply OS-specific mechanism to mark the listening socket with the specified ID, to support advanced routing and filtering capabilities.<br/>On Linux, the ID represents a connection mark.<br/>On FreeBSD, the ID represents a socket cookie ID.<br/>On OpenBSD, the ID represents a route table ID. |

**TLS/SSL**

| <span style={{display:'inline-block', maxWidth:'240px', width:'240px'}}>参数</span>  | <span style={{display:'inline-block', maxWidth:'48px', width:'48px'}}>5.0 默认值</span> | <span style={{display:'inline-block', maxWidth: '48px', width:'48px'}}>6.0 默认值</span> | <span style={{display: 'inline-block', maxWidth: '48px', width:'48px'}}>7.2 默认值</span> | <span style={{display:'inline-block', maxWidth: '100px', width:'100px'}}>取值范围</span> | <span style={{display: 'inline-block', maxWidth: '200px', width:'200px'}}>说明</span>  |
| --- | --- | --- | --- | --- | --- |
| tls-port | -  | 6379 | 6379 |     |     |
| tls-cert-file | -  |     |     |     |     |
| tls-key-file | -  |     |     |     |     |
| tls-key-file-pass | -  | -  | 支持密码 |     | TLS key 密码 |
| tls-dh-params-file | -  |     |     |     | Configure a DH parameters file to enable Diffie-Hellman (DH) key exchange |
| tls-ca-cert-file | -  |     |     |     |     |
| tls-ca-cert-dir | -  |     |     |     |     |
| tls-auth-clients | -  | no  | no  | no |<br/>optional |<br/>yes | By default, clients (including replica servers) on a TLS port are required to authenticate using valid client side certificates.<br/>If "no" is specified, client certificates are not required and not accepted.<br/>If "optional" is specified, client certificates are accepted and must be valid if provided, but are not required. |
| tls-replication | -  | no  | no  |     | By default, a Redis replica does not attempt to establish a TLS connection with its master.<br/>Use the following directive to enable TLS on replication links. |
| tls-cluster | -  | no  | no  |     | By default, the Redis Cluster bus uses a plain TCP connection. To enable TLS for the bus protocol, use the following directive |
| tls-protocols | -  | "TLSv1.2 TLSv1.3"  | "TLSv1.2 TLSv1.3"  |     |     |
| tls-ciphers | -  | DEFAULT:!MEDIUM (必须大写) | DEFAULT:!MEDIUM |     | Configure allowed ciphers. See the ciphers(1ssl) manpage for more information about the syntax of this string.<br/>|
| tls-ciphersuites | -  | TLS_CHACHA20_POLY1305_SHA256 (必须大写) | TLS_CHACHA20_POLY1305_SHA256 |     |     |
| tls-prefer-server-ciphers | -  | 根据客户端设计 | 根据客户端设计 |     |     |
| tls-session-caching | -  | no  | no  |     |     |
| tls-session-cache-size | -  | 20480 | 20480 |     |     |
| tls-session-cache-timeout | -  | 300 | 300 |     |     |

**SNAPSHOTTING**

| <span style={{display:'inline-block', maxWidth:'240px', width:'240px'}}>参数</span>  | <span style={{display:'inline-block', maxWidth:'48px', width:'48px'}}>5.0 默认值</span> | <span style={{display:'inline-block', maxWidth: '48px', width:'48px'}}>6.0 默认值</span> | <span style={{display: 'inline-block', maxWidth: '48px', width:'48px'}}>7.2 默认值</span> | <span style={{display:'inline-block', maxWidth: '100px', width:'100px'}}>取值范围</span> | <span style={{display: 'inline-block', maxWidth: '200px', width:'200px'}}>说明</span>  |
| --- | --- | --- | --- | --- | --- |
| save | save 900 1<br/>save 300 10<br/>save 60 10000 | save 900 1<br/>save 300 10<br/>save 60 10000 | save 3600 1 300 100 60 10000 |     | Save the DB on disk: `save <seconds> <changes>` Will save the DB if both the given number of seconds and the given number of write operations against the DB occurred. |
| stop-writes-on-bgsave-error | yes | yes | yes |     | By default Redis will stop accepting writes if RDB snapshots are enabledn(at least one save point) and the latest background save failed.nThis will make the user aware (in a hard way) that data is not persistingnon disk properly, otherwise chances are that no one will notice and somendisaster will happen. |
| rdbcompression | yes | yes | yes |     | Compress string objects using LZF when dump .rdb databases?nBy default compression is enabled as it's almost always a win.nIf you want to save some CPU in the saving child set it to 'no' butnthe dataset will likely be bigger if you have compressible values or keys. |
| rdbchecksum | yes | yes | yes |     |     |
| sanitize-dump-payload | -  | -  | no  | no<br/>yes<br/>clients | Enables or disables full sanitation checks for ziplist and listpack etc when loading an RDB or RESTORE payload. This reduces the chances of a assertion or crash later on while processing commands. Options:<ul><li>no - Never perform full sanitation</li>/g<li>yes- Always perform full sanitation</li><li>clients - Perform full sanitation only for user connections.</li></ul>Excludes: RDB files, RESTORE commands received from the master connection, and client connections which have the skip-sanitize-payload ACL flag.<br/>The default should be 'clients' but since it currently affects cluster resharding via MIGRATE, it is temporarily set to 'no' by default. |
| dbfilename | dump.rdb | dump.rdb | dump.rdb |     |     |
| rdb-del-sync-files | -  | no  | no  |     | Remove RDB files used by replication in instances without persistence enabled. By default this option is disabled, however there are environments where for regulations or other security concerns, RDB files persisted on disk by masters in order to feed replicas, or stored on disk by replicas in order to load them for the initial synchronization, should be deleted ASAP. Note that this option ONLY WORKS in instances that have both AOF and RDB persistence disabled, otherwise is completely ignored.<br/>An alternative (and sometimes better) way to obtain the same effect is to use diskless replication on both master and replicas instances. However in the case of replicas, diskless is not always an option. |
| dir | ./  | ./  | ./  |     |     |

**REPLICATION**

| <span style={{display:'inline-block', maxWidth:'240px', width:'240px'}}>参数</span>  | <span style={{display:'inline-block', maxWidth:'48px', width:'48px'}}>5.0 默认值</span> | <span style={{display:'inline-block', maxWidth: '48px', width:'48px'}}>6.0 默认值</span> | <span style={{display: 'inline-block', maxWidth: '48px', width:'48px'}}>7.2 默认值</span> | <span style={{display:'inline-block', maxWidth: '100px', width:'100px'}}>取值范围</span> | <span style={{display: 'inline-block', maxWidth: '200px', width:'200px'}}>说明</span>  |
| --- | --- | --- | --- | --- | --- |
| replicaof  |     |     |     |     |     |
| masterauth |     |     |     |     |     |
| masteruser | -  | ""  | ""  |     |     |
| replica-serve-stale-data  | yes | yes | yes |     | When a replica loses its connection with the master, or when the replication is still in progress, the replica can act in two different ways:<ol><li>If replica-serve-stale-data is set to 'yes' (the default) the replica will still reply to client requests, possibly with out of date data, or the data set may just be empty if this is the first synchronization.</li><li> If replica-serve-stale-data is set to 'no' the replica will reply with an error "SYNC with master in progress" to all commands except: INFO, REPLICAOF, AUTH, PING, SHUTDOWN, REPLCONF, ROLE, CONFIG, SUBSCRIBE, UNSUBSCRIBE, PSUBSCRIBE, PUNSUBSCRIBE, PUBLISH, PUBSUB, COMMAND, POST, HOST and LATENCY. </li></ol>|
| replica-read-only  | yes | yes | yes |     | Since Redis 2.6 by default replicas are read-only. |
| repl-diskless-sync | no  | no  | yes |     | With disk-backed replication, while the RDB file is generated, more replicas can be queued and served with the RDB file as soon as the current child producing the RDB file finishes its work. With diskless replication instead once the transfer starts, new replicas arriving will be queued and a new transfer will start when the current one terminates.<br/>When diskless replication is used, the master waits a configurable amount of time (in seconds) before starting the transfer in the hope that multiple replicas will arrive and the transfer can be parallelized.<br/>With slow disks and fast (large bandwidth) networks, diskless replication works better. |
| repl-diskless-sync-delay | 5   | 5   | 5   |     | When diskless replication is enabled, it is possible to configure the delay the server waits in order to spawn the child that transfers the RDB via socket to the replicas.<br/>This is important since once the transfer starts, it is not possible to serve new replicas arriving, that will be queued for the next RDB transfer, so the server waits a delay in order to let more replicas arrive.<br/>The delay is specified in seconds, and by default is 5 seconds. To disable it entirely just set it to 0 seconds and the transfer will start ASAP. |
| repl-diskless-sync-max-replicas | -  | -  | 0   |     | When diskless replication is enabled with a delay, it is possible to let the replication start before the maximum delay is reached if the maximum number of replicas expected have connected. Default of 0 means that the maximum is not defined and Redis will wait the full delay. |
| repl-diskless-load | -  | disabled | disabled | disabled | on-empty-db | swapdb | Replica can load the RDB it reads from the replication link directly from the socket, or store the RDB to a file and read that file after it was completely received from the master.<br/>In many cases the disk is slower than the network, and storing and loading the RDB file may increase replication time (and even increase the master\'s Copy on Write memory and salve buffers).<br/>However, parsing the RDB file directly from the socket may mean that we have to flush the contents of the current database before the full rdb was received. For this reason we have the following options: <ul><li>"disabled" - Don't use diskless load (store the rdb file to the disk first)  </li><li>"on-empty-db" - Use diskless load only when it is completely safe.  </li><li>"swapdb" - Keep a copy of the current db contents in RAM while parsing the data directly from the socket. note that this requires sufficient memory, if you don't have it, you risk an OOM kill. </li></ul>|
| repl-ping-replica-period 5 | 10  | 10  | 10  |     | Replicas send PINGs to server in a predefined interval |
| repl-timeout | 60  | 60  | 60  |     | The following option sets the replication timeout for:<br/>1) Bulk transfer I/O during SYNC, from the point of view of replica.<br/>2) Master timeout from the point of view of replicas (data, pings).<br/>3) Replica timeout from the point of view of masters (REPLCONF ACK pings).<br/>It is important to make sure that this value is greater than the value specified for repl-ping-replica-period otherwise a timeout will be detected every time there is low traffic between the master and the replica. The default value is 60 seconds. |
| repl-disable-tcp-nodelay | no  | no  | no  |     | Disable TCP_NODELAY on the replica socket after SYNC?<br/>If you select "yes" Redis will use a smaller number of TCP packets and less bandwidth to send data to replicas. But this can add a delay for the data to appear on the replica side, up to 40 milliseconds with Linux kernels using a default configuration.<br/>If you select "no" the delay for data to appear on the replica side will be reduced but more bandwidth will be used for replication.<br/>By default we optimize for low latency, but in very high traffic conditions or when the master and replicas are many hops away, turning this to "yes" may be a good idea. |
| repl-backlog-size | 1mb | 1mb | 1mb |     | Set the replication backlog size. The backlog is a buffer that accumulates replica data when replicas are disconnected for some time, so that when a replica wants to reconnect again, often a full resync is not needed, but a partial resync is enough, just passing the portion of data the replica missed while disconnected.<br/>The bigger the replication backlog, the longer the replica can endure the disconnect and later be able to perform a partial resynchronization.<br/>The backlog is only allocated if there is at least one replica connected. |
| repl-backlog-ttl | 3600 | 3600 | 3600 |     | After a master has no connected replicas for some time, the backlog will be freed. The following option configures the amount of seconds that need to elapse, starting from the time the last replica disconnected, for the backlog buffer to be freed.<br/>Note that replicas never free the backlog for timeout, since they may be promoted to masters later, and should be able to correctly "partially resynchronize" with other replicas: hence they should always accumulate backlog.<br/>A value of 0 means to never release the backlog. |
| replica-priority 5 | 100 | 100 | 100 |     | The replica priority is an integer number published by Redis in the INFOnoutput. It is used by Redis Sentinel in order to select a replica to promoteninto a master if the master is no longer working correctly.nnA replica with a low priority number is considered better for promotion, sonfor instance if there are three replicas with priority 10, 100, 25 Sentinelnwill pick the one with priority 10, that is the lowest.nnHowever a special priority of 0 marks the replica as not able to perform thenrole of master, so a replica with priority of 0 will never be selected bynRedis Sentinel for promotion |
| propagation-error-behavior | -  | -  | ignore | ignore<br/>panic<br/>panic-on-replicas | If an application wants to ensure there is no data divergence, this configuration should be set to 'panic' instead. The value can also be set to 'panic-on-replicas' to only panic when a replica encounters an error on the replication stream. One of these two panic values will become the default value in the future once there are sufficient safety mechanisms in place to prevent false positive crashes. |
| replica-ignore-disk-write-errors | -  | -  | no  |     | Replica ignore disk write errors controls the behavior of a replica when it is unable to persist a write command received from its master to disk. By default, this configuration is set to 'no' and will crash the replica in this condition.<br/>It is not recommended to change this default, however in order to be compatible with older versions of Redis this config can be toggled to 'yes' which will just log a warning and execute the write command it got from the master. |
| replica-announced | -  | -  | yes |     | By default, Redis Sentinel includes all replicas in its reports. A replica can be excluded from Redis Sentinel\'s announcements. An unannounced replica will be ignored by the `sentinel replicas <master>` command and won't be exposed to Redis Sentinel\'s clients.<br/>This option does not change the behavior of replica-priority. Even with replica-announced set to 'no', the replica can be promoted to master. To prevent this behavior, set replica-priority to `0`. |
| min-replicas-to-write 5 | 0   | 0   | 0   |     | It is possible for a master to stop accepting writes if there are less thannN replicas connected, having a lag less or equal than M seconds.nnThe N replicas need to be in "online" state.nnThe lag in seconds, that must be \<\= the specified value, is calculated fromnthe last ping received from the replica, that is usually sent every second.nnThis option does not GUARANTEE that N replicas will accept the write, butnwill limit the window of exposure for lost writes in case not enough replicasnare available, to the specified number of seconds.nnFor example to require at least 3 replicas with a lag \<\= 10 seconds use:nnmin-replicas-to-write 3nmin-replicas-max-lag 10nnSetting one or the other to 0 disables the feature.nnBy default min-replicas-to-write is set to 0 (feature disabled) andnmin-replicas-max-lag is set to 10. |
| min-replicas-max-lag 5 | 10  | 10  | 10  |     | It is possible for a master to stop accepting writes if there are less thannN replicas connected, having a lag less or equal than M seconds.nnThe N replicas need to be in "online" state.nnThe lag in seconds, that must be \<\= the specified value, is calculated fromnthe last ping received from the replica, that is usually sent every second.nnThis option does not GUARANTEE that N replicas will accept the write, butnwill limit the window of exposure for lost writes in case not enough replicasnare available, to the specified number of seconds.nnFor example to require at least 3 replicas with a lag \<\= 10 seconds use:nnmin-replicas-to-write 3nmin-replicas-max-lag 10nnSetting one or the other to 0 disables the feature.nnBy default min-replicas-to-write is set to 0 (feature disabled) andnmin-replicas-max-lag is set to 10. |
| slave-announce-ip<br/>replica-announce-ip |     |     |     |     |     |
| slave-announce-port<br/>replica-announce-port |     |     |     |     |     |

**KEYS TRACKING**

| <span style={{display:'inline-block', maxWidth:'240px', width:'240px'}}>参数</span>  | <span style={{display:'inline-block', maxWidth:'48px', width:'48px'}}>5.0 默认值</span> | <span style={{display:'inline-block', maxWidth: '48px', width:'48px'}}>6.0 默认值</span> | <span style={{display: 'inline-block', maxWidth: '48px', width:'48px'}}>7.2 默认值</span> | <span style={{display:'inline-block', maxWidth: '100px', width:'100px'}}>取值范围</span> | <span style={{display: 'inline-block', maxWidth: '200px', width:'200px'}}>说明</span>  |
| --- | --- | --- | --- | --- | --- |
| tracking-table-max-keys | -  | 1000000 | 1000000 |     | 设置 invalidation table 中key 的数量 |

**SECURITY**

| <span style={{display:'inline-block', maxWidth:'240px', width:'240px'}}>参数</span>  | <span style={{display:'inline-block', maxWidth:'48px', width:'48px'}}>5.0 默认值</span> | <span style={{display:'inline-block', maxWidth: '48px', width:'48px'}}>6.0 默认值</span> | <span style={{display: 'inline-block', maxWidth: '48px', width:'48px'}}>7.2 默认值</span> | <span style={{display:'inline-block', maxWidth: '100px', width:'100px'}}>取值范围</span> | <span style={{display: 'inline-block', maxWidth: '200px', width:'200px'}}>说明</span>  |
| --- | --- | --- | --- | --- | --- |
| acllog-max-len | -  | 128 | 128 |     |     |
| aclfile | -  | ""  | ""  |     |     |
| requirepass |     |     |     |     |     |
| acl-pubsub-default | -  | -  | resetchannels | allchannels-grants access to all Pub/Sub channelsresetchannels-revokes acess to all Pub/Sub channels | The default Pub/Sub channels permission if new users is controlled by the acl-pubsub-default configuration directive, which accepts one of these values |
| rename-command |     |     |     |     |     |
| acllog-max-len | -  | 128 | 128 |     |     |
| aclfile | -  | ""  | ""  |     |     |
| requirepass |     |     |     |     |     |
| acl-pubsub-default | -  | -  | resetchannels | allchannels-grants access to all Pub/Sub channelsresetchannels-revokes acess to all Pub/Sub channels | The default Pub/Sub channels permission if new users is controlled by the acl-pubsub-default configuration directive, which accepts one of these values |
| rename-command |     |     |     |     |     |

**CLIENTS**

| <span style={{display:'inline-block', maxWidth:'240px', width:'240px'}}>参数</span>  | <span style={{display:'inline-block', maxWidth:'48px', width:'48px'}}>5.0 默认值</span> | <span style={{display:'inline-block', maxWidth: '48px', width:'48px'}}>6.0 默认值</span> | <span style={{display: 'inline-block', maxWidth: '48px', width:'48px'}}>7.2 默认值</span> | <span style={{display:'inline-block', maxWidth: '100px', width:'100px'}}>取值范围</span> | <span style={{display: 'inline-block', maxWidth: '200px', width:'200px'}}>说明</span>  |
| --- | --- | --- | --- | --- | --- |
| maxclients | 10000 | 10000 | 10000 |     | Set the max number of connected clients at the same time. By defaultnthis limit is set to 10000 clients, however if the Redis server is notnable to configure the process file limit to allow for the specified limitnthe max number of allowed clients is set to the current file limitnminus 32 (as Redis reserves a few file descriptors for internal uses).nnOnce the limit is reached Redis will close all the new connections sendingnan error 'max number of clients reached'.nnIMPORTANT: When Redis Cluster is used, the max number of connections is alsonshared with the cluster bus: every node in the cluster will use twonconnections, one incoming and another outgoing. It is important to size thenlimit accordingly in case of very large clusters. |

**MEMORY MANAGEMENT**

| <span style={{display:'inline-block', maxWidth:'240px', width:'240px'}}>参数</span>  | <span style={{display:'inline-block', maxWidth:'48px', width:'48px'}}>5.0 默认值</span> | <span style={{display:'inline-block', maxWidth: '48px', width:'48px'}}>6.0 默认值</span> | <span style={{display: 'inline-block', maxWidth: '48px', width:'48px'}}>7.2 默认值</span> | <span style={{display:'inline-block', maxWidth: '100px', width:'100px'}}>取值范围</span> | <span style={{display: 'inline-block', maxWidth: '200px', width:'200px'}}>说明</span>  |
| --- | --- | --- | --- | --- | --- |
| maxmemory |     |     |     |     |     |
| maxmemory-policy | noeviction | noeviction | noeviction | noeviction | MAXMEMORY POLICY: how Redis will select what to remove when maxmemory is reached. You can select one from the following behaviors:  <ul><li>`volatile-lru`: Evict using approximated LRU, only keys with an expire set.</li><li>`allkeys-lru`: Evict any key using approximated LRU.</li><li>`volatile-lfu`: Evict using approximated LFU, only keys with an expire set.</li><li>`allkeys-lfu`: Evict any key using approximated LFU. </li><li>`volatile-random`: Remove a random key having an expire set. </li><li>`allkeys-random`: Remove a random key, any key.</li><li>`volatile-ttl`: Remove the key with the nearest expire time (minor TTL) </li><li>`noeviction`: Don't evict anything, just return an error on write operations.</li></ul>LRU means Least Recently Used<br/>LFU means Least Frequently Used |
| maxmemory-samples | 5   | 5   | 5   |     | LRU, LFU and minimal TTL algorithms are not precise algorithms but approximated algorithms (in order to save memory), so you can tune it for speed or accuracy. By default Redis will check five keys and pick the one that was used least recently, you can change the sample size using the following configuration directive.<br/>The default of 5 produces good enough results. 10 Approximates very closely true LRU but costs more CPU. 3 is faster but not very accurate. |
| maxmemory-eviction-tenacity | -  | -  | 10  | 0 = minimum latency10 = default100 = process without regard to latency | Eviction processing is designed to function well with the default setting.<br/>If there is an unusually large amount of write traffic, this value may need to be increased.  Decreasing this value may reduce latency at the risk of eviction processing effectiveness |
| replica-ignore-maxmemor | yes | yes | yes |     | Starting from Redis 5, by default a replica will ignore its maxmemory setting (unless it is promoted to master after a failover or manually). It means that the eviction of keys will be just handled by the master, sending the DEL commands to the replica as keys evict in the master side. |
| active-expire-effort | -  | 1   | 1   | 1-10 | Redis reclaims expired keys in two ways: upon access when those keys are found to be expired, and also in background, in what is called the "active expire key". The key space is slowly and interactively scanned looking for expired keys to reclaim, so that it is possible to free memory of keys that are expired and will never be accessed again in a short time.<br/>The default effort of the expire cycle will try to avoid having more than ten percent of expired keys still in memory, and will try to avoid consuming more than 25% of total memory and to add latency to the system. However it is possible to increase the expire "effort" that is normally set to "1", to a greater value, up to the value "10". At its maximum value the system will use more CPU, longer cycles (and technically may introduce more latency), and will tolerate less already expired keys still present in the system. It's a tradeoff between memory, CPU and latency. |

**LAZY FREEING**

| <span style={{display:'inline-block', maxWidth:'240px', width:'240px'}}>参数</span>  | <span style={{display:'inline-block', maxWidth:'48px', width:'48px'}}>5.0 默认值</span> | <span style={{display:'inline-block', maxWidth: '48px', width:'48px'}}>6.0 默认值</span> | <span style={{display: 'inline-block', maxWidth: '48px', width:'48px'}}>7.2 默认值</span> | <span style={{display:'inline-block', maxWidth: '100px', width:'100px'}}>取值范围</span> | <span style={{display: 'inline-block', maxWidth: '200px', width:'200px'}}>说明</span>  |
| --- | --- | --- | --- | --- | --- |
| lazyfree-lazy-eviction | no  | no  | no  |     |     |
| lazyfree-lazy-expire | no  | no  | no  |     |     |
| lazyfree-lazy-server-del | no  | no  | no  |     |     |
| replica-lazy-flus | no  | no  | no  |     |     |
| lazyfree-lazy-user-del | -  | no  | no  |     |     |

**THREADED I/O**

| <span style={{display:'inline-block', maxWidth:'240px', width:'240px'}}>参数</span>  | <span style={{display:'inline-block', maxWidth:'48px', width:'48px'}}>5.0 默认值</span> | <span style={{display:'inline-block', maxWidth: '48px', width:'48px'}}>6.0 默认值</span> | <span style={{display: 'inline-block', maxWidth: '48px', width:'48px'}}>7.2 默认值</span> | <span style={{display:'inline-block', maxWidth: '100px', width:'100px'}}>取值范围</span> | <span style={{display: 'inline-block', maxWidth: '200px', width:'200px'}}>说明</span>  |
| --- | --- | --- | --- | --- | --- |
| io-threads | -  | -  |     |     |     |
| io-threads-do-reads | -  | no  | no  |     |     |

**KERNEL OOM CONTROL**

| <span style={{display:'inline-block', maxWidth:'240px', width:'240px'}}>参数</span>  | <span style={{display:'inline-block', maxWidth:'48px', width:'48px'}}>5.0 默认值</span> | <span style={{display:'inline-block', maxWidth: '48px', width:'48px'}}>6.0 默认值</span> | <span style={{display: 'inline-block', maxWidth: '48px', width:'48px'}}>7.2 默认值</span> | <span style={{display:'inline-block', maxWidth: '100px', width:'100px'}}>取值范围</span> | <span style={{display: 'inline-block', maxWidth: '200px', width:'200px'}}>说明</span>  |
| --- | --- | --- | --- | --- | --- |
| oom-score-adj | -  | no  | no  |     |     |
| oom-score-adj-values | -  | 0 200 800 | 0 200 800 |     |     |

**KERNEL transparent hugepage CONTROL**

| <span style={{display:'inline-block', maxWidth:'240px', width:'240px'}}>参数</span>  | <span style={{display:'inline-block', maxWidth:'48px', width:'48px'}}>5.0 默认值</span> | <span style={{display:'inline-block', maxWidth: '48px', width:'48px'}}>6.0 默认值</span> | <span style={{display: 'inline-block', maxWidth: '48px', width:'48px'}}>7.2 默认值</span> | <span style={{display:'inline-block', maxWidth: '100px', width:'100px'}}>取值范围</span> | <span style={{display: 'inline-block', maxWidth: '200px', width:'200px'}}>说明</span>  |
| --- | --- | --- | --- | --- | --- |
| disbale-thp | -  | -  | yes | no/yes | Usually the kernel Transparent Huge Pages control is set to "madvise" or "never" by default (/sys/kernel/mm/transparent_hugepage/enabled), in which case this config has no effect. On systems in which it is set to "always", redis will attempt to disable it specifically for the redis process in order to avoid latency problems specifically with fork(2) and CoW.<br/>If for some reason you prefer to keep it enabled, you can set this config to "no" and the kernel global to "always". |

**APPEND ONLY MODE**

| <span style={{display:'inline-block', maxWidth:'240px', width:'240px'}}>参数</span>  | <span style={{display:'inline-block', maxWidth:'48px', width:'48px'}}>5.0 默认值</span> | <span style={{display:'inline-block', maxWidth: '48px', width:'48px'}}>6.0 默认值</span> | <span style={{display: 'inline-block', maxWidth: '48px', width:'48px'}}>7.2 默认值</span> | <span style={{display:'inline-block', maxWidth: '100px', width:'100px'}}>取值范围</span> | <span style={{display: 'inline-block', maxWidth: '200px', width:'200px'}}>说明</span>  |
| --- | --- | --- | --- | --- | --- |
| appendonly | no  | no  | no  |     | By default Redis asynchronously dumps the dataset on disk. This mode isngood enough in many applications, but an issue with the Redis process orna power outage may result into a few minutes of writes lost (depending onnthe configured save points).nnThe Append Only File is an alternative persistence mode that providesnmuch better durability. For instance using the default data fsync policyn(see later in the config file) Redis can lose just one second of writes in andramatic event like a server power outage, or a single write if somethingnwrong with the Redis process itself happens, but the operating system isnstill running correctly.nnAOF and RDB persistence can be enabled at the same time without problems.nIf the AOF is enabled on startup Redis will load the AOF, that is the filenwith the better durability guarantees. |
| appendfilename | appendonly.aof | appendonly.aof | appendonly.aof |     |     |
| appenddirname | -  | -  | appendonlydir |     |     |
| appendfsync | everysec | everysec | everysec | no | everysec | always | The fsync() call tells the Operating System to actually write data on diskninstead of waiting for more data in the output buffer. Some OS will really flushndata on disk, some other OS will just try to do it ASAP. |
| no-appendfsync-on-rewrite | no  | no  | no  |     | When the AOF fsync policy is set to always or everysec, and a background saving process (a background save or AOF log background rewriting) is performing a lot of I/O against the disk, in some Linux configurations Redis may block too long on the fsync() call. Note that there is no fix for this currently, as even performing fsync in a different thread will block our synchronous write(2) call.<br/>In order to mitigate this problem it's possible to use the following option that will prevent fsync() from being called in the main process while a BGSAVE or BGREWRITEAOF is in progress.<br/>This means that while another child is saving, the durability of Redis is the same as "appendfsync none". In practical terms, this means that it is possible to lose up to 30 seconds of log in the worst scenario (with the default Linux settings).<br/>If you have latency problems turn this to "yes". Otherwise leave it as "no" that is the safest pick from the point of view of durability. |
| auto-aof-rewrite-percentage | 100 | 100 | 100 |     | Automatic rewrite of the append only file.<br/>Redis is able to automatically rewrite the log file implicitly calling BGREWRITEAOF when the AOF log size grows by the specified percentage.<br/>This is how it works: Redis remembers the size of the AOF file after the latest rewrite (if no rewrite has happened since the restart, the size of the AOF at startup is used).<br/>This base size is compared to the current size. If the current size is bigger than the specified percentage, the rewrite is triggered. Also you need to specify a minimal size for the AOF file to be rewritten, this is useful to avoid rewriting the AOF file even if the percentage increase is reached but it is still pretty small.<br/>Specify a percentage of zero in order to disable the automatic AOF rewrite feature. |
| auto-aof-rewrite-min-size | 64mb | 64mb | 64mb |     | Automatic rewrite of the append only file.nRedis is able to automatically rewrite the log file implicitly callingnBGREWRITEAOF when the AOF log size grows by the specified percentage.nnThis is how it works: Redis remembers the size of the AOF file after thenlatest rewrite (if no rewrite has happened since the restart, the size ofnthe AOF at startup is used).nnThis base size is compared to the current size. If the current size isnbigger than the specified percentage, the rewrite is triggered. Alsonyou need to specify a minimal size for the AOF file to be rewritten, thisnis useful to avoid rewriting the AOF file even if the percentage increasenis reached but it is still pretty small.nnSpecify a percentage of zero in order to disable the automatic AOFnrewrite feature. |
| aof-load-truncated | yes | yes | yes |     | If aof-load-truncated is set to yes, a truncated AOF file is loaded andnthe Redis server starts emitting a log to inform the user of the event.nOtherwise if the option is set to no, the server aborts with an errornand refuses to start. When the option is set to no, the user requiresnto fix the AOF file using the "redis-check-aof" utility before to restartnthe server. |
| aof-use-rdb-preamble | yes | yes | yes |     | When rewriting the AOF file, Redis is able to use an RDB preamble in the AOF file for faster rewrites and recoveries. When this option is turned on the rewritten AOF file is composed of two different stanzas:<br/>[RDB file][AOF tail]<br/>When loading, Redis recognizes that the AOF file starts with the "REDIS" string and loads the prefixed RDB file, then continues loading the AOF tail. |
| aof-timestamp-enabled | -  | -  | no  | no/yes | Redis supports recording timestamp annotations in the AOF to support restoring the data from a specific point-in-time. However, using this capability changes the AOF format in a way that may not be compatible with existing AOF parsers. |

**SHUTDOWN**

| <span style={{display:'inline-block', maxWidth:'240px', width:'240px'}}>参数</span>  | <span style={{display:'inline-block', maxWidth:'48px', width:'48px'}}>5.0 默认值</span> | <span style={{display:'inline-block', maxWidth: '48px', width:'48px'}}>6.0 默认值</span> | <span style={{display: 'inline-block', maxWidth: '48px', width:'48px'}}>7.2 默认值</span> | <span style={{display:'inline-block', maxWidth: '100px', width:'100px'}}>取值范围</span> | <span style={{display: 'inline-block', maxWidth: '200px', width:'200px'}}>说明</span>  |
| --- | --- | --- | --- | --- | --- |
| shutdown-timeout | -  | -  | 10  |     |     |
| shutdown-on-sigint<br/>shutdown-on-sigterm | -  | -  | default | <ul><li>`default` - 如果设置了save,保存RDB,同时等待 replicas lag</li><li>`save` - force db save event if not save points are configed</li><li>`nosave` - prevents db save</li><li>`now` - skip wait for lagging</li><li>`force` - ignore any error and exit</li></ul>|     |

**NON-DETERMINISTIC LONG BLOCKING COMMANDS**

| <span style={{display:'inline-block', maxWidth:'240px', width:'240px'}}>参数</span>  | <span style={{display:'inline-block', maxWidth:'48px', width:'48px'}}>5.0 默认值</span> | <span style={{display:'inline-block', maxWidth: '48px', width:'48px'}}>6.0 默认值</span> | <span style={{display: 'inline-block', maxWidth: '48px', width:'48px'}}>7.2 默认值</span> | <span style={{display:'inline-block', maxWidth: '100px', width:'100px'}}>取值范围</span> | <span style={{display: 'inline-block', maxWidth: '200px', width:'200px'}}>说明</span>  |
| --- | --- | --- | --- | --- | --- |
| lua-time-limit | 5000 | 5000 | 5000 |     |     |
| busy-reply-threshold | -  | -  | 5000 |     |     |

**REDIS CLUSTER**

| <span style={{display:'inline-block', maxWidth:'240px', width:'240px'}}>参数</span>  | <span style={{display:'inline-block', maxWidth:'48px', width:'48px'}}>5.0 默认值</span> | <span style={{display:'inline-block', maxWidth: '48px', width:'48px'}}>6.0 默认值</span> | <span style={{display: 'inline-block', maxWidth: '48px', width:'48px'}}>7.2 默认值</span> | <span style={{display:'inline-block', maxWidth: '100px', width:'100px'}}>取值范围</span> | <span style={{display: 'inline-block', maxWidth: '200px', width:'200px'}}>说明</span>  |
| --- | --- | --- | --- | --- | --- |
| cluster-enabled | no  | no  | no  |     |     |
| cluster-config-file | ""  | ""  | ""  |     |     |
| cluster-node-timeout | 15000 | 15000 | 15000 |     |     |
| cluster-port |     |     |     |     |     |
| cluster-replica-validity-facto | 10  | 10  | 10  |     | A replica of a failing master will avoid to start a failover if its data looks too old.<br/>For maximum availability, it is possible to set the cluster-replica-validity-factor to a value of 0, which means, that replicas will always try to failover the master regardless of the last time they interacted with the master. (However they'll always try to apply a delay proportional to their offset rank).<br/>Zero is the only value able to guarantee that when all the partitions heal the cluster will always be able to continue. |
| cluster-migration-barrier | 1   | 1   | 1   |     | Cluster replicas are able to migrate to orphaned masters, that are mastersnthat are left without working replicas. This improves the cluster abilitynto resist to failures as otherwise an orphaned master can't be failed overnin case of failure if it has no working replicas.nnReplicas migrate to orphaned masters only if there are still at least angiven number of other working replicas for their old master. This numbernis the "migration barrier". A migration barrier of 1 means that a replicanwill migrate only if there is at least 1 other working replica for its masternand so forth. It usually reflects the number of replicas you want for everynmaster in your cluster.nnDefault is 1 (replicas migrate only if their masters remain with at leastnone replica). To disable migration just set it to a very large value.nA value of 0 can be set but is useful only for debugging and dangerousnin production. |
| cluster-allow-replica-migration | -  | -  | yes |     | Turning off this option allows to use less automatic cluster configuration.<br/>It both disables migration to orphaned masters and migration from masters that became empty. |
| cluster-require-full-coverage | yes | yes | yes |     | By default Redis Cluster nodes stop accepting queries if they detect there is at least a hash slot uncovered (no available node is serving it).<br/>This way if the cluster is partially down (for example a range of hash slots are no longer covered) all the cluster becomes, eventually, unavailable.<br/>It automatically returns available as soon as all the slots are covered again.<br/>However sometimes you want the subset of the cluster which is working, to continue to accept queries for the part of the key space that is still covered. In order to do so, just set the cluster-require-full-coverage option to no. |
| cluster-replica-no-failover  | no  | no  | no  |     | This option, when set to yes, prevents replicas from trying to failover its master during master failures. However the master can still perform a manual failover, if forced to do so.<br/>This is useful in different scenarios, especially in the case of multiple data center operations, where we want one side to never be promoted if not in the case of a total DC failure. |
| cluster-allow-reads-when-down | -  | no  | no  |     | This option, when set to yes, allows nodes to serve read traffic while the the cluster is in a down state, as long as it believes it owns the slots.<br/>This is useful for two cases. The first case is for when an application doesn't require consistency of data during node failures or network partitions.<br/>One example of this is a cache, where as long as the node has the data it should be able to serve it.<br/>The second use case is for configurations that don't meet the recommended three shards but want to enable cluster mode and scale later. A master outage in a 1 or 2 shard configuration causes a read/write outage to the entire cluster without this option set, with it set there is only a write outage. Without a quorum of masters, slot ownership will not change automatically. |
| cluster-allow-pubsubshard-when-down | -  | -  | yes |     | This option, when set to yes, allows nodes to serve pubsub shard traffic while the cluster is in a down state, as long as it believes it owns the slots. |
| cluster-link-sendbuf-limit | -  | -  | 0   |     | Cluster link send buffer limit is the limit on the memory usage of an individual cluster bus link's send buffer in bytes. Cluster links would be freed if they exceed this limit. This is to primarily prevent send buffers from growing unbounded on links toward slow peers (E.g. PubSub messages being piled up).<br/>This limit is disabled by default. Enable this limit when 'mem_cluster_links' INFO field and/or 'send-buffer-allocated' entries in the 'CLUSTER LINKS` command output continuously increase.<br/>Minimum limit of 1gb is recommended so that cluster link buffer can fit in at least a single PubSub message by default. (client-query-buffer-limit default value is 1gb) |
| cluster-announce-hostname | -  | -  | ""  |     | Clusters can configure their announced hostname using this config. This is a common use case for applications that need to use TLS Server Name Indication (SNI) or dealing with DNS based routing. By default this value is only shown as additional metadata in the CLUSTER SLOTS command, but can be changed using 'cluster-preferred-endpoint-type' config. This value is communicated along the clusterbus to all nodes, setting it to an empty string will remove the hostname and also propagate the removal. |
| cluster-announce-human-nodename | -  | -  | ""  |     | Clusters can configure an optional nodename to be used in addition to the node ID for debugging and admin information. This name is broadcasted between nodes, so will be used in addition to the node ID when reporting cross node events such as node failures. |
| cluster-preferred-endpoint-type | -  | -  | ip  | ip | hostname | unknown-endpoint |     |

**CLUSTER DOCKER/NAT**

| <span style={{display:'inline-block', maxWidth:'240px', width:'240px'}}>参数</span>  | <span style={{display:'inline-block', maxWidth:'48px', width:'48px'}}>5.0 默认值</span> | <span style={{display:'inline-block', maxWidth: '48px', width:'48px'}}>6.0 默认值</span> | <span style={{display: 'inline-block', maxWidth: '48px', width:'48px'}}>7.2 默认值</span> | <span style={{display:'inline-block', maxWidth: '100px', width:'100px'}}>取值范围</span> | <span style={{display: 'inline-block', maxWidth: '200px', width:'200px'}}>说明</span>  |
| --- | --- | --- | --- | --- | --- |
| cluster-announce-ip |     |     |     |     |     |
| cluster-announce-port |     |     |     |     |     |
| cluster-announce-bus-port |     |     |     |     |     |

**SLOW LOG**

| <span style={{display:'inline-block', maxWidth:'240px', width:'240px'}}>参数</span>  | <span style={{display:'inline-block', maxWidth:'48px', width:'48px'}}>5.0 默认值</span> | <span style={{display:'inline-block', maxWidth: '48px', width:'48px'}}>6.0 默认值</span> | <span style={{display: 'inline-block', maxWidth: '48px', width:'48px'}}>7.2 默认值</span> | <span style={{display:'inline-block', maxWidth: '100px', width:'100px'}}>取值范围</span> | <span style={{display: 'inline-block', maxWidth: '200px', width:'200px'}}>说明</span>  |
| --- | --- | --- | --- | --- | --- |
| slowlog-log-slower-than | 10000 | 10000 | 10000 | 10000-10000000 | You can configure the slow log with two parameters: one tells Redisnwhat is the execution time, in microseconds, to exceed in order for thencommand to get logged, and the other parameter is the length of thenslow log. When a new command is logged the oldest one is removed from thenqueue of logged commands. |
| slowlog-max-len | 128 | 128 | 128 | 100-10000 | You can configure the slow log with two parameters: one tells Redisnwhat is the execution time, in microseconds, to exceed in order for thencommand to get logged, and the other parameter is the length of thenslow log. When a new command is logged the oldest one is removed from thenqueue of logged commands. |

**LATENCY MONITOR**

| <span style={{display:'inline-block', maxWidth:'240px', width:'240px'}}>参数</span>  | <span style={{display:'inline-block', maxWidth:'48px', width:'48px'}}>5.0 默认值</span> | <span style={{display:'inline-block', maxWidth: '48px', width:'48px'}}>6.0 默认值</span> | <span style={{display: 'inline-block', maxWidth: '48px', width:'48px'}}>7.2 默认值</span> | <span style={{display:'inline-block', maxWidth: '100px', width:'100px'}}>取值范围</span> | <span style={{display: 'inline-block', maxWidth: '200px', width:'200px'}}>说明</span>  |
| --- | --- | --- | --- | --- | --- |
| latency-monitor-threshold | 0   | 0   | 0   | 0   | The Redis latency monitoring subsystem samples different operationsnat runtime in order to collect data related to possible sources ofnlatency of a Redis instance. |
| latency-tracking-info-percentiles | -  | -  | 50 99 99.9 |     | By default the exported latency percentiles via the INFO latencystats command are the p50, p99, and p999. |

**EVENT NOTIFICATION**

| <span style={{display:'inline-block', maxWidth:'240px', width:'240px'}}>参数</span>  | <span style={{display:'inline-block', maxWidth:'48px', width:'48px'}}>5.0 默认值</span> | <span style={{display:'inline-block', maxWidth: '48px', width:'48px'}}>6.0 默认值</span> | <span style={{display: 'inline-block', maxWidth: '48px', width:'48px'}}>7.2 默认值</span> | <span style={{display:'inline-block', maxWidth: '100px', width:'100px'}}>取值范围</span> | <span style={{display: 'inline-block', maxWidth: '200px', width:'200px'}}>说明</span>  |
| --- | --- | --- | --- | --- | --- |
| notify-keyspace-events | ""  | ""  | ""  | [KEg$lshzxetmA]+<br/>7.x 新增：<ul><li>`n`: new key</li><li>`d`: module key type events</li></ul> |     |

**ADVANCED CONFIG**

| <span style={{display:'inline-block', maxWidth:'240px', width:'240px'}}>参数</span>  | <span style={{display:'inline-block', maxWidth:'48px', width:'48px'}}>5.0 默认值</span> | <span style={{display:'inline-block', maxWidth: '48px', width:'48px'}}>6.0 默认值</span> | <span style={{display: 'inline-block', maxWidth: '48px', width:'48px'}}>7.2 默认值</span> | <span style={{display:'inline-block', maxWidth: '100px', width:'100px'}}>取值范围</span> | <span style={{display: 'inline-block', maxWidth: '200px', width:'200px'}}>说明</span>  |
| --- | --- | --- | --- | --- | --- |
| hash-max-ziplist-entries | 512 | 512 | 512 |     | Hashes are encoded using a memory efficient data structure when they have a small number of entries, and the biggest entry does not exceed a given threshold. These thresholds can be configured using the following directives. |
| hash-max-ziplist-value | 64  | 64  | 64  |     | Hashes are encoded using a memory efficient data structure when they have ansmall number of entries, and the biggest entry does not exceed a givennthreshold. These thresholds can be configured using the following directives. |
| list-max-ziplist-size | `-2` | `-2` | `-2` | \>\= `-5` | Lists are also encoded in a special way to save a lot of space. The number of entries allowed per internal list node can be specifiednas a fixed maximum size or a maximum number of elements.<br/>For a fixed maximum size, use `-5` through `-1`, meaning:<ul><li>`n-5`: max size: 64 Kb \<\-\- not recommended for normal workloads</li><li>`n-4`: max size: 32 Kb \<\-\- not recommended</li><li>`n-3`: max size: 16 Kb \<\-\- probably not recommended</li><li>`n-2`: max size: 8 Kb \<\-\- good</li><li>`n-1`: max size: 4 Kb \<\-\- good</li></ul>Positive numbers mean store up to _exactly_ that number of elementsnper list node. The highest performing option is usually `-2` (8 Kb size) or `-1` (4 Kb size), but if your use case is unique, adjust the settings as necessary. |
| list-compress-depth | 0   | 0   | 0   |     |     |
| set-max-intset-entries | 512 | 512 | 512 |     | Sets have a special encoding in just one case: when a set is composed of just strings that happen to be integers in radix 10 in the range of 64 bit signed integers. The following configuration setting sets the limit in the size of the set in order to use this special memory saving encoding. |
| zset-max-ziplist-entries | 128 | 128 | 128 |     | Similarly to hashes and lists, sorted sets are also specially encoded innorder to save a lot of space. This encoding is only used when the length andnelements of a sorted set are below the following limits. |
| zset-max-ziplist-value | 64  | 64  | 64  |     | Similarly to hashes and lists, sorted sets are also specially encoded innorder to save a lot of space. This encoding is only used when the length andnelements of a sorted set are below the following limits. |
| hll-sparse-max-bytes | 3000 | 3000 | 3000 | 0-15000 | HyperLogLog sparse representation bytes limit. The limit includes then16 bytes header. When an HyperLogLog using the sparse representation crossesnthis limit, it is converted into the dense representation.nnA value greater than 16000 is totally useless, since at that point thendense representation is more memory efficient.nnThe suggested value is ~ 3000 in order to have the benefits ofnthe space efficient encoding without slowing down too much PFADD,nwhich is O(N) with the sparse encoding. The value can be raised ton~ 10000 when CPU is not a concern, but space is, and the data set isncomposed of many HyperLogLogs with cardinality in the 0 - 15000 range. |
| stream-node-max-bytes | 4096 | 4096 | 4096 |     |     |
| stream-node-max-entries | 100 | 100 | 100 |     |     |
| activerehashing | yes | yes | yes |     | Active rehashing uses 1 millisecond every 100 milliseconds of CPU time innorder to help rehashing the main Redis hash table (the one mapping top-levelnkeys to values). The hash table implementation Redis uses (see dict.c)nperforms a lazy rehashing: the more operation you run into a hash tablenthat is rehashing, the more rehashing "steps" are performed, so if thenserver is idle the rehashing is never complete and some more memory is usednby the hash table. |
| client-output-buffer-limit | normal 0 0 0<br/>replica 256mb 64mb 60<br/>pubsub 32mb 8mb 60 | normal 0 0 0<br/>replica 256mb 64mb 60<br/>pubsub 32mb 8mb 60 | normal 0 0 0<br/>replica 256mb 64mb 60<br/>pubsub 32mb 8mb 60 |     | The client output buffer limits can be used to force disconnection of clientsnthat are not reading data from the server fast enough for some reason (ancommon reason is that a Pub/Sub client can't consume messages as fast as thenpublisher can produce them).nnThe limit can be set differently for the three different classes of clients:nnnormal -> normal clients including MONITOR clientsnreplica -> replica clientsnpubsub -> clients subscribed to at least one pubsub channel or patternnnThe syntax of every client-output-buffer-limit directive is the following: `client-output-buffer-limit <class> <hard limit> <soft limit> <soft seconds>` |
| client-query-buffer-limit | 1gb | 1gb | 1gb |     | Client query buffers accumulate new commands. They are limited to a fixed amount by default in order to avoid that a protocol desynchronization (for instance due to a bug in the client) will lead to unbound memory usage in the query buffer. However you can configure it here if you have very special needs, such us huge multi/exec requests or alike. |
| maxmemory-client | -  | -  | 0   | *   0- client eviction is default<br/>*   1g - 1Gi<br/>*   5% - maxmemory 的 5% | In some scenarios client connections can hog up memory leading to OOM errors or data eviction. To avoid this we can cap the accumulated memory used by all client connections (all pubsub and normal clients). Once we reach that limit connections will be dropped by the server freeing up memory. The server will attempt to drop the connections using the most memory first. We call this mechanism "client eviction". |
| proto-max-bulk-len | 512mb | 512mb | 512mb | >=1mb | In the Redis protocol, bulk requests, that are, elements representing single strings, are normally limited to 512 mb. However you can change this limit here, but must be 1mb or greater |
| hz  | 10  | 10  | 10  | 1-500<br/>建议不超过100 | Redis calls an internal function to perform many background tasks, likenclosing connections of clients in timeout, purging expired keys that arennever requested, and so forth.nnNot all tasks are performed with the same frequency, but Redis checks forntasks to perform according to the specified "hz" value. |
| dynamic-hz | yes | yes | yes |     | Normally it is useful to have an HZ value which is proportional to the number of clients connected. This is useful in order, for instance, to avoid too many clients are processed for each background task invocation in order to avoid latency spikes.<br/>Since the default HZ value by default is conservatively set to 10, Redis offers, and enables by default, the ability to use an adaptive HZ value which will temporarily raise when there are many connected clients.<br/>When dynamic HZ is enabled, the actual configured HZ will be used as a baseline, but multiples of the configured HZ value will be actually used as needed once more clients are connected. In this way an idle instance will use very little CPU time while a busy instance will be more responsive. |
| aof-rewrite-incremental-fsync | yes | yes | yes |     | When a child rewrites the AOF file, if the following option is enabled the file will be fsync-ed every 32 MB of data generated. This is useful in order to commit the file to the disk more incrementally and avoid big latency spikes. |
| rdb-save-incremental-fsync | yes | yes | yes |     | When redis saves RDB file, if the following option is enabled the file will be fsync-ed every 32 MB of data generated. This is useful in order to commit the file to the disk more incrementally and avoid big latency spikes. |
| lfu-log-factor | 10  | 10  | 10  | 0-100 |     |
| lfu-decay-time | 1   | 1   | 1   |     |     |

**ACTIVE DEFRAGMENTATION**

| <span style={{display:'inline-block', maxWidth:'240px', width:'240px'}}>参数</span>  | <span style={{display:'inline-block', maxWidth:'48px', width:'48px'}}>5.0 默认值</span> | <span style={{display:'inline-block', maxWidth: '48px', width:'48px'}}>6.0 默认值</span> | <span style={{display: 'inline-block', maxWidth: '48px', width:'48px'}}>7.2 默认值</span> | <span style={{display:'inline-block', maxWidth: '100px', width:'100px'}}>取值范围</span> | <span style={{display: 'inline-block', maxWidth: '200px', width:'200px'}}>说明</span>  |
| --- | --- | --- | --- | --- | --- |
| activedefrag | yes | no  | no  |     |     |
| active-defrag-ignore-bytes | 100mb | 100mb | 100mb |     |     |
| active-defrag-threshold-lower | 10  | 10  | 10  |     |     |
| active-defrag-threshold-upper | 100 | 100 | 100 |     |     |
| active-defrag-cycle-min | 5   | 1   | 1   |     |     |
| active-defrag-cycle-max | 75  | 25  | 25  |     |     |
| active-defrag-max-scan-fields | 1000 | 1000 | 1000 |     | Maximum number of set/hash/zset/list fields that will be processed from the main dictionary scan |
| jemalloc-bg-thread | -  | yes | yes |     | Jemalloc background thread for purging will be enabled by default |

**TASKSET**

| <span style={{display:'inline-block', maxWidth:'240px', width:'240px'}}>参数</span>  | <span style={{display:'inline-block', maxWidth:'48px', width:'48px'}}>5.0 默认值</span> | <span style={{display:'inline-block', maxWidth: '48px', width:'48px'}}>6.0 默认值</span> | <span style={{display: 'inline-block', maxWidth: '48px', width:'48px'}}>7.2 默认值</span> | <span style={{display:'inline-block', maxWidth: '100px', width:'100px'}}>取值范围</span> | <span style={{display: 'inline-block', maxWidth: '200px', width:'200px'}}>说明</span>  |
| --- | --- | --- | --- | --- | --- |
| server_cpulist | -  |     |     |     | Set redis server/io threads to cpu affinity 0,2,4,6: `server_cpulist 0-7:2` |
| bio_cpulist | -  |     |     |     | Set bio threads to cpu affinity 1,3: `bio_cpulist 1,3` |
| aof_rewrite_cpulist | -  |     |     |     | Set aof rewrite child process to cpu affinity 8,9,10,11: `aof_rewrite_cpulist 8-11` |
| bgsave_cpulist | -  |     |     |     | Set bgsave child process to cpu affinity 1,10,11: `bgsave_cpulist 1,10-11` |
