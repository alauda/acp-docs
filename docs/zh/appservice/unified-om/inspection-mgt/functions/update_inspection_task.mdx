---
weight: 40
---

# 更新与删除巡检任务

## 功能简介

用户可以在使用过程中，通过更新或者删除重建巡检任务的方式，来调整巡检任务的配置，以满足业务的需求。

## 主要功能

### 更新巡检任务

更新巡检任务，和更新其他 K8S 资源的方式类似，通过 `kubectl edit` 命令，即可更新巡检任务的配置。
```shell
kubectl edit iotedgeinspection <inspection_name>
===
# Please edit the object below. Lines beginning with a '#' will be ignored,
# and an empty file will abort the edit. If an error occurs while saving this file will be
# reopened with the relevant failures.
#
apiVersion: middleware.alauda.io/v1
kind: Inspection
metadata:
  annotations:
    cpaas.io/creator: admin
    cpaas.io/display-name: ""
    cpaas.io/updated-at: "2025-02-24T05:57:46Z"
  creationTimestamp: "2025-02-24T05:57:46Z"
  generation: 1
  labels:
    inspection.middleware.io/cluster: business-1
    inspection.middleware.io/component: mysqlcluster
    inspection.middleware.io/namespace: tongrds-1
    inspection.middleware.io/project: tongrds
    inspection.middleware.io/trigger: Schedule
  name: ins1
  namespace: tongrds-1
  resourceVersion: "58781609"
  uid: 530410bc-8d12-476c-b82c-034c9ac4d3ae
spec:
  component: mysqlcluster
  instances:
  - name: '*'
  jobsHistoryLimit: 1
  schedule: 30 18 25 12 *
  trigger: Schedule
status:
  lastJobStatus: ""
  message: ""
```

::: info

这里需要注意的是，用户只能更新`spec`结构中的字段，`status`和`metadata`结构中的字段是只读的。

:::

### 删除巡检任务

删除巡检任务，和删除其他 K8S 资源的方式类似，通过 `kubectl delete` 命令，即可删除巡检任务。

```shell
kubectl delete -n <namespace> inspection <inspection_name>
```

::: info

这里需要注意的是，在设计上 `inspectionjob` 是和 `inspection` 是一一对应的，所以在删除 `inspection` 的时候，会自动删除对应的 `inspectionjob`。

:::
