---
weight: 10
---

# 核心概念

## 实例生命周期

实例生命周期是指 MySQL-MGR 数据库实例从创建到删除的整个过程，包括多个状态和转换。了解实例生命周期有助于您更好地管理数据库实例，确保业务连续性和数据安全。

MySQL-MGR 实例的主要生命周期状态包括：

- **创建中（Creating）**：实例正在创建过程中，资源正在分配和初始化。
- **运行中（Running）**：实例正常运行，可以处理数据库请求。
- **停止中（Stopping）**：实例正在停止过程中，连接正在关闭，数据正在保存。
- **已停止（Stopped）**：实例已停止运行，但数据和配置仍然保留。
- **重启中（Restarting）**：实例正在重新启动过程中。
- **删除中（Deleting）**：实例正在删除过程中，资源正在释放。
- **异常（Abnormal）**：实例处于异常状态，需要检查和修复。

实例状态之间的转换通常由用户操作或系统事件触发，如启动、停止、重启或删除命令，以及系统故障或维护活动。

## 规格管理

规格管理是指调整 MySQL-MGR 实例的计算资源、存储容量和副本数量，以满足业务需求和性能要求。合理的规格配置可以提高资源利用率，降低成本，同时确保数据库性能满足业务需求。

规格管理的主要维度包括：

- **计算资源**：包括 CPU 和内存，直接影响数据库的处理能力和并发性能。
- **存储容量**：决定数据库可以存储的数据量，需要根据数据增长趋势进行规划。
- **副本数量**：影响数据库的高可用性和读取性能，通常建议至少配置 3 个副本。

MySQL-MGR 支持在线调整实例规格，大多数操作可以在不中断服务的情况下完成，但某些操作（如减少副本数量）可能会短暂影响服务可用性。

## 版本管理

版本管理是指控制 MySQL-MGR 实例的软件版本，包括升级策略设置和版本更新操作。合理的版本管理可以确保数据库软件保持最新状态，获取性能改进和安全补丁，同时降低升级风险。

MySQL 版本通常遵循以下命名规则：

- **主版本号**：如 8 in MySQL 8.0，表示主要架构变更，可能包含不兼容的更改。
- **次版本号**：如 0 in MySQL 8.0，表示功能增强，通常保持向后兼容。
- **补丁版本号**：如 30 in MySQL 8.0.30，表示错误修复和安全补丁。

MySQL-MGR 支持设置自动升级策略，可以选择：

- **自动升级**：系统自动应用补丁版本更新。
- **手动确认**：系统提示有可用更新，但需要手动确认。
- **禁止升级**：不自动升级，需要手动触发升级操作。

## 调度配置

调度配置是指控制 MySQL-MGR 实例在 Kubernetes 集群中的部署位置和资源分配策略。合理的调度配置可以提高资源利用率，增强服务可靠性，并满足特定的部署需求。

调度配置的主要方面包括：

- **节点选择器（Node Selector）**：指定实例应该部署在哪些节点上，可以基于节点标签进行选择。
- **亲和性（Affinity）**：控制实例与其他工作负载的部署关系，包括节点亲和性和 Pod 亲和性。
- **反亲和性（Anti-Affinity）**：确保实例的不同副本分布在不同节点上，提高可用性。
- **容忍度（Tolerations）**：允许实例部署在带有特定污点（Taints）的节点上。
- **资源请求和限制**：指定实例可以使用的最小和最大资源量。

MySQL-MGR 支持在实例创建后更新调度配置，但某些更改可能需要重新调度实例，可能导致短暂的服务中断。

## 维护窗口

维护窗口是指计划进行系统维护活动（如版本升级、配置更改）的预定时间段。合理设置维护窗口可以最小化维护活动对业务的影响，同时确保必要的维护工作能够及时完成。

维护窗口的主要特点包括：

- **时间安排**：通常选择在业务低峰期，如深夜或周末。
- **持续时间**：根据维护活动的复杂性和风险级别确定。
- **通知机制**：在维护活动开始前提前通知相关人员。
- **回滚计划**：制定维护失败时的回滚策略。

MySQL-MGR 允许用户设置首选维护窗口，系统会尽量在这些时间段内执行自动维护活动，如小版本升级。对于紧急维护（如安全补丁），系统可能会在维护窗口之外执行。
