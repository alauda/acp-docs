---
weight: 40
---

# 快速开始

本指南将帮助您快速创建并使用 MySQL-MGR 实例，体验其高可用特性和基本功能。

## 前提条件

在开始之前，请确保您已满足以下条件：

- 已安装并配置好容器平台
- 拥有创建数据库实例的权限
- 已安装 MySQL 客户端工具（用于连接测试）

## 创建 MySQL-MGR 实例

### 使用 Web 控制台创建实例

1. 登录容器平台 Web 控制台
2. 导航至「应用服务」→「MySQL-MGR」
3. 点击「创建实例」按钮
4. 填写实例基本信息：
   - 名称：输入实例名称，例如 `my-mgr-demo`
   - 命名空间：选择部署实例的命名空间
   - 版本：选择 MySQL 版本，推荐使用 8.0.x 版本
5. 配置实例规格：
   - 副本数：建议选择 3 个副本以保证高可用
   - CPU：根据需求选择，建议至少 2 核
   - 内存：根据需求选择，建议至少 4GB
   - 存储：根据数据量选择，建议至少 20GB
6. 设置访问凭证：
   - 设置 root 用户密码
7. 高级选项（可选）：
   - 参数模板：可选择预设的参数模板或自定义参数
   - 备份策略：配置自动备份策略
8. 点击「创建」按钮提交

系统将开始创建 MySQL-MGR 实例，这个过程通常需要几分钟时间。您可以在实例列表页面查看创建进度。

### 使用 CLI 创建实例

您也可以使用命令行工具快速创建 MySQL-MGR 实例：

```bash
kubectl apply -f - <<EOF
apiVersion: apps.kubeblocks.io/v1alpha1
kind: Cluster
meta
  name: my-mgr-demo
  namespace: default
spec:
  clusterDefinitionRef: mysql-mgr
  clusterVersionRef: mysql-8.0.30
  terminationPolicy: WipeOut
  affinity:
    podAntiAffinity: Preferred
    topologyKeys:
      - kubernetes.io/hostname
  tolerations: []
  replicas: 3
  resources:
    cpu: "2"
    memory: 4Gi
  storage:
    size: 20Gi
    storageClassName: standard
  services:
    - name: mysql
      serviceType: ClusterIP
  initializeConfig:
    rootPassword: "MySQLPassword123"
EOF
```

## 连接到 MySQL-MGR 实例

### 获取连接信息

实例创建成功后，您可以通过以下方式获取连接信息：

1. 在 Web 控制台中，导航至「应用服务」→「MySQL-MGR」→「实例列表」
2. 点击您创建的实例名称，进入实例详情页
3. 在「连接信息」标签页中，您可以看到实例的连接地址和端口

或者使用命令行获取连接信息：

```bash
kubectl get service my-mgr-demo-mysql -n default
```

### 使用 MySQL 客户端连接

使用以下命令连接到 MySQL-MGR 实例：

```bash
mysql -h <实例连接地址> -P <端口> -u root -p
```

系统会提示您输入密码，输入创建实例时设置的 root 密码即可登录。

## 验证高可用功能

要验证 MySQL-MGR 的高可用功能，您可以执行以下步骤：

1. 创建测试数据库和表：

```
CREATE DATABASE test_db;
USE test_db;
CREATE TABLE test_table (id INT AUTO_INCREMENT PRIMARY KEY, data VARCHAR(100));
INSERT INTO test_table (data) VALUES ('Test data 1'), ('Test data 2');
```

2. 查询当前主节点信息：

```
SELECT * FROM performance_schema.replication_group_members;
```

3. 模拟主节点故障（在另一个终端执行）：

```bash
# 获取主节点 Pod 名称
kubectl get pods -l app.kubernetes.io/instance=my-mgr-demo -n default

# 删除主节点 Pod 模拟故障
kubectl delete pod <主节点Pod名称> -n default
```

4. 观察自动故障转移：
   - 短暂断开后，客户端应该能够自动重连
   - 再次查询数据，确认数据完整性
   - 查询新的主节点信息，确认主节点已切换

```
SELECT * FROM test_db.test_table;
SELECT * FROM performance_schema.replication_group_members;
```

## 后续步骤

完成快速入门后，您可以进一步探索 MySQL-MGR 的更多功能：

- [配置数据库实例](../config-database/intro.mdx)：了解如何详细配置数据库实例
- [管理数据库实例](../manage-database/intro.mdx)：学习实例的日常管理操作
- [备份与恢复](../manage-database/intro.mdx)：设置备份策略并学习如何恢复数据
- [监控数据库](../manage-database/intro.mdx)：了解如何监控数据库性能和健康状态

通过这些功能，您可以充分利用 MySQL-MGR 的高可用特性，为您的应用提供稳定可靠的数据库服务。
