# 备份恢复

## 备份策略
- 逻辑备份：mysqldump + gzip
- 物理备份：Percona XtraBackup
- 增量备份：binlog持续归档

## 操作步骤
<Tabs>
<Tab label="命令行操作">
1. 创建S3存储配置
```bash
kubectl apply -n $namespace -f - <<EOF
apiVersion: mysql.alauda.io/v1
kind: BackupStorage
metadata:
  name: prod-s3
spec:
  s3:
    bucket: mysql-backups
    endpoint: s3.alauda.cn
    credentialsSecret: s3-creds
EOF
```

2. 创建定时备份
```bash
kubectl apply -n $namespace -f - <<EOF
apiVersion: mysql.alauda.io/v1
kind: BackupPolicy
metadata:
  name: daily-backup
spec:
  clusterName: $name 
  storageName: prod-s3
  schedule: "0 2 * * *"
  retention: "7d"
EOF
```
</Tab>

<Tab label="界面操作">
1. 进入 **备份管理**
2. 配置存储后端：
   - S3兼容存储
   - NFS共享存储
3. 创建备份策略：
   - 全量备份频率
   - 增量备份设置
   - 保留策略
4. 执行即时备份
5. 恢复操作：
   - 选择恢复点
   - 指定目标集群
   - 验证数据一致性
</Tab>
</Tabs>
