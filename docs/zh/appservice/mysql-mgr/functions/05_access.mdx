# 访问方式

## 功能简介
提供多种访问MySQL-MGR集群的方式，支持集群内外访问和读写分离配置。

## 核心组件
- **MySQL Router**：提供自动读写分离和负载均衡
- **NodePort Service**：集群外直接访问
- **Ingress**：通过域名访问

## 操作步骤
<Tabs>
<Tab label="命令行操作">
1. 获取访问端点
```bash
kubectl get svc -n $namespace $name-router -o jsonpath='{.spec.ports[0].nodePort}'
```

2. 使用MySQL Client连接
```bash
mysql -h<节点IP> -P<端口> -u<用户名> -p<密码>
```

3. 查看路由状态
```bash
kubectl exec -n $namespace $name-router-0 -- mysqlrouter --user=mysqlrouter status
```
</Tab>

<Tab label="界面操作">
1. 在实例详情页进入 **访问管理**
2. 选择访问方式：
   - 内部DNS：格式为`<实例名>.<命名空间>.svc.cluster.local`
   - NodePort：自动分配节点端口
   - 负载均衡器：配置外部LB
3. 获取连接信息：
   - 主机地址
   - 端口号
   - 默认账号密码
4. 使用MySQL客户端工具连接
5. 验证读写分离：
   ```
   SHOW VARIABLES LIKE 'read_only';
   ```
</Tab>
</Tabs>
