---
weight: 50
---

# 更新超售比

更新已创建命名空间的超售比。您可以参考当前命名空间中 CPU、内存的资源需求，为命名空间单独设置超售比，以便将本命名空间下用户设置的容器 CPU、内存的限制值（limit）和请求值（request），限制在合理范围之内，提高计算资源利用率。

* **超售比**：限制值与请求值的比值（limits/requests）。

* **限制值（limits）**：容器运行时可以使用的最大资源量，容器运行过程中，资源占用量不可超过该值。

* **请求值（requests）**：容器创建时请求占用的资源量。Kubernetes 进行容器调度时，将根据该值进行判断，会把容器调度到资源可用量满足容器请求值的节点上运行；如果没有满足要求的节点（例如：当请求值大于可调度的节点上的资源可用量时），容器将无法正常启动。

## 注意事项

开启节点虚拟化的集群，如需配置虚拟机超售比，则需要先关闭集群或命名空间的超售比。

## 操作步骤

1. 进入 **项目管理** 视图。

1. 在左侧导航栏中，单击 **命名空间** > **命名空间**。

2. 单击待更新的 ***命名空间名称***。

3. 单击右上角的 **操作** > **更新超售比**。

4. 按需选择超售比 **配置方式**，为命名空间设置 CPU 或内存的超售比。

|   参数 |     说明     |
| ------ |  -------- |
|  **从集群继承**   |  <ul><li>命名空间的超售比默认 **从集群继承**，**数值** 展示所属集群的超售比设置。例如：集群的 CPU、内存超售比均设置为 4，则当前命名空间的 CPU、内存超售比默认均为 4。</li><br/><li>创建应用时，容器的请求值固定为 **指定的限制值/集群超售比**。如果未指定限制值，限制值为所在命名空间的容器限额中，设置的 **默认值**。</li><br/><li>示例：假定设置 CPU 资源的集群超售比为 4，命名空间超售比从集群继承。用户创建应用时，指定了 CPU 限制值为 4c，则 CPU 请求值为 4c/4 = 1c。</li></ul> |
|   **自定义**  |   <ul><li>命名空间的超售比 **数值** 以管理员自定义为准，仅支持大于 1 的正整数，不填写时表示当前命名空间无超售比。<br/>例如：集群的 CPU、内存超售比均设置为 4，此处自定义值均设置为 2，则当前命名空间的 CPU、内存超售比均为 2；若此处自定义值均未填写，则表示当前命名空间的 CPU、内存未设置超售比。</li><br/><li>创建应用时，容器的请求值固定为 **指定的限制值/命名空间超售比**。如果未指定限制值，限制值为所在命名空间的容器限额中，设置的 **默认值**。</li><br/><li>示例：假定设置 CPU 资源的集群超售比为 4，命名空间超售比自定义为 2。用户创建应用时，指定了 CPU 限制值为 4c，则 CPU 请求值为 4c/2 = 2c。</li></ul>   |
                                                                                                
5. 单击 **更新**。

**注意**：更新了超售比数值，不影响已创建应用正在运行的容器的请求值；Pod 重建后，会根据最新的超售比来重新计算容器的请求值。
