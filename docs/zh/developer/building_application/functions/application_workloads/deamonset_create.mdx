---
weight: 20
---

# 创建 DaemonSet

守护进程集（DaemonSet）是 Kubernetes 的一种工作负载控制器（Controllers），您可以通过平台创建一个 DaemonSet 来运行一个程序。也可以在应用中创建多个 DaemonSet 作为应用下的计算组件来为应用提供特定的服务。

**说明**：

* 守护进程集创建成功后，会为当前命名空间所在集群的 **可调度且符合主机选择器条件** 的节点（包括 master 节点和 node 节点）上都运行一个 Pod 副本，状态异常的节点、处于不可调度状态的节点以及设置了 Taint（污点）的节点除外，Pods 数等于可调度节点个数 。

* 当集群中的节点既是控制节点又是计算节点时，该节点上仅运行一个 Pod 副本。

## 前提条件

### 获取镜像

镜像来源包括平台管理员通过工具链集成的镜像仓库，或第三方平台的镜像仓库。

* 对于前者，平台管理员通常会将镜像仓库分配给您的项目，然后您可使用其中的镜像。如果是第三方平台的镜像仓库，需确保在当前集群可从中拉取镜像。

* 如果拉取的镜像需要凭据，需要您先在当前命名空间下创建凭据（保密字典）。


## 操作步骤  1 - 配置基本信息

1. 进入 **Container Platform**。

1. 在左侧导航栏中，单击 **计算组件** > **守护进程集**。

2. 单击 **创建守护进程集**。

    **说明**：本节内容以表单方式为例，如果您熟悉 YAML 编排文件的编写方式，也可以通过编辑 YAML 文件快速创建守护进程集。

3. 配置镜像，单击 **确定**。

    **说明**：仅当使用本平台集成的镜像仓库中镜像时，可以通过 **选择** 方式筛选镜像。其中，集成项目名称例如 *containers（docker-registry-projectname）* ，包括本平台中的项目名 *projectname* ，以及镜像仓库中项目名 *containers* 。
        
1. 在 **基本信息** 区域，参考以下信息配置相关参数。

    
    |参数| 说明                |
    | ------------- | ---------------- | 
    |**更新策略**| 设置滚动更新（rollingUpdate）DaemonSet 时，Pod 的 **最多不可用数**，DaemonSet 将依据设置的值自动增加或删除 Pod，实现快速滚动更新。<br/>**说明**：如不设置，最多不可用数的默认值为 1。支持输入实例数量或百分比。<br/><br/>**最多不可用数**：输入滚动更新时 DaemonSet 的 Pod 数量最多不可用的值。百分比不能超过 100%。输入百分比后，Kubernetes 根据当前实例数量进行计算，出现小数时，向下取整。例如：4.9 会向下取整为 4。如不填，默认为 1。<br/>处在非运行状态的 Pod，均计入不可用数。<br/>**例如**：当 Pod 数为 10 时，最多不可用数值填写了 3，在更新的过程中，新旧版本的可用 Pod 个数加起来不会小于 10-3 个。 |

## 操作步骤 2 - 配置容器组、容器


接下来的配置容器组、容器的操作与创建部署时类似，请参考 [创建部署](./deployment_create.mdx)。
