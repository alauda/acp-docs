---
weight: 10
sourceSHA: 071002ffb3e72b3c0964319cb0fd2bf65f61c80bd98519bd8229ca2674512876
---

# LoadBalancer 类型 Service 注解说明

## AWS EKS 集群

EKS LoadBalancer 类型内部路由注解的详细说明请参考 [注解使用文档](https://kubernetes-sigs.github.io/aws-load-balancer-controller/v2.5/guide/service/annotations/)。

| Key                                                          | Value                                                                                                                                                             | 说明                                                                                                                                                                                    |
|--------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| service.beta.kubernetes.io/aws-load-balancer-type            | external：使用 AWS 官方的 LoadBalancer 控制器。                                                                                                                  | 指定所使用的 LoadBalancer 类型。<br/><br/><b>注意</b>：请提前联系平台管理员部署 AWS LoadBalancer 控制器。                                                                            |
| service.beta.kubernetes.io/aws-load-balancer-nlb-target-type | <ul><li>instance：流量将通过 NodePort 送往 Pods。</li><li>ip：流量直接路由到 Pods（集群需使用 Amazon VPC CNI）。</li></ul>                                   | 指定流量送达 Pods 的方式。                                                                                                                                                      |
| service.beta.kubernetes.io/aws-load-balancer-scheme          | <ul><li>internal：私有网络。</li><li>internet-facing：公共网络。</li></ul>                                                                                       | 指定使用私有网络或公共网络。                                                                                                                                                     |
| service.beta.kubernetes.io/aws-load-balancer-ip-address-type | <ul><li>ipv4</li><li>dualstack</li></ul>                                                                                                                          | 指定支持的 IP 地址协议栈。                                                                                                                                                          |

## 华为云 CCE 集群

CCE LoadBalancer 类型内部路由注解的详细说明请参考 [注解使用文档](https://support.huaweicloud.com/intl/zh-cn/usermanual-cce/cce_10_0385.html)。

| Key                            | Value                                                                                                                                                                                                                                                                                                                                                                                                                                                              | 说明                                                                                                                                                                                                                       |
|--------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| kubernetes.io/elb.id           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | 填写云负载均衡器的 ID，需使用已有云负载均衡器。                                                                                                                                                                                  |
| kubernetes.io/elb.autocreate   | 示例：`{"type":"public","bandwidth_name":"cce-bandwidth-1551163379627","bandwidth_chargemode":"bandwidth","bandwidth_size":5,"bandwidth_sharetype":"PER","eip_type":"5_bgp","available_zone":["cn-north-4b"],"l4_flavor_name":"L4_flavor.elb.s1.small"}`<br/><br/><b>注意</b>：请先阅读[填写说明](https://support.huaweicloud.com/intl/zh-cn/usermanual-cce/cce_10_0385.html#section8)，并按需调整示例参数。 | 新创建的云负载均衡器。                                                                                                                                                                                            |
| kubernetes.io/elb.subnet-id    |                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | 集群所在子网的 ID。当 Kubernetes 版本为 1.11.7-r0 及以下时，新创建云负载均衡器时必须填写此项。                                                                                                                    |
| kubernetes.io/elb.class        | <ul><li>union：共享负载均衡。</li><li>performance：独享负载均衡，仅支持在 Kubernetes 版本为 1.17 及以上的集群中使用。</li></ul>                                                                                                                                                                                                                                                                                                                | 指定新创建的云负载均衡器的类型，具体请参考 [独享负载均衡与共享负载均衡的区别](https://support.huaweicloud.com/intl/zh-cn/productdesc-elb/elb_pro_0004.html)。        |
| kubernetes.io/elb.enterpriseID |                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | 指定新创建云负载均衡器所属的企业项目。                                                                                                                                                                                  |

## Azure AKS 集群

AKS LoadBalancer 类型内部路由注解的详细说明请参考 [注解使用文档](https://cloud-provider-azure.sigs.k8s.io/topics/loadbalancer/#loadbalancer-annotations)。

| Key                                                     | Value                                                                   | 说明                                                       |
|--------------------------------------------------------|-------------------------------------------------------------------------|-----------------------------------------------------------|
| service.beta.kubernetes.io/azure-load-balancer-internal | <ul><li>true：私有网络。</li><li>false：公共网络。</li></ul>               | 指定使用私有网络或公共网络。                               |

## Google GKE 集群

GKE LoadBalancer 类型内部路由注解的详细说明请参考 [注解使用文档](https://cloud.google.com/kubernetes-engine/docs/concepts/service-load-balancer-parameters?hl=zh-cn)。

| Key                                  | Value    | 说明                                                                                     |
|--------------------------------------|----------|-----------------------------------------------------------------------------------------|
| networking.gke.io/load-balancer-type | Internal | 指定使用私有网络。                                                                      |
| loud.google.com/l4-rbs               | enabled  | 默认为公共网络。若配置此参数，流量将直接路由至 Pods。                                   |
