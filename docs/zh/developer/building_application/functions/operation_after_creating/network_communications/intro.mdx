---
weight: 10
sourceSHA: e524c0d508268cba1d323a2e2e829bbdbcd0cfaa49c8887d44a5927f691a489f
---

# 对比及选型

## Service 与 Ingress 及 Loadbalancer 的关系

Service 通常与入站规则（Kubernetes Ingress）或负载均衡器的端口转发规则结合使用，可以将外部访问流量分发到平台后端服务的 Pods，从而为计算组件提供内部发现能力。

这意味着在 [创建入站规则](./ingress/create_ingress.mdx) 或 [添加规则](./loadbalancer/add_rule.mdx) 时，需要先在平台上创建相应的内部路由。

## 功能比较

入站规则（Ingress）是 Kubernetes 社区采用的标准规范，推荐作为默认使用。然而，入站规则所提供的功能较为有限。如需更丰富的路由能力，可以结合平台的 **负载均衡器**，或使用社区下一代标准的入站规则 **入站网关（Gateway API）** 扩展入站规则的功能。

<table>
  <thead>
    <tr>
      <th />

      <th>相同功能</th>
      <th>功能差异</th>
      <th>是否为社区标准</th>
      <th className="w-80">资源层级</th>
      <th>备注</th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td><b>入站规则（Ingress）</b></td>
      <td rowSpan={3}>均支持集群对外的七层业务发布。</td>
      <td>主要用于路由和负载均衡 HTTP 和 HTTPS 流量，仅支持路径匹配，功能相对较弱。</td>
      <td>是的，它是 Kubernetes 社区所采用的标准规范。</td>
      <td>命名空间</td>
      <td>-</td>
    </tr>

    <tr>
      <td><b>路由规则 + 入站网关</b></td>
      <td>支持 HTTPRoute（可发布至 HTTP 和 HTTPS 的监听器）、TCPRoute 及 UDPRoute 路由类型，提供更复杂的消息匹配和操作能力，功能较 Ingress 更强大。</td>
      <td>是的，它是基于社区 Gateway API 标准的 Kubernetes 社区所采用的标准规范，具体请参考 <a href="https://gateway-api.sigs.k8s.io/">Kubernetes Gateway API</a>。</td>
      <td>命名空间</td>
      <td>入站网关及其底层资源存储在对应的命名空间中。</td>
    </tr>

    <tr>
      <td><b>负载均衡器</b></td>
      <td>支持 HTTPS、HTTP、gRPC、TCP、UDP 协议及多种规则，提供更复杂的消息匹配和操作能力，功能较 Ingress 更强大。</td>
      <td>不是的，它不是 Kubernetes 社区所采用的标准规范；由平台内自行开发。</td>
      <td>集群</td>
      <td>由平台管理员部署并分配给命名空间使用，命名空间仅拥有使用权限。</td>
    </tr>
  </tbody>
</table>

## 使用选型

平台提供的入站规则、入站网关及负载均衡器的具体使用选型建议如下。

<img src="../assets/ingressalbgateway.png" width="700" />
