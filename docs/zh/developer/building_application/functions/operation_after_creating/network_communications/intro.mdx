---
weight: 10
---

# 对比及选型


## Service 与 Ingress 及 Loadbalancer 的关系。

Service 一般结合入站规则（Kubernetes Ingress）或负载均衡的端口的转发规则进行使用，可将外部访问流量分发到平台后端服务的 Pod 上，从而提供计算组件内部发现的能力。

也就是在 [创建入站规则](./ingress/create_ingress.mdx) 或为负载均衡的 HTTP/HTTPS 端口 [添加规则](./loadbalancer/add_rule.mdx) 时，需要提前在平台上创建相应的内部路由。


## 功能比较

入站规则（Ingress）作为 Kubernetes 社区采用的标准规范，默认推荐使用。但入站规则暴露的能力有限，若需使用更丰富的路由功能，可以结合平台的 **负载均衡器**，或使用社区的入站规则下一代标准 **入站网关（Gateway API）** 来扩展入站规则功能。

<table>
<thead>
  <tr>
    <th></th>
    <th>相同功能</th>
    <th>功能差异</th>
    <th>是否为社区标准</th>
    <th className="w-80">资源层级</th>
    <th>备注</th>
  </tr>
</thead>
<tbody>
  <tr>
    <td><b>入站规则（Ingress）</b></td>
    <td rowSpan={3}>均支持集群对外的七层业务发布。</td>
    <td>主要用于 HTTP 和 HTTPS 流量的路由和负载均衡，仅支持路径匹配，功能相对较弱。</td>
    <td>是 Kubernetes 社区所采用的一种标准规范。</td>
    <td>命名空间</td>
    <td>-</td>
  </tr>
  <tr>
    <td><b>路由规则 + 入站网关</b></td>
    <td>支持 HTTPRoute（可发布至 HTTP 及 HTTPS 的监听）、TCPRoute 及 UDPRoute 路由类型，提供更加复杂的报文匹配和操作的能力，功能相对于 Ingress 更加强大。</td>
    <td>是 Kubernetes 社区所采用的一种标准规范，基于社区 Gateway API 标准，具体请参考 <a href="https://gateway-api.sigs.k8s.io/">Kubernetes Gateway API</a>。</td>
    <td>命名空间</td>
    <td>入站网关及其底层资源都会存储在对应命名空间中。</td>
  </tr>
  <tr>
    <td><b>负载均衡器</b></td>
    <td>支持 HTTPS、HTTP、gRPC、TCP、UDP 协议及多种规则，提供更加复杂的报文匹配和操作的能力，功能相对于 Ingress 更加强大。</td>
    <td>不是 Kubernetes 社区所采用的一种标准规范，由平台自研。</td>
    <td>集群</td>
    <td>由平台管理员部署后分配给命名空间使用，命名空间仅有使用权限。</td>
  </tr>
  
</tbody>
</table>


## 使用选型

平台中提供的入站规则、入站网关及负载均衡器具体使用选型建议如下。

<img src="../assets/ingressalbgateway.png" width = "700"/>
