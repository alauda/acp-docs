---
weight: 20
---

# 创建 Gateway 并添加监听

## 创建 Gateway

创建入站网关，实现更加细粒度的网络资源分配。

### 前提条件

平台管理员需确保集群支持 **LoadBalancer** 类型的 **内部路由**。公有云集群需安装 LoadBalancer Service Controller，非公有云集群中平台提供了 **外部地址池** 功能，配置完成后，**LoadBalancer** 类型的 **内部路由** 可自动从外部地址池中获取 IP 作为外网访问的地址。



### 操作步骤

**注意**：入站网关创建完成后，平台会自动创建许多资源，请勿删除[平台创建的资源](./view_resource.mdx)。

1. 进入 **Container Platform**。

1. 在左侧导航栏中，单击 **网络** > **入站网关**。

2. 单击 **创建入站网关**。

5. 参考以下说明，配置部分参数。

    |参数| 描述 |
    | ---- | ---- |
    |**名称**|入站网关的名称。|
    |**网关类**|网关类是网关行为的定义，与存储类（StorageClasses）概念类似，它是集群资源。<br/>**独享型**：入站网关会对应具体的资源实例，用户可独享该入站网关的所有监听和计算资源。|
    |**规格**|可根据需求选择平台推荐的使用场景或自定义资源限额。|
    |**访问地址**|入站网关所在的地址，默认为自动获取。|
    |**内部路由注解**| 用于声明 LoadBalancer 类型内部路由的配置或者能力，具体注解信息请参考 [LoadBalancer 类型内部路由注解说明](../service/annotation.mdx)。|

8. 单击 **创建**。

## 添加监听

监听指定域名下的流量，可按照绑定的路由规则转发至后端实例中。

### 前提条件

* 若您需要监听 HTTP 协议，请提前联系管理员准备 **域名**。

* 若您需要监听 HTTPS 协议，请提前联系管理员准备  **域名** 和 **证书**。

### 操作步骤

1. 在左侧导航栏中，单击 **网络** > **入站网关**。

2. 单击 ***入站网关名称***。

2. 单击 **添加监听**。

5. 参考以下说明，配置部分参数。

    |参数| 描述 |
    | ---- | ---- |
    |**监听协议及端口**|目前支持监听 HTTP、HTTPS、TCP、UDP 协议，可自定义填写需要监听的端口，例如：`80`。<br/><br/>**注意**：<br/><ul><li>当端口相同时，HTTP、HTTPS、TCP 三种协议类型的监听不能共存，只能选择使用其中一种协议。</li><li>使用 HTTP 或 HTTPS 协议时，若监听端口相同，则域名必须不同。</li></ul>|
    |**域名**|选择当前命名空间下可用的域名，用于监听访问该域名的网络流量。<br/>**提示**：TCP 和 UDP 协议不支持选择域名。|

5. 单击 **创建**。

## 后续操作

监听创建完成后，请参考文档 [创建路由规则](./create_rule.mdx)。


