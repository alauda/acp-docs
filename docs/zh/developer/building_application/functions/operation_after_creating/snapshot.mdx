---
weight: 90
sourceSHA: 88299ef8d15a5aabab97b160cc07c81fdb5a99ac28c621cb530c7f54ac40dace
---

# 使用卷快照

卷快照是持久卷声明（PVC）在某个时间点的副本，可用于配置新的持久卷声明（预先填充快照数据）或将现有持久卷声明回滚至之前的状态，达到备份应用数据并按需恢复的效果，从而确保应用数据的可靠性。

## 前提条件

- 管理员已为当前集群部署了卷快照组件 **快照控制器**，并在存储集群中启用了快照相关功能。

- 持久卷声明必须是动态创建的，且状态必须为 **已绑定**。

- 与持久卷声明绑定的存储类必须支持快照功能，例如 **CephRBD 内置存储**、**CephFS 内置存储** 或 **TopoLVM**。

## 创建卷快照

### 基于指定持久卷声明（PVC）创建卷快照

**方式一**

1. 进入 **Container Platform**。

2. 在左侧导航栏中，单击 **存储 > 持久卷声明（PVC）**。

3. 在列表中找到对应的持久卷声明，单击右侧的 ⋮，然后选择 **创建卷快照**。

4. 填写快照描述。该描述可以帮助您记录持久卷的当前状态，例如 *应用升级前*。

5. 单击 **创建**。快照的创建时间根据网络状况和数据量而有所不同，请耐心等待。

   当快照的状态变为 `可用` 时，表示创建成功。

**方式二**

1. 进入 **Container Platform**。

2. 在左侧导航栏中，单击 **存储 > 持久卷声明（PVC）**。

3. 单击列表中持久卷声明的名称。

4. 切换到 **卷快照** 页签。

5. 单击 **创建卷快照**，并按需配置相关参数。

6. 单击 **创建**。快照的创建时间根据网络状况和数据量而有所不同，请耐心等待。

   当快照的状态变为 `可用` 时，表示创建成功。

### 自定义方式创建卷快照

1. 进入 **Container Platform**。

2. 在左侧导航栏中，单击 **存储 > 卷快照**。

3. 单击 **创建卷快照**，并按需配置相关参数。

4. 单击 **创建**。快照的创建时间根据网络状况和数据量而有所不同，请耐心等待。

   当快照的状态变为 `可用` 时，表示创建成功。

## 使用卷快照创建持久卷声明

目前平台只支持使用从存储类 **动态创建** 的 PVC 创建卷快照。您可以基于该快照创建新的 PVC 进行绑定。

**注意**：从快照创建 PVC 时支持的访问模式与从存储类创建 PVC 时支持的访问模式有所不同，具体已在下表中 **加粗** 显示。

| 创建卷快照使用的存储类       | 单节点读写（RWO） | 多节点只读（ROX） | 多节点读写（RWX） |
|---------------------------------|------------------|-------------------|--------------------|
| **TopoLVM**                     | 支持             | 不支持           | 不支持            |
| **CephRBD 块存储**             | 支持             | 不支持           | 不支持            |
| **CephFS 文件存储**            | 支持             | **支持**         | 支持               |

### 创建方式一

1. 进入 **Container Platform**。

2. 在左侧导航栏中，单击 **存储 > 持久卷声明（PVC）**。

3. 单击列表中持久卷声明的名称。

4. 切换到 **卷快照** 页签。

5. 在列表中找到对应的卷快照，单击右侧的 ⋮，然后选择 **创建持久卷声明**，并配置相关参数。

6. 单击 **创建**。

### 创建方式二

1. 进入 **Container Platform**。

2. 在左侧导航栏中，单击 **存储 > 卷快照**。

3. 在列表中找到对应的卷快照，单击右侧的 ⋮，然后选择 **创建持久卷声明**，并配置相关参数。

4. 单击 **创建**。
