---
weight: 10
sourceSHA: fc9c74e519912f88bd3277eebb25945b80f557dd5c1b3b79dda0efd6114f2dba
---

# 概述

本文件旨在为具有基本 Linux 知识的系统管理员提供信息，详细说明 <Term name="productShort" /> `global` 集群的完整升级过程。

在本文档中，常用以下术语，请注意区分：

- **`global` 集群**：指负责核心平台管理任务的集群，如集群管理和租户管理。
- **平台**：通常指的是容器平台本身，是提供应用运行环境的完整系统，集成了容器调度、管理、网络、存储及其他功能。**平台** 是一个整体概念，涵盖所有组件，包括 `global` 集群和工作负载集群。

# 升级过程

```mermaid
sequenceDiagram
A[开始] --> B[升级前检查清单]
B --> C{是否为灾难恢复环境 (DR)?}
C -->|是| D{执行 DR 升级文档}
C -->|否| E[执行全球升级文档]
D -->|是| E
E --> F[备份]
F --> G[上传平台镜像]
G --> H[升级全球集群]
H --> I[执行业务集群升级文档]
I --> J[升级业务集群基础组件]
J --> K[升级工具链]
K --> L[结束]
```

<table>
  <thead>
    <tr>
      <th>升级步骤</th>
      <th>升级内容</th>
      <th>时间窗口</th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>升级前检查清单</td>

      <td>
        执行人员必须执行检查清单并将结果报告给售后进行风险评估。<br />
        如果项目未执行检查清单，则禁止进行升级！<br />
        是否为灾难恢复环境？<br />
        如果是灾难恢复环境，请按照灾难恢复功能进行操作，最后确认备用集群之间的数据同步正常。
      </td>

      <td>在项目启动升级计划前一周。</td>
    </tr>

    <tr>
      <td>检查数据同步</td>
      <td>检查集群之间的数据同步是否正常。</td>
      <td>升级前1小时</td>
    </tr>

    <tr>
      <td>备份</td>
      <td>备份 etcd 和 Kubernetes 配置！具体步骤请参考“备份”部分。</td>
      <td>在升级前1小时进行备份。</td>
    </tr>

    <tr>
      <td>上传镜像</td>
      <td>根据客户的环境选择“使用在线升级上传镜像”或“使用离线安装包上传镜像”。具体步骤请参考“更新镜像”部分。</td>
      <td>在升级前1天</td>
    </tr>

    <tr>
      <td>升级全球集群</td>
      <td>完成产品管理和全球集群升级文档。具体步骤请参考“升级全球集群”部分。</td>
      <td>在升级当天执行</td>
    </tr>

    <tr>
      <td>执行业务集群升级文档</td>
      <td>确保全球升级成功后再执行业务集群升级文档。具体步骤请参考“升级业务集群的组件”部分。</td>
      <td>在升级的晚上执行</td>
    </tr>

    <tr>
      <td>升级工具链</td>
      <td>具体步骤请参考“升级 DevOps 工具链实例”部分。</td>
      <td>在升级的晚上执行</td>
    </tr>
  </tbody>
</table>

<Directive type="warning" title="警告">
  为了主动识别和解决潜在的升级阻碍问题，强烈建议在升级过程之前使用检查清单脚本进行集群检查。如果您不知道检查清单脚本的可用位置，请联系售后支持人员。
</Directive>
