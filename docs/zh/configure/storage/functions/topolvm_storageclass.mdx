---
weight: 10
sourceSHA: cf7c5933a8c205935aa5b48ead4a04f984681d767d362a87f237c01c1380bb0d
---

# 创建 TopoLVM 本地存储类

TopoLVM 是基于 LVM 的本地存储解决方案，提供简单、易于维护且高性能的本地存储服务，适用于数据库和中间件等场景。在使用之前，需要先创建一个 TopoLVM 存储类。

一旦持久卷声明（PVC）与存储类绑定，平台会根据持久卷声明在节点上动态创建持久卷供业务应用使用。

## 背景信息

### 使用优势

- 相比远程存储（例如 **NFS 共享存储**）：TopoLVM 类型的存储位于节点本地，提供更好的 IOPS 和吞吐性能，具有更低的延迟。

- 相比 hostPath（例如 **local-path**）：虽然两者都是节点上的本地存储，但 TopoLVM 允许将容器组灵活调度到资源充足的节点上，避免因资源不足而导致容器组无法启动。

- TopoLVM 默认支持自动扩容。修改持久卷声明中的存储配额后，无需重启容器组，扩容将自动完成。

### 使用场景

- 仅当需要临时存储时，例如开发和调试。

- 当存在高存储 I/O 要求时，例如实时索引。

### 约束与限制

请尽量仅在能够实现应用层数据复制和备份的应用中使用本地存储，例如 MySQL。避免因本地存储缺乏数据持久性保证而导致的数据丢失。

[了解更多](https://github.com/topolvm/topolvm/blob/main/docs/user-manual.md)

## 部署卷插件

单击部署后，在新打开的页面中配置本地存储 [配置本地存储](/storage/storagesystem_topolvm/installation.mdx)。

## 创建存储类

1. 转到 **平台管理**。

2. 在左侧导航栏中，单击 **存储管理** > **存储类**。

3. 单击 **创建存储类**。

4. 选择 **TopoLVM**，然后单击 **下一步**。

5. 根据以下说明配置存储类参数。

   **注意**：以下内容作为表单示例呈现；您也可以选择使用 YAML 创建。

   | 参数                | 描述                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
   | ------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
   | **名称**            | 存储类的名称，必须在当前集群中唯一。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
   | **显示名称**        | 一个可以帮助您识别或筛选的名称，例如存储类的中文描述。                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
   | **设备类**          | 设备类是 TopoLVM 中对存储设备进行分类的方式，每个设备类对应一组具有相似特性的存储设备。如无特殊要求，请使用 **自动分配** 设备类。                                                                                                                                                                                                                                                                                                                                                                                                                                    |
   | **文件系统**        | <ul><li>**XFS** 是一种高性能的日志文件系统，适合处理并行 I/O 工作负载，支持大文件处理和顺畅的数据传输。</li><li>**EXT4** 是 Linux 下的日志文件系统，提供 extent 文件存储，支持大文件处理，最大文件系统容量为 1 EiB，最大文件大小为 16 TiB。</li></ul>                                                                                                                                                                                                                                           |
   | **回收策略**        | 持久卷的回收策略。<br /><ul><li>删除：绑定的持久卷将在 PVC 删除的同时被删除。</li><li>保留：即使删除 PVC，其绑定的持久卷仍会保留。</li></ul>                                                                                                                                                                                                                                                                                                                                                                                                                 |
   | **访问模式**        | ReadWriteOnce (RWO)：可以由单个节点以读写方式挂载。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
   | **PVC 重建**        | 支持 PVC 跨节点重建。当启用此功能后，必须配置 **重建等待时间**。如果使用此存储类创建的 PVC 所在节点故障，PVC 将在等待时间结束后自动在其他节点重建，以确保业务连续性。<br />**注意**：<br /><ul><li>重建的 PVC 不包含原始数据。</li><li>请确保存储节点的数量大于应用实例副本的数量，否则这将影响 PVC 的重建。</li></ul>                                                                                                                     |
   | **分配项目**        | 此类型的持久卷声明仅能在特定项目中创建。<br />如果当前没有分配项目，该项目可以 **稍后更新**。                                                                                                                                                                                                                                                                                                                                                                                                                                    |

6. 确认配置无误后，单击 **创建** 按钮。

## 后续操作

一切准备就绪后，您可以通知开发人员使用 TopoLVM 功能。例如，在容器平台的 **存储** > **持久卷声明** 页面上创建持久卷声明并将其绑定到 TopoLVM 存储类。
