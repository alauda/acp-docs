---
weight: 50
sourceSHA: 0fd95abec74b2e7d083b18f261792dc0dac34ab1ce5783b902391645ff20a738
---

# 访问模式与卷模式

在 Kubernetes 中，PersistentVolumeClaims（PVC）与 StorageClass 协同工作，用于管理工作负载如何配置和访问存储。在这一领域中，两个关键概念是 **访问模式（Access Modes）** 和 **卷模式（Volume Modes）**。本文将探讨这些概念，并说明不同存储系统对它们的支持情况。

## Kubernetes 中的访问模式

访问模式定义了一个卷可以被 Pods 挂载和使用的方式。主要的访问模式包括：

- **ReadWriteOnce (RWO)**：卷可以被单个节点以读写方式挂载。
- **ReadOnlyMany (ROX)**：卷可以被多个节点以只读方式挂载。
- **ReadWriteMany (RWX)**：卷可以被多个节点以读写方式挂载。

### 各存储类对访问模式的支持情况

| 存储类                 | 支持 RWO | 支持 ROX | 支持 RWX |
|------------------------|----------|-----------|-----------|
| **CephFS 文件存储**    | 是       | 否        | 是        |
| **CephRBD 块存储**     | 是       | 否        | 否        |
| **TopoLVM**            | 是       | 否        | 否        |
| **NFS 共享存储**       | 是       | 否        | 是        |

如上所示，**CephFS** 和 **NFS** 等基于文件的存储系统支持多节点的共享读写操作，适用于多副本或并发访问的场景。而像 **CephRBD** 和 **TopoLVM** 这样的块存储系统则更适合单节点独占访问。

## Kubernetes 中的卷模式

卷模式定义了数据如何暴露给 Pods：

- **Filesystem（文件系统）**：将卷作为文件系统挂载进 Pods。
- **Block（块设备）**：将卷作为原始块设备呈现。

### 各存储类对卷模式的支持情况

| 存储类                 | 类型         | 支持的卷模式               |
|------------------------|--------------|----------------------------|
| **CephFS 文件存储**    | 文件存储     | 文件系统                   |
| **CephRBD 块存储**     | 块存储       | 文件系统、块设备           |
| **TopoLVM**            | 块存储       | 文件系统、块设备           |
| **NFS 共享存储**       | 文件存储     | 文件系统                   |

如 **CephRBD** 和 **TopoLVM** 等块存储系统同时支持文件系统模式与原始块模式，为不同应用需求提供了更大的灵活性。而 **CephFS** 与 **NFS** 等文件存储系统则仅支持文件系统模式。

## 存储功能：快照与扩容

Kubernetes 还支持一些高级功能，如卷快照与 PVC 动态扩容，具体支持情况如下：

| 存储类                 | 支持卷快照 | 支持扩容 |
|------------------------|-------------|-----------|
| **CephFS 文件存储**    | 支持        | 支持      |
| **CephRBD 块存储**     | 支持        | 支持      |
| **TopoLVM**            | 支持        | 支持      |
| **NFS 共享存储**       | 不支持      | 不支持    |

仅当使用 StorageClass 动态创建 PVC 时，平台才支持卷快照功能。这一功能适合用于数据备份和环境克隆等场景。

## 总结

在 Kubernetes 中配置存储时，了解 PVC 及其背后 StorageClass 的 **访问模式** 与 **卷模式** 是选择合适解决方案的关键。像 CephFS 与 NFS 这样的文件存储适用于共享访问场景，而 CephRBD 与 TopoLVM 等块存储则更适合高性能、单节点部署。此外，对快照与扩容等功能的支持也能显著提升存储的灵活性和数据管理能力。
