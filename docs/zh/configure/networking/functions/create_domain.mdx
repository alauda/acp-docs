---
weight: 13
sourceSHA: f602f99f751a07d8e52d068cde0dcd4d583d6c772e3fdec4b6f54c7eb09186a6
---

# 创建域名

向平台添加域名资源，为集群下的所有项目或特定项目下的资源分配域名。创建域名时，支持绑定证书。

:::note
在平台上创建的域名必须解析到集群的负载均衡地址后，才能通过该域名进行访问。因此，您需要确保在平台上添加的域名已成功注册，并且域名解析到集群的负载均衡地址。
:::

在平台上成功创建并分配的域名可以在 **容器平台** 的以下功能中使用：

- **创建入站规则**：**网络管理** > **入站规则** > **创建入站规则**

- **创建原生应用**：**应用管理** > **原生应用** > **创建原生应用** > **添加入站规则**

- **添加监听端口**以支持负载均衡：**网络管理** > **负载均衡器详情** > **添加监听端口**

一旦域名绑定到证书，应用开发者可以在配置负载均衡器和入站规则时直接选择域名，从而使用与域名一起提供的证书以支持 https。

## 示例域名自定义资源 (CR)

```yaml
# test-domain.yaml
apiVersion: crd.alauda.io/v2
kind: Domain
metadata:
  name: "00000000003075575260129686e67ed4-917a-454a-8553-d55fc4030f81"
  annotations:
    cpaas.io/secret-ref: developer.test.cn-xfd8x #[!code callout]
  labels:
    cluster.cpaas.io/name: global
    project.cpaas.io/name: cong
spec:
  name: developer.test.cn
  kind: full
```

<Callouts>
  1. 如果启用了证书，必须提前创建一个 LTS 类型的 Secret。`secret-ref` 是密钥名称。
</Callouts>

## 通过 Web 控制台创建域名

1. 进入 **平台管理**。

2. 在左侧导航栏中，点击 **网络管理** > **域名**。

3. 点击 **创建域名**。

4. 根据以下说明配置相关参数。

   | 参数                   | 描述                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
   | ---------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
   | **类型**               | <ul><li>域名：完整的域名，例如 `developer.test.cn`。</li><li>泛域名：带有通配符 (\*) 字符的域名，例如 `*.test.cn`，包括域名 `test.cn` 下的所有子域名。</li></ul>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
   | **域名**               | 根据所选的域名类型输入完整的域名或域名后缀。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
   | **分配集群**           | 如果分配了集群，还需要选择与所分配集群相关联的项目，例如与该集群相关的所有项目。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
   | **证书**               | 包括用于创建绑定到域名的证书的公钥 (tls.crt) 和私钥 (tls.key)。证书分配的项目与绑定的域名相同。<br />**注意**： <ul><li>不支持二进制文件导入。</li><li>绑定的证书应满足正确格式、在有效期内、并且对域名进行了签名等条件。</li><li>创建绑定证书后，绑定证书的名称格式为：域名 - 随机字符。</li><li>创建绑定证书后，可以在证书列表中查看，但只支持在域名详情页面上更新和删除绑定证书。</li><li>创建绑定证书后，支持更新证书内容，但不支持替换其他证书。</li></ul> |

5. 点击 **创建**。

## 通过 CLI 创建域名

```shell
kubectl apply -f test-domain.yaml
```

## 后续操作

- **域名注册**：如果创建的域名尚未注册，请进行域名注册。

- **域名解析**：如果域名未指向平台集群的负载均衡地址，请执行域名解析。

## 其他资源

- [配置证书](./create_cert.mdx)
