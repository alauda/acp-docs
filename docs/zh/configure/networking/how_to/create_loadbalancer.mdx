---
weight: 20
sourceSHA: 4f88c4c2a5efe4588f6016382949586f609c2a0ca2d013d3e96d77ffd75d6b1e
---

# 创建负载均衡器

负载均衡器是一种将流量分配到容器实例的服务。通过利用负载均衡功能，它可以自动分配计算组件的访问流量，并将其转发到这些组件的容器实例。负载均衡能够提高计算组件的容错能力，扩展这些组件的外部服务能力，并增强应用程序的可用性。

平台管理员可以为平台上的任何集群创建单点或高可用性负载均衡器，并统一管理和分配负载均衡器资源。例如，负载均衡可以分配给项目，确保只有拥有适当项目权限的用户才能使用负载均衡。

请参考下表以获取本节相关概念的解释。

| 参数               | 描述                                                                                                                                                                                                                                    |
|-------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **负载均衡器**     | 一种将网络请求分配到集群中可用节点的软件或硬件设备。平台使用的负载均衡器是一个第七层软件负载均衡器。                                                                                                                                    |
| **VIP**           | 虚拟IP地址（Virtual IP Address）是一个不对应于特定计算机或特定网络接口卡的IP地址。当负载均衡器为高可用性类型时，访问地址应为VIP。                                                                                                              |

## 前提条件

**负载均衡器**的高可用性需要一个VIP。请参阅[配置VIP](../how_to/deploy_high_available_vip_for_alb.mdx)。

## 创建负载均衡器

1. 导航到**平台管理**。

2. 在左侧边栏中，单击**网络管理** > **负载均衡器**。

3. 单击**创建负载均衡器**。

4. 按照下列说明完成网络配置。

   | 参数                                     | 描述                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
   |-----------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
   | **网络模式**                            | <ul><li>**主机网络模式**：仅允许在单个节点上部署一个负载均衡器副本，多个服务共享一个ALB，从而实现更优越的网络性能。</li><li>**容器网络模式**：可以在单个节点上部署多个负载均衡器副本，以满足每个服务使用独立ALB的需求，网络性能稍低。</li></ul>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
   | **内部路由和注解（Alpha）**            | <ul><li>**内部路由**：启用时，将为负载均衡器的访问地址创建一种内部LoadBalancer类型的路由。使用前，请确保当前集群支持内部LoadBalancer类型的路由。您可以实现平台内置的LoadBalancer内部路由；有关具体配置，请参见[外部地址池](../functions/create_metallb.mdx)；若禁用，则需要为负载均衡器配置访问地址。</li><li>**注解**：用于声明内部LoadBalancer类型路由的配置或功能；有关具体内容，请参见[内部LoadBalancer类型路由的注解](/developer/building_application/functions/operation_after_creating/network_communications/service/annotation.mdx)。</li></ul> |
   | **访问地址**                            | 负载均衡的访问地址，即负载均衡器实例的服务地址。负载均衡器创建成功后，可以通过此地址访问。<ul><li>在主机网络模式下，请根据实际情况填写；可以是域名或IP地址（内部IP、外部IP、VIP）。</li><li>在容器网络模式下，将自动获取。</li></ul>                                                                                                                                                                                                                                                                                                                                                                                                                                               |

5. 按照下列说明完成资源配置。

   | 参数                         | 描述                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
   |-----------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
   | **规格**                     | 请根据业务需求合理设置规格。您也可以参考[负载均衡器选择与规划](../how_to/decide_performance_selection.mdx)进行参考。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
   | **部署类型**                 | <ul><li>**单点**：负载均衡器的容器组部署在单个节点上，如果机器发生故障，可能面临负载均衡器不可用的风险。</li><li>**高可用性**：负载均衡器的多个容器组分布在相应数量的节点上，通常为3。这满足了大量业务流量的负载均衡需求，同时提供应急灾难恢复能力。</li></ul>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
   | **副本数量**                 | 副本数量为负载均衡器的容器组数量。<br />**提示**：为确保负载均衡器的高可用性，建议副本数量不少于3。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
   | **节点标签**                 | 使用标签过滤节点以部署负载均衡器。<br />**提示**： <ul><li>建议满足要求的节点数量大于负载均衡器副本的数量。</li><li>具有相同键的标签只能选择一个（如果选择多个，将没有匹配的主机可用）。</li></ul>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
   | **资源分配方式**             | <ul><li>**实例**：可以为项目使用负载均衡器实例监听的范围在1-65535之间的任意端口。</li><li>**端口（Alpha）**：仅可以为项目使用指定范围内的端口。此方法在端口资源有限时，允许进行更细粒度的资源控制。</li></ul>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
   | **分配项目**                 | <ul><li>当**资源分配方式**设置为**实例**时，负载均衡器可以分配给当前集群关联的所有项目或指定项目。在被分配的项目中，所有命名空间下的所有Pods都可以接收由负载均衡器分配的请求。<ul><li>**所有项目**：将负载均衡器分配给当前集群的所有项目使用。</li><li>**指定项目（Alpha）**：单击**指定项目**下的下拉框，然后单击项目名称左侧的复选框以选择一个或多个项目，将负载均衡器分配给这些指定项目。<br />**提示**：您可以通过在下拉框中输入项目名称来过滤项目。</li><li>**不分配（Alpha）**：暂时不分配任何项目。负载均衡器创建后，您可以使用**更新项目**操作来更新创建的负载均衡器的分配项目参数。</li></ul></li><li>当**资源分配方式**设置为**端口**时，此项无需配置。请在创建负载均衡器后手动分配端口信息。</li></ul> |

6. 单击**创建**。创建过程将需要一些时间，请耐心等待。
