---
sourceSHA: 044e6494cbb6575001e4e3d94e0aa155b36750be28c6d87ea7012bbf55d101a5
weight: 20
---

# 监控自定义网络接口

## 场景

在创建工作负载集群后，平台监控系统默认只能识别符合 `eth.|en.|wl.*|ww.*` 模式的网络接口名称。对于自定义网络接口名称，监控页面上无法看到网络流量数据。平台允许您修改相关资源参数，以手动捕获这些自定义接口的网络流量数据。

## 步骤

1. 登录到 `global` 集群的任意控制平面节点。

2. 查找与您的工作负载集群对应的 moduleinfo 资源名称：

   ```bash
   kubectl get moduleinfo | grep -E 'prometheus|victoriametrics'
   ```

   示例输出：

   ```bash
   global-6448ef7f7e5e3924c1629fad826372e7     global     prometheus          prometheus                          Running   v3.15.0-zz231204040711-9d1fc12474c2   v3.15.0-zz231204040711-9d1fc12474c2   v3.15.0-zz231204040711-9d1fc12474c2
   ovn-0954f21f0359720e8c115804376b3e7e        ovn        prometheus          prometheus                          Running   v3.15.0-zz231204040711-9d1fc12474c2   v3.15.0-zz231204040711-9d1fc12474c2   v3.15.0-zz231204040711-9d1fc12474c2
   ```

3. 编辑您的工作负载集群的 moduleinfo 资源。将 `ovn-0954f21f0359720e8c115804376b3e7e` 替换为上一步的资源名称：

   ```
   kubectl edit moduleinfo ovn-0954f21f0359720e8c115804376b3e7e
   ```

4. 添加 valuesOverride 字段。根据注释修改该字段和正则表达式：

   ```
   spec:
     valuesOverride: # 如果该字段不存在，请在 spec 下添加 valuesOverride 字段，并使用以下参数
       ait/chart-cpaas-monitor:
         ovn: # 替换为您的工作负载集群名称
           indicator:
             networkDevice: eth.*|em.*|en.*|wl.*|ww.*|[A-Z].*i|custom_interface # 用您的自定义正则表达式替换 custom_interface，以匹配您的网络接口名称
   ```

5. 等待大约 10 分钟，然后检查节点监控页面上的网络相关图表，以验证更改是否已生效。
