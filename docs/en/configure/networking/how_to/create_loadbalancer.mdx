---
weight: 20
sourceSHA: 4b6d6d95941be139632ff27eb567032122c9aef040f69cfe170cb27c0597def5
---

# Configure a Load Balancer

A Load Balancer is a service that distributes traffic to container instances. By utilizing load balancing functionality, it automatically allocates access traffic for computing components and forwards it to the container instances of those components. Load balancing can improve the fault tolerance of computing components, scale the external service capability of those components, and enhance the availability of applications.

Platform administrators can create single-point or high-availability load balancers for any cluster on the platform, and uniformly manage and allocate load balancer resources. For example, load balancing can be assigned to projects, ensuring that only users with the appropriate project permissions can utilize the load balancing.

Please refer to the table below for explanations of related concepts in this section.

| Parameter         | Description                                                                                                                                                                                                                               |
| ----------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **Load Balancer** | A software or hardware device that distributes network requests to available nodes in a cluster. The load balancer used in the platform is a Layer 7 software load balancer.                                                              |
| **VIP**           | Virtual IP address (Virtual IP Address) is an IP address that does not correspond to a specific computer or a specific network interface card. When the load balancer is of high-availability type, the access address should be the VIP. |

## Prerequisites

The high availability of the **Load Balancer** requires a VIP. Please refer to [Configure VIP](../how_to/deploy_high_available_vip_for_alb.mdx).

## Example ALB2 custom resource (CR)

```yaml
# test-alb.yaml
apiVersion: crd.alauda.io/v2beta1
kind: ALB2
metadata:
  name: alb-demo
  namespace: cpaas-system
  annotations:
    cpaas.io/display-name: ""
spec:
  address: 192.168.66.215
  config:
    vip: #[!code callout]
      enableLbSvc: false
      lbSvcAnnotations: {}
    networkMode: host #[!code callout]
    enablePortProject: false #[!code callout]
    nodeSelector:
      cpu-model.node.kubevirt.io/Nehalem: "true"
    projects: #[!code callout]
      - ALL_ALL
    replicas: 1
    resources: #[!code callout]
      limits:
        cpu: 200m
        memory: 256Mi
      requests:
        cpu: 200m
        memory: 256Mi
  type: nginx
```

<Callouts>

1. When `enableLbSvc` is true, it will create an internal LoadBalancer type service for the load balancer's access address.
   `lbSvcAnnotations` Configuration Reference LoadBalancer Type Service Annotations.
2. Check the Network Mode configuration below.
3. Check the Resource Allocation Method below.
4. Check the Assigned Project below.
5. Check the Specification below.

</Callouts>

## Creating a Load Balancer by using the web console.

1. Navigate to **Platform Management**.

2. In the left sidebar, click on **Network Management** > **Load Balancer**.

3. Click on **Create Load Balancer**.

4. Follow the instructions below to complete the network configuration.

   | Parameter                           | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
   | ----------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
   | **Network Mode**                    | <ul><li>**Host Network Mode**: Only one load balancer replica is allowed to be deployed on a single node, with multiple services sharing one ALB, resulting in superior network performance.</li><li>**Container Network Mode**: Multiple load balancer replicas can be deployed on a single node to meet the requirements of separate ALBs for each service, with slightly lower network performance.</li></ul>                                                                                                                                                                                                                                                                                       |
   | **Service and Annotations (Alpha)** | <ul><li>**Service**: When enabled, it will create an internal LoadBalancer type service for the load balancer's access address. Before use, ensure that the current cluster supports LoadBalancer type service. You can implement the platform's built-in LoadBalancer type service; when disabled, you need to configure an [External Address Pool](../functions/create_metallb.mdx) for the load balancer.</li><li>**Annotations**: Used to declare the configuration or capabilities of Internal LoadBalancer type routing; for specifics, please refer to [Annotations for Internal LoadBalancer Type Routing](../functions/configure_service.mdx#loadbalancer_type_service_annotation).</li></ul> |
   | **Access Address**                  | The access address for load balancing, i.e., the service address of the load balancer instance. After the load balancer is successfully created, it can be accessed via this address. <ul><li>In host network mode, please fill out according to actual conditions; it can be a domain name or an IP address (internal IP, external IP, VIP).</li><li>In container network mode, it will be acquired automatically.</li></ul>                                                                                                                                                                                                                                                                          |

5. Follow the instructions below to complete the resource configuration.

   | Parameter                      | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
   | ------------------------------ | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
   | **Specification**              | Please set the specifications reasonably according to business needs. You can also refer to [How to properly allocate CPU and memory resources](../how_to/decide_performance_selection.mdx) for reference.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
   | **Deployment Type**            | <ul><li>**Single Point**: The container group of the load balancer is deployed on a single node, which may result in the risk of load balancer unavailability if a machine failure occurs.</li><li>**High Availability**: Multiple container groups of the load balancer are deployed across the corresponding number of nodes, usually 3. This satisfies the load balancing needs of large business volumes while providing emergency disaster recovery capabilities.</li></ul>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
   | **Replicas**                   | The number of replicas is the number of container groups for the load balancer.<br />**Tip**: To ensure high availability of the load balancer, it is recommended that the number of replicas be no less than 3.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
   | **Node Labels**                | Filter nodes using labels to deploy the load balancer.<br />**Tip**: <ul><li>It is recommended that the number of nodes meeting the requirements be greater than the number of load balancer replicas.</li><li>A label with the same key can only select one (if multiple are selected, no matching hosts will be available).</li></ul>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
   | **Resource Allocation Method** | <ul><li>**Instance**: Any port within the range of 1-65535 that the load balancer instance can listen on can be provided for project use.</li><li>**Port (Alpha)**: Only ports within the specified range can be allocated for project use. This method allows for finer-grained resource control when port resources are limited.</li></ul>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
   | **Assigned Project**           | <ul><li>When **Resource Allocation Method** is set to **Instance**, the load balancer can be allocated to all projects associated with the current cluster or to specified projects. In allocated projects, all Pods in all namespaces can receive requests distributed by the load balancer. <ul><li>**All Projects**: Allocates the load balancer for use by all projects associated with the current cluster.</li><li>**Specified Projects (Alpha)**: Click the dropdown box under **Specified Projects** and click the checkbox on the left of the project name to select one or more projects, allocating the load balancer for use by those specified projects.<br />**Tip**: You can filter projects by entering project names in the dropdown box.</li><li>**No Allocation (Alpha)**: Temporarily does not allocate any project. After the load balancer is created, you can use the **Update Project** operation to update the allocation project parameters for the created load balancer.</li></ul></li><li>When **Resource Allocation Method** is set to **Port**, this item does not need to be configured. Please manually allocate port information after creating the load balancer.</li></ul> |

6. Click **Create**. The creation process will take some time; please be patient.

## Creating a Load Balancer by using the CLI.

```shell
kubectl apply -f test-alb.yaml -n cpaas-system
```

## Update Load Balancer by using the web console

:::note
Updating the load balancer will cause a service interruption for 3 to 5 minutes. Please choose an appropriate time for this operation!
:::

1. Enter **Platform Management**.

2. In the left navigation bar, click **Network Management** > **Load Balancer**.

3. Click ⋮ > **Update**.

4. Update the network and resource configuration as needed.

   - Please set specifications reasonably according to business needs. You can also refer to the relevant [How to properly allocate CPU and memory resources](../how_to/decide_performance_selection.mdx) for guidance.

   - **Internal routing** only supports updating from **Disabled** state to **Enabled** state.

5. Click **Update**.

## Delete Load Balancer by using the web console

:::note
After deleting the load balancer, the associated ports and rules will also be deleted and cannot be restored.
:::

1. Enter **Platform Management**.

2. In the left navigation bar, click **Network Management** > **Load Balancer**.

3. Click ⋮ > **Delete**, and confirm.

## Delete Load Balancer by using the CLI

```shell
kubectl delete alb2 test-alb -n cpaas-system
```

## Configure Listener Ports (Frontend)

The load balancer supports receiving client connection requests through listener ports and corresponding protocols, including HTTPS, HTTP, gRPC, TCP, and UDP.

## Prerequisites

If you need to add an HTTPS listener port, you should also contact the administrator to assign a TLS certificate to the current project for encryption.

## Example Frontend custom resource (CR)

```yaml
# alb-frontend-demo.yaml
apiVersion: crd.alauda.io/v1
kind: Frontend
metadata:
  labels:
    alb2.cpaas.io/name: alb-demo # [!code callout]
  name: alb-demo-00080 # [!code callout]
  namespace: cpaas-system
spec:
  backendProtocol: "http"
  certificate_name: "" # [!code callout]
  port: 80
  protocol: http # [!code callout]
  serviceGroup: # [!code callout]
    services:
      - name: hello-world
        namespace: default
        port: 80
        weight: 100 # [!code callout]
```

<Callouts>

1. Required, indicate the ALB instance to which this `Frontend` belongs to.
2. Format as `$alb_name-$port`.
3. Format as `$secret_ns/$secret_name`.
4. Protocol of this `Frontend` itself.
   - `http|https|grpc|grpcs` for l7 proxy.
   - `tcp|udp` for l4 proxy.
5. For l4 proxy, `serviceGroup` is required. For l7 proxy, `serviceGroup`
   is. optional. When a request arrives, ALB will first try to match it against
   rules associated with this `Frontend`. Only if the request doesn't match any
   rule, ALB will then forward it to the default `serviceGroup` specified in the `Frontend` configuration.
6. `weight` configuration applicable to Round Robin and Weighted Round Robin scheduling algorithms.

</Callouts>

:::note
ALB listens to ingress and automatically creates a `Frontend` or Rule. `source` field is defined as follows:

1. `spec.source.type` currently only supports `ingress`.
2. `spec.source.name` is ingress name.
3. `spec.source.namespace` is ingress namespace.

:::

## Creating Listener Ports (Frontend) by using the web console

1. Go to **Container Platform**.

2. In the left navigation bar, click **Network** > **Load Balancing**.

3. Click the name of the load balancer to enter the details page.

4. Click **Add Listener Port**.

5. Refer to the following instructions to configure the relevant parameters.

   | Parameter                  | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
   | -------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
   | **Protocol**               | Supported protocols include HTTPS, HTTP, gRPC, TCP, and UDP. When selecting HTTPS, a certificate must be added; adding a certificate is optional for the gRPC protocol. <br /><br />**Note**: <br /><ul><li>When selecting the gRPC protocol, the backend protocol defaults to gRPC, which does not support session persistence.</li><li>If a certificate is set for the gRPC protocol, the load balancer will unload the gRPC certificate and forward the unencrypted gRPC traffic to the backend service.</li><li>If using a Google GKE cluster, a load balancer of the same **container network type** cannot have both TCP and UDP listener protocols simultaneously.</li></ul> |
   | **Internal Routing Group** | - When the load balancing algorithm is set to **Round Robin (RR)**, traffic will be distributed to the internal routing ports in the order of the internal routing group. <br />- When the load balancing algorithm is set to **Weighted Round Robin (WRR)**, internal routes with higher weight values have a higher probability of being selected; traffic will be distributed to the internal routing ports based on the configured **weight**. <br />**Tip**: The probability calculation is the ratio of the current weight value to the sum of all weight values.                                                                                                             |
   | **Session Persistence**    | Always forward specific requests to the backend service corresponding to the aforementioned internal routing group. <br /><br />Specific requests include (choose one):<ul><li>Source Address Hash: All requests from the same IP address. <br />**Note**: In public cloud environments, the source address often changes, which may cause requests from the same client to have different source IP addresses at different times, leading to the source address hash technique not achieving the expected effect.</li><li>Cookie key: Requests that carry a specified cookie.</li><li>Header name: Requests that carry a specified header.</li></ul>                               |
   | **Backend Protocol**       | The protocol used for forwarding traffic to the backend services. For example, if forwarding to backend Kubernetes or dex services, the HTTPS protocol must be selected.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |

6. Click **OK**.

## Creating Listener Ports (Frontend) by using the CLI

```shell
kubectl apply -f alb-frontend-demo.yaml -n cpaas-system
```

## Subsequent Actions

For traffic from HTTP, gRPC, and HTTPS ports, in addition to the default internal routing group, you can set more varied back-end service matching [rules](#alb_add_rule). The load balancer will initially match the corresponding backend service according to the set rules; if the rule match fails, it will then match the backend services corresponding to the aforementioned internal routing group.

## Related Operations

You can click the ⋮ icon on the right side of the list page or click **Actions** in the upper right corner of the details page to update the default route or delete the listener port as needed.

:::note
If the resource allocation method of the load balancer is **Port**, only administrators can delete the related listener ports in the **Platform Management** view.
:::

# Configure Rules \{#alb_rule}

Add forwarding rules for the listener ports of HTTPS, HTTP, and gRPC protocols. The load balancer will match the backend services based on these rules.

:::note
Forwarding rules cannot be added for TCP and UDP protocols.
:::

## Example Rule custom resource (CR) \{#alb_add_rule}

```yaml
# alb-rule-demo.yaml
apiVersion: crd.alauda.io/v1
kind: Rule
metadata:
  labels:
    alb2.cpaas.io/frontend: alb-demo-00080 # [!code callout]
    alb2.cpaas.io/name: alb-demo #[!code callout]
  name: alb-demo-00080-test
  namespace: cpaas-system
spec:
  backendProtocol: "" #[!code callout]
  certificate_name: "" #[!code callout]
  dslx:
    - type: METHOD
      values:
        - - EQ
          - POST
    - type: URL
      values:
        - - STARTS_WITH
          - /app-a
        - - STARTS_WITH
          - /app-b
    - type: PARAM
      key: group
      values:
        - - EQ
          - vip
    - type: HOST
      values:
        - - ENDS_WITH
          - .app.com
    - type: HEADER
      key: LOCATION
      values:
        - - IN
          - east-1
          - east-2
    - type: COOKIE
      key: uid
      values:
        - - EXIST
    - type: SRC_IP
      values:
        - - RANGE
          - "1.1.1.1"
          - "1.1.1.100"
  enableCORS: false
  priority: 4 #[!code callout]
  serviceGroup: #[!code callout]
    services:
      - name: hello-world
        namespace: default
        port: 80
        weight: 100
```

<Callouts>

1. Required, indicate the `Frontend` to which this rule belongs.
2. Required, indicate the ALB to which this rule belongs.
3. As same as `Frontend`.
4. As same as `Frontend`.
5. The lower the number, the higher the priority.
6. As same as `Frontend`.

</Callouts>

### dslx

dslx is a domain specific language, it is used to describe the matching criteria.

For example, below rule matches a request that satisfies all the following criteria:

- url starts with /app-a or /app-b
- method is post
- url param's group is vip
- host is \*.app.com
- header's location is east-1 or east-2
- has a cookie name is uid
- source IPs come from 1.1.1.1-1.1.1.100

```yaml
dslx:
  - type: METHOD
    values:
      - - EQ
        - POST
  - type: URL
    values:
      - - STARTS_WITH
        - /app-a
      - - STARTS_WITH
        - /app-b
  - type: PARAM
    key: group
    values:
      - - EQ
        - vip
  - type: HOST
    values:
      - - ENDS_WITH
        - .app.com
  - type: HEADER
    key: LOCATION
    values:
      - - IN
        - east-1
        - east-2
  - type: COOKIE
    key: uid
    values:
      - - EXIST
  - type: SRC_IP
    values:
      - - RANGE
        - "1.1.1.1"
        - "1.1.1.100"
```

## Creating Rule by using web console

1. Go to **Container Platform**.

2. Click on **Network** > **Load Balancing** in the left navigation bar.

3. Click on the name of the load balancer.

4. Click on the name of the listener port.

5. Click **Add Rule**.

6. Refer to the following descriptions to configure the relevant parameters.

   | Parameter                                | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
   | ---------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
   | **Internal Route Group**                 | - When the load balancing algorithm selects **Round Robin (RR)**, the access traffic will be distributed to the ports of the internal routes in the order of the internal route group.<br />- When the load balancing algorithm selects **Weighted Round Robin (WRR)**, the higher the weight value of the internal route, the higher the probability it will be polled, and the access traffic will be distributed to the ports of the internal routes according to the probability calculated based on the configured **weight**.<br />**Tip**: The calculation method for probability is the ratio of the current weight value to the sum of all weight values.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
   | **Rule**                                 | Refers to the criteria for the load balancer to match backend services, including rule indicators and their values. The relationship between different rule indicators is 'and'.<br /><ul><li>Domain Name: Supports adding **wildcard domains** and **exact domain names**. In cases of equal priority for the same rule, if both wildcard and exact domain name rule configurations exist, the exact domain name forwarding rule will take effect first.</li><li>URL: **RegEx** corresponds to URL regular expressions starting with `/`; **StartsWith** corresponds to URL prefixes starting with `/`.</li><li>IP: **Equal** corresponds to a specific IP address; **Range** corresponds to an IP address range.</li><li>Header: In addition to entering the key of the header, matching rules must also be set. **Equal** corresponds to the specific value of the header; **Range** corresponds to the range of the header value; **RegEx** corresponds to the header's regular expression.</li><li>Cookie: In addition to entering the key of the cookie, matching rules must also be set. **Equal** corresponds to the specific value of the cookie.</li><li>URL Param: In matching rules, **Equal** corresponds to a specific URL parameter; **Range** corresponds to the URL parameter range.</li><li>Service Name: The Service Name refers to the name of the service that uses the gRPC protocol. When using the gRPC protocol, this item can be configured, enabling traffic to be forwarded to the corresponding service based on the provided Service Name, for example: `/helloworld.Greeter`.</li></ul> |
   | **Session Persistence**                  | Always forwards specific access requests to the backend services corresponding to the aforementioned internal route group.<br />Specific access requests refer to (choose one):<ul><li>Source Address Hash: All access requests originating from the same IP address.</li><li>Cookie Key: Access requests carrying the specified cookie.</li><li>Header Name: Access requests carrying the specified header.</li></ul>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
   | **URL Rewrite**                          | Rewrites the accessed address to the address of the platform's backend service. This feature requires the **StartsWith** rule indicator of the URL to be configured, and the rewrite address (rewrite-target) must start with _/_. <br /><br />For example: After setting the domain name to _bar.example.com_ and the starting path of the URL to `/`, enabling the **URL Rewrite** functionality and setting the rewrite address to _/test_. The access to _bar.example.com_ will rewrite the URL to _bar.example.com/test_.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
   | **Backend Protocol**                     | The protocol used to forward access traffic to the backend service. For example: If forwarding to the backend's Kubernetes or dex service, choose HTTPS protocol.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
   | **Redirection**                          | Forwards access traffic to a new redirected address rather than the backend services corresponding to the internal route group.<br />For example: When a page at the original access address is upgraded or updated, to avoid users receiving a 404 or 503 error page, the traffic can be redirected to the new address by configuration.<ul><li>HTTP Status Code: The status code presented to the user by the browser before redirecting to the new address.</li><li>Redirect Address: When entering a relative address (for example, _/index.html_), the purpose of the forwarded traffic will be _load balancer address/index.html_; when entering an absolute address (for example, _[https://www.example.com](https://www.example.com)_), the purpose of the forwarded traffic will be the entered address.</li></ul>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
   | **Rule Priority**                        | The priority of rule matching: there are 10 levels from 1 to 10, with 1 being the highest priority, and the default priority is 5.<br />When two or more rules are satisfied at the same time, the higher priority rule is selected and applied; if the priority is the same, the system uses the default matching rule.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
   | **Cross-Origin Resource Sharing (CORS)** | CORS (Cross-origin resource sharing) is a mechanism that utilizes additional HTTP headers to instruct the browser that a web application running on one origin (domain) is permitted to access specified resources from a different origin server. When a resource requests another resource that is from a server with a different domain, protocol, or port than its own, it initiates a cross-origin HTTP request.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
   | **Allowed Origins**                      | Used to specify the origins that are allowed to access. <ul><li>**\***: Allows requests from any origin.</li><li>**Domain Name**: Allows requests from the current domain.</li></ul>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
   | **Allowed Headers**                      | Used to specify the HTTP request headers allowed in CORS (Cross-Origin Resource Sharing) to avoid unnecessary preflight requests and improve request efficiency. Example entries are as follows:<br /><br />**Note**: Other commonly used or custom request headers will not be listed one by one here; please fill in according to actual conditions.<br /><br /><ul><li>**Origin**: Indicates the origin of the request, i.e., the domain that sends the request.</li><li>**Authorization**: Used to specify the authorization information for the request, usually for identification, such as Basic Authentication or Token.</li><li>**Content-Type**: Used to specify the content type of the request/response, such as application/json, application/x-www-form-urlencoded, etc.</li><li>**Accept**: Used to specify the content types that the client can accept, typically used when the client hopes to receive a specific type of response.</li></ul><br />                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |

7. Click **Add**.

## Creating Rule by using the CLI

```shell
kubectl apply -f alb-rule-demo.yaml -n cpaas-system
```

## Logs and Monitoring

By combining visualized logs and monitoring data, issues or failures with the load balancer can be quickly identified and resolved.

## Viewing Logs

1. Go to **Platform Management**.

2. In the left navigation bar, click on **Network Management** > **Load Balancer**.

3. Click on **_Load Balancer Name_**.

4. In the **Logs** tab, view the logs of the load balancer's runtime from the container's perspective.

## Monitoring Metrics

:::note
The cluster where the load balancer is located must deploy monitoring services.
:::

1. Go to **Platform Management**.

2. In the left navigation bar, click on **Network Management** > **Load Balancer**.

3. Click on **_Load Balancer Name_**.

4. In the **Monitoring** tab, view the metric trend information of the load balancer from the node's perspective.

   - **Usage Rate**: The real-time usage of CPU and memory by the load balancer on the current node.

   - **Throughput**: The overall incoming and outgoing traffic of the load balancer instance.

## Additional resources

- [ALB Monitoring](./monitor_request_metrics.mdx)
