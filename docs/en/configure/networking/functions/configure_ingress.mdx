---
weight: 11
sourceSHA: b9a10f43560fa1f6f8601fdeca460d1be972c6b97252c10984d03564c0c15c45
---

# Creating Ingresses

Ingress rules (Kubernetes Ingress) expose HTTP/HTTPS routes from outside the cluster to internal routing (Kubernetes Service), enabling control of external access to computing components.

Create an Ingress to manage the external HTTP/HTTPS access to a Service.

:::warning
When creating multiple ingresses within the same namespace, different ingresses **MUST NOT** have the same
**Domain**, **Protocol**, and **Path** (i.e., duplicate access points are not allowed).
:::

## Implementation Method

Ingress rules depend on the implementation of the Ingress Controller, which is responsible for listening to changes in Ingress and Service. After a new Ingress rule is created, a forwarding rule matching the Ingress rule is automatically generated within the Ingress Controller. When the Ingress Controller receives a request, it matches the forwarding rule from the Ingress rule and distributes the traffic to the specified internal routes, as shown in the diagram below.

<img src="../assets/netrelationship.png" width="500" />

:::note
For the HTTP protocol, Ingress only supports the 80 port as the external port. For the HTTPS protocol, Ingress only supports the 443 port as the external port. The platform's load balancer will automatically add the 80 and 443 listening ports.
:::

## Prerequisites

- There must be an available **Service** in the current namespace.

- Please confirm with the administrator that a usable domain name has been allocated for the project associated with the current namespace.

- To access the domain via HTTPS, you need to first save the HTTPS certificate as a TLS secret.

## Example Ingress:

```yaml
# example-ingress.yaml
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: example-ingress1
  namespace: kkxiao-1
  annotations:
    cpaas.io/display-name: ""
    alb.networking.cpaas.io/tls: developer.test.cn=cpaas-system/developer.test.cn-xfd8x # [!code callout]
spec:
  tls: []
  rules:
    - host: developer.test.cn
      http:
        paths:
          - path: "/"
            backend:
              service:
                name: test-service
                port:
                  number: 80
            pathType: Prefix
```

<Callouts>

1. When tls enable, you need provide a certificate configuration with `{host}={secret_namemespace/secret_name}` .

</Callouts>

## Creating Ingress by using the web console

1. Access the **Container Platform**.

2. In the left navigation bar, click **Network** > **Ingress**.

3. Click **Create Ingress**.

4. Reference the instructions below to configure certain parameters.

   | Parameter                   | Description                                                                                                                                                                                                                                                                                                               |
   | --------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
   | **Ingress Class**           | Ingresses can be implemented by different controllers with different `IngressClass` name. If multiple ingress controllers are available on the platform, the user can select which one to use with this option.                                                                                                           |
   | **Domain Name**             | Hosts can be precise matches (for example `foo.bar.com`) or a wildcard (for example `*.foo.com`). The domain names available are allocated by platform administrator.                                                                                                                                                     |
   | **Certificates**            | TLS secret or Certificates allocated by platform administrator.                                                                                                                                                                                                                                                           |
   | **Match Type** and **Path** | <ul><li>**Prefix**: Matches path prefixes, e.g., `/abcd` can match `/abcd/efg` or `/abcde`.</li><li>**Exact**: Matches exact paths, e.g., `/abcd`.</li><li>**Implementation specific**: If you are using a custom Ingress controller to manage the Ingress rules, you may choose to have the controller decide.</li></ul> |
   | **Service**                 | External traffic will be forwarded to this Service.                                                                                                                                                                                                                                                                       |
   | **Service Port**            | Specify which Service port the traffic will be forwarded to.                                                                                                                                                                                                                                                              |

5. Click **Create**.

:::note
The platform administrator can allocate ALB instances to projects.
If the ingress has no Ingress Class, all the ALB instances that are allocated to this project will handle this ingress.
:::
