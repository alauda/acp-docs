---
weight: 10
---
# l4/l7 timeout 
## basic concept
l4/l7 timeout is a feature provided by alb. It is used to configure the timeout time for l4/l7 proxy.

timeout is implemented through lua script, and nginx  **need not to reload** when it is changed.
## crd
```yaml
timeout:
  properties:
    proxy_connect_timeout_ms:
      type: integer
    proxy_read_timeout_ms:
      type: integer
    proxy_send_timeout_ms:
      type: integer
  type: object
```
config could be configured on:
- frontend: `.spec.config.timeout`
- rule: `.spec.config.timeout`
## what timeout mean
There are three types of timeouts:

1. proxy_connect_timeout_ms: Defines the timeout for establishing a connection with the upstream server. If the connection cannot be established within this time, the request will fail.

2. proxy_read_timeout_ms: Defines the timeout for reading a response from the upstream server. The timeout is set between two successive read operations, not for the entire response. If no data is received within this time, the connection is closed.

3. proxy_send_timeout_ms: Defines the timeout for sending a request to the upstream server. Similar to read timeout, this is set between two successive write operations. If no data can be sent within this time, the connection is closed.

## ingress annotation
| Annotation | Description |
|------------|-------------|
| nginx.ingress.kubernetes.io/proxy-connect-timeout | Corresponds to proxy_connect_timeout_ms in CR |
| nginx.ingress.kubernetes.io/proxy-read-timeout | Corresponds to proxy_read_timeout_ms in CR |
| nginx.ingress.kubernetes.io/proxy-send-timeout | Corresponds to proxy_send_timeout_ms in CR |

## port level timeout
you could configure timeout on port directly. which used as l4 timeout.

