---
weight: 10
---

# Configure Domain

Add domain name resources to the platform and allocate domains for use by all projects under a cluster or resources under a specific project. When creating a domain name, binding a certificate is supported.

:::note
The domain names created on the platform should be resolved to the cluster's load balancing address before they can be accessed via the domain name. Therefore, you need to ensure that the domain names added on the platform have been successfully registered and that the domain names resolve to the cluster's load balancing address.
:::

Successfully created and allocated domain names on the platform can be utilized in the following features of **Container Platform**:

- **Create Inbound Rules**: **Network Management** > **Inbound Rules** > **Create Inbound Rule**

- **Create Native Applications**: **Application Management** > **Native Applications** > **Create Native Application** > **Add Inbound Rule**

- **Add Listening Ports** for Load Balancing: **Network Management** > **Load Balancer Details** > **Add Listening Port**

Once the domain name is bound to a certificate, application developers can simply select the domain name when configuring the load balancer and inbound rules, allowing the use of the certificate that comes with the domain name for https support.

## Example Domain custom resource (CR)

```yaml
# test-domain.yaml
apiVersion: crd.alauda.io/v2
kind: Domain
metadata:
  name: '${random-unique-name}'
  annotations:
    cpaas.io/secret-ref: developer.test.cn-xfd8x # [!code callout]
  labels:
    cluster.cpaas.io/name: global
    project.cpaas.io/name: demo
spec:
  name: developer.test.cn
  kind: full
```

<Callouts>

1. If certificates are enabled, an LTS-type Secret must be created in advance. The `secret-ref` is secret name.

</Callouts>

## Creating Domain by using the web console

1. Go to **Administrator**.

2. In the left navigation bar, click **Network Management** > **Domain Names**.

3. Click **Create Domain Name**.

4. Configure the relevant parameters according to the following instructions.

   | Parameter            | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
   | -------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
   | **Type**             | <ul><li>Domain: A complete domain name, e.g., `developer.test.cn`.</li><li>Wildcard Domain: A wildcard domain with a wildcard (\*) character, e.g., `*.test.cn`, which includes all subdomains under the domain `test.cn`.</li></ul>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
   | **Domain**           | Enter a complete domain name or domain suffix based on the selected domain name type.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
   | **Allocate Cluster** | If a cluster is allocated, you also need to select a project associated with the allocated cluster, such as all projects associated with the cluster.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
   | **Certificate**      | Includes the public key (tls.crt) and private key (tls.key) for creating a domain name-bound certificate. The project to which the certificate is allocated is the same as the bound domain name.<br />**Notes**: <ul><li>Binary file imports are not supported.</li><li>The bound certificate should meet the conditions of correct format, within the validity period, and signed for the domain name, etc.</li><li>After creating the bound certificate, the name format of the bound certificate is: domain name - random characters.</li><li>After creating the bound certificate, the bound certificate can be viewed in the certificate list, but updates and deletions of the bound certificate are only supported on the domain detail page.</li><li>After creating the bound certificate, updating the certificate content is supported, but replacing other certificates is not supported.</li></ul> |

5. Click **Create**.

## Creating Domain by using the CLI

```shell
kubectl apply -f test-domain.yaml
```


## Use the Same Domain Across Multiple Clusters

You can configure the same domain to be used across multiple clusters by creating separate Domain resources in the global cluster with the identical `spec.name` value but different `cluster.cpaas.io/name` labels.

### Configure via Web Console

1. Follow the steps in [Creating Domain by using the web console](#creating-domain-by-using-the-web-console).

2. Create two domain resources with the **same domain name** (e.g., `app.example.com`).

3. For each domain, select a different **Allocate Cluster** (e.g., cluster-a and cluster-b).

### Configure via CLI

Create two Domain custom resources in the global cluster with identical `spec.name` but different `cluster.cpaas.io/name` labels:

:::note
The domain name (`spec.name`) must be identical in both Domain resources, but the resource `metadata.name` should be unique. Both resources are created in the global cluster.
:::

**Domain for Cluster A:**

```yaml
apiVersion: crd.alauda.io/v2
kind: Domain
metadata:
  name: '${random-unique-name}'
  labels:
    cluster.cpaas.io/name: cluster-a
    project.cpaas.io/name: project-a
spec:
  name: app.example.com  # Same domain name
  kind: full
```

**Domain for Cluster B:**

```yaml
apiVersion: crd.alauda.io/v2
kind: Domain
metadata:
  name: '${random-unique-name}'
  labels:
    cluster.cpaas.io/name: cluster-b
    project.cpaas.io/name: project-a
spec:
  name: app.example.com  # Same domain name as Cluster A
  kind: full
```


## Subsequent Actions

- **Domain Registration**: Register the domain if the created domain has not been registered.

- **Domain Resolution**: Perform domain resolution if the domain does not point to the platform cluster's load balancing address.

## Additional resources

- [Configure Certificate](./configure_certificate.mdx)
