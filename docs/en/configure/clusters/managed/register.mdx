---
weight: 50
title: Register Cluster
---

# Register Cluster

This is a method of deploying a reverse proxy service in the managed cluster, where the managed cluster actively initiates registration requests to the platform.

## Prerequisites

* Depending on the type of managed cluster, the versions and parameters of Kubernetes and other components on the managed cluster must meet the [Version and Parameter Requirements for Managed Clusters](/configure/clusters/overview.mdx#version-compatibility).

* The image registry must support HTTPS access and provide a valid TLS certificate authenticated by a public certification authority. If this cannot be met, refer to the FAQ [How to Trust Insecure Image Registries?](/configure/clusters/managed/how-to/image-repo-trust.mdx)

    **Note**: The **Public Registry** provided by the platform on the public network already meets HTTPS access requirements. You only need to verify whether the **Platform Default** and **Private Registry** support HTTPS access.

* If the runtime component of the cluster to be connected is Containerd, you need to [modify the Containerd configuration](#rook-ceph) before connecting the cluster to ensure successful deployment of distributed storage.

## Important Notes

The platform's network card traffic monitoring recognizes network cards with names matching `eth\.\|en\.\|wl\.*\|ww\.*` by default. Therefore, if you use network cards with other naming conventions, please refer to the [Collecting Network Data from Custom Named Network Cards](/configure/clusters/managed/how-to/netcard-chart.mdx) documentation to modify the corresponding resources after cluster connection, ensuring the platform can properly monitor network card traffic.

## Register Cluster

1. In the left navigation bar, click **Clusters** > **Clusters**.

2. Click **Managed Clusters** > **Register Cluster**.

3. Configure the registry parameters for storing platform component images required by the registered cluster according to the following instructions.

    |   Parameter |    Description    |
    | ------ | -------- |
    |  **Platform Default**  | Image registry used when deploying global components.   |
    |  **Private Registry**  | External image registry that you have set up in advance. You need to enter the **Private Image Registry Address**, **Port**, **Username**, and **Password** for accessing the image registry. |
    |  **Public Registry**  | Pull required images through the public image registry provided by the platform. You need to ensure that your cluster can access the public network. Before use, you need to first refer to [Update Public Network Image Registry Cloud Credentials](/configure/clusters/how-to/update_public_repository_credentials.mdx) to obtain registry authentication permissions.|

4. Click **Create**, obtain the registration command on the **Registration Command** page and run the command in the cluster to be registered.

    **Note**: The registration command is valid for 24 hours. Please re-obtain it after expiration.

## View Registration Command

You can find the cluster waiting for registration in the cluster list and click **View Registration Command**. Please perform the registration operation before the expiration time.

## FAQ

### How to Resolve Distributed Storage Deployment Failure When the Runtime Component of the Connected Cluster is Containerd? \{#rook-ceph}

When the runtime component of the connected cluster is Containerd, distributed storage deployment will fail. To resolve this issue, you need to manually modify the Containerd configuration information on **all nodes** of the cluster and restart Containerd.

**Note**: If you modify the Containerd configuration by following the steps below before deploying distributed storage, you do not need to execute step four.

1. Log in to the cluster node and edit the `/etc/systemd/system/containerd.service` file, changing the `LimitNOFILE` parameter value to `1048576`.

2. Execute the command `systemctl daemon-reload` to reload the configuration.

3. Execute the command `systemctl restart containerd` to restart Containerd.

4. Execute the command `kubectl delete pod --all -n rook-ceph` on the cluster control node to restart all Pods in the rook-ceph namespace to make the configuration effective.