---
title: "Huawei Cloud CCE Cluster Network Initialization Configuration"
description: "Huawei Cloud CCE cluster network initialization configuration."
weight: 300
---

## Support Overview

| Feature | Support Status | Requirements |
|---|---|---|
| **LoadBalancer Service** | Default Support | No additional deployment required. |
| **Ingress** | Default Support | Optionally enable **Ingress Class** functionality (once enabled, you can manually select ingress classes when creating ingress through the form interface). No additional deployment required. |

## Prerequisites

If you have created a CCE cluster, [import the CCE cluster (Public Cloud)](../managed/import/huawei-cce.mdx).
 {/* if not, [create a Huawei Cloud CCE cluster](../managed/create/huawei-cce.mdx). */}

## Configuration Steps

You can create ingress and LoadBalancer services simultaneously or choose one based on your needs.

### Create Ingress

There are two methods to create ingress. **Method 1: Manual Ingress Class Selection** is recommended.

**Note**: Avoid creating two ingress resources with the same **path**.

**(Recommended) Method 1: Manual Ingress Class Selection**

1. In **Container Platform**, click **Network** > **Ingress** in the left navigation.

2. Click **Create Ingress** and select **CCE Ingress Class** for **Ingress Class**.

3. Select **Protocol**. Default is **HTTP**. For **HTTPS**, first [create a certificate](#create-certificate) and select it.

4. Switch to **YAML** and add the following annotations based on your default Ingress Controller type. For annotation details, see [Using Annotations to Configure Load Balancers](https://support.huaweicloud.com/intl/zh-cn/usermanual-cce/cce_10_0385.html):

    **Note**: Replace the **values** in the annotations below with actual environment values.

    | **Default Ingress Controller Type** | **Annotations** |
    |---|---|
    | Shared (Auto-create) | `kubernetes.io/elb.autocreate: '{"type":"public","bandwidth_name":"{random}","bandwidth_chargemode":"traffic","bandwidth_size":5,"bandwidth_sharetype":"PER","eip_type":"5_bgp"}'`<br/>`kubernetes.io/elb.class: union` |
    | Shared (Reuse) | `kubernetes.io/elb.class: union`<br/>`kubernetes.io/elb.id: <Load Balancer Instance ID>`<br/>`kubernetes.io/elb.port: '80'` |
    | Dedicated (Auto-create) | `kubernetes.io/elb.autocreate: '{"type":"public","bandwidth_name":"<Bandwidth Name>","bandwidth_chargemode":"traffic","bandwidth_size":5,"bandwidth_sharetype":"PER","eip_type":"5_bgp","available_zone":["<AZ A>","<AZ B>","<AZ C>"],"elb_virsubnet_ids":["<ELB Virtual Subnet ID>"],"l7_flavor_name":"L7_flavor.elb.s1.small","l4_flavor_name":"L4_flavor.elb.s1.small"}'`<br/>`kubernetes.io/elb.class: performance`<br/>`kubernetes.io/elb.port: "80"` |
    | Dedicated (Reuse) | `kubernetes.io/elb.class: performance`<br/>`kubernetes.io/elb.id: <Load Balancer Instance ID>`<br/>`kubernetes.io/elb.port: "80"` |

5. Click **Create**. Once created, you can access cluster services through ELB.

**Method 2: Use Default Ingress Class**

1. Create an IngressClass YAML file with the following content. For details, see [Default Ingress Class](https://kubernetes.io/zh-cn/docs/concepts/services-networking/ingress/#default-ingress-class):

    ```yaml
    apiVersion: networking.k8s.io/v1
    kind: IngressClass
    metadata:
      annotations:
        ingressclass.kubernetes.io/is-default-class: "true"
      name: cce
    spec:
      controller: alauda/cce
    ```

2. Save the file and apply it to the imported cluster. Replace `<filename.yaml>` with your actual YAML filename:

    ```bash
    kubectl apply -f <filename.yaml>
    ```

3. In **Container Platform**, click **Network** > **Ingress** in the left navigation.

4. Select **Protocol**. Default is **HTTP**. For **HTTPS**, first [create a certificate](#create-certificate) and select it.

5. Click **Create**. Once created, you can access cluster services through ELB.

### Create LoadBalancer Service

1. In **Container Platform**, click **Network** > **Services** in the left navigation.

2. Click **Create Service** and select **LoadBalancer** for **External Access**.

3. Expand **annotations** and fill in LoadBalancer service annotations as needed.

4. Click **Create**.

## Related Operations

### Create Certificate

When using HTTPS protocol, save HTTPS certificate credentials as a Secret (TLS type) in advance.

1. In **Container Platform**, click **Configuration** > **Secrets** in the left navigation.

2. Click **Create Secret**.

3. Select **TLS** type and import or fill in **Certificate** and **Private Key** as needed.

4. Click **Create**.
