---
weight: 20
---
# Pre-Upgrade Preparation

Supported upgrade paths: **`3.18` → `4.1`**, **`4.0` → `4.1`**.  
Before upgrading, ensure that your current platform version is within this supported range.  

## Important Notes

* When upgrading the cluster's **Kubernetes version to 1.31 or higher**, all running Pods will be **restarted**. This behavior is due to changes in the PodSpec fields introduced in Kubernetes 1.31 and cannot be avoided. For more details, refer to the Kubernetes issue report: [#129385](https://github.com/kubernetes/kubernetes/issues/129385).

* Starting from <Term name="productShort" /> **4.0**, the upgrading procedure of the **DR (Disaster Recovery Environment)** has changed. Please refer to [global DR procedure](./upgrade_global_cluster.mdx#global_dr) for the new procedure.

## Prerequisites

| Condition | Requirement | If Not Met |
| --------- | ----------- | ---------- |
| **Elasticsearch logging** | Must comply with the fix described in *How to Correct the Issue of Node Role Settings in Big Cluster Elasticsearch* (see Custom Portal > Knowledge) | Apply the fix before upgrade |
| **Disk space on `/cpaas/minio` (global cluster control plane)** | At least **120 GB free** | Expand storage |
| **Disk space for upgrade package extraction** | At least **250 GB free** if package and extraction path are on the same disk | Free or expand storage |

<Tabs>
  <Tab label="Upgrading from 3.18">
  | Condition | Requirement | If Not Met |
  | --------- | ----------- | ---------- |
  | **Kubernetes version** | All clusters must be on **1.30 or later** | Upgrade Kubernetes before proceeding |
  | **Service mesh (Istio)** | Version must be **1.22** | Upgrade Istio first |
  | **CostManager / Kubecost plugins** | Must **not** be installed (deprecated since 4.0) | Uninstall the plugins |
  </Tab>
</Tabs>

### Download the Packages

From the **Custom Portal**, download the **ACP 4.1 Core Package** and the **Extensions package**.
When downloading Extensions, select the scenario: **`For upgrading ACP from 3.18.x to 4.1.x`**.

The Extensions package contains Operators and Cluster Plugins that may require upgrades during the process.

### Run the Checklist

Contact technical support to obtain the **checklist script** and run it against the target platform to verify readiness.

## Upgrade from ACP 4.0

Documentation for upgrading from ACP 4.0 will be provided in an upcoming release.
