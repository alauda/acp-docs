---
weight: 20
---
# Pre-Upgrade Preparation

Supported upgrade paths: **`3.18` → `4.1`**, **`4.0` → `4.1`**.

Before upgrading, ensure that your current platform version is within this supported range.

## Upgrade from ACP 3.18

### Prerequisites

| Condition | Requirement | If Not Met |
| --------- | ----------- | ---------- |
| **Kubernetes version** | All clusters must be on **1.30 or later** | Upgrade Kubernetes before proceeding |
| **Service mesh (Istio)** | Version must be **1.22** | Upgrade Istio first |
| **CostManager / Kubecost plugins** | Must **not** be installed (deprecated since 4.0) | Uninstall the plugins |
| **Elasticsearch logging** | Must comply with the fix described in *How to Correct the Issue of Node Role Settings in Big Cluster Elasticsearch* (see Custom Portal > Knowledge) | Apply the fix before upgrade |
| **Disk space on `/cpaas/minio` (global cluster control plane)** | At least **120 GB free** | Expand storage |
| **Disk space for upgrade package extraction** | At least **250 GB free** if package and extraction path are on the same disk | Free or expand storage |

### Important Notes

* Starting with **4.0**, the upgrade procedure for clusters using **global DR (Disaster Recovery)** has changed. Refer to [Global DR Procedure](./upgrade_global_cluster.mdx#global_dr) for details.

* When upgrading Kubernetes to **1.31 or later**, all running Pods will be **restarted** due to changes in PodSpec fields introduced in Kubernetes 1.31.
  This behavior is unavoidable. For details, see [Kubernetes issue #129385](https://github.com/kubernetes/kubernetes/issues/129385).

### Download the Packages

From the **Custom Portal**, download the **ACP 4.1 Core Package** and the **Extensions package**.
When downloading Extensions, select the scenario: **`For upgrading ACP from 3.18.x to 4.1.x`**.

The Extensions package contains Operators and Cluster Plugins that may require upgrades during the process.

### Run the Checklist

Contact technical support to obtain the **checklist script** and run it against the target platform to verify readiness.

## Upgrade from ACP 4.0

Documentation for upgrading from ACP 4.0 will be provided in an upcoming release.
