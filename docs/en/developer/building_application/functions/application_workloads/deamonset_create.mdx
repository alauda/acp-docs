---
weight: 20
i18n:
  title:
    en: Creating DaemonSets
    zh: 创建 DaemonSets
---

# Creating DaemonSets

**DaemonSet** is a Kubernetes controller object that ensures all (or a subset of) cluster nodes run exactly one replica of a specified Pod. Unlike Deployments, DaemonSets are node-centric rather than application-centric, making them ideal for cluster-wide infrastructure services. 

:::warning
**DaemonSet Operational Notes**

1. **Behavior Characteristics** 
   - **Pod Distribution**  
      - Deploys exactly **one Pod replica per schedulable node** matching:
         - `nodeSelector` criteria
         - Not in `NotReady` state
         - No `NoSchedule`/`NoExecute` taints (unless tolerations are configured)
      - **Pod Count Formula**:  
     `Number of Pods = Number of qualified nodes`

   - **Dual-Role Node Handling**  
      - Nodes serving both control plane and worker roles will only run **one Pod instance** regardless of role labels.

2. **Key Constraints**: ❌ Excluded Nodes
   - Nodes with `Unschedulable: true` flag
   - Nodes with `NotReady` status
   - Nodes having incompatible taints without matching tolerations
:::

## Prerequisites

Obtain the image address. The source of the images can be from the image repository integrated by the platform administrator through the toolchain or from third-party platforms' image repositories.

- For the former, the Administrator typically assigns the image repository to your project, and you can use the images within it. If the required image repository is not found, please contact the Administrator for allocation.

- If it is a third-party platform's image repository, ensure that images can be pulled directly from it in the current cluster.

## Procedure

1. **Container Platform**, navigate to **Workloads** > **DaemonSets** in the left sidebar. 

2. Click **Create DaemonSets**.

3. **Select** or **Input** an image, and click **Confirm**.

:::info
   **Note**: When using images from the image repository integrated into web console, you can filter images by **Already Integrated**. The **Integration Project Name**, for example, images (docker-registry-projectname), which includes the project name projectname in this web console and the project name containers in the image repository.
:::

### Configure Basic info

In the **Basic Info** section, configure declarative parameters for Deployment workloads: 

   | **Parameters** | **Description** |
   |:--------------------------|:--------------------------|
   | **More** > **Update Strategy** | Configures the `rollingUpdate` strategy for zero-downtime deployments: <br/>  **Max surge** (`maxSurge`):  <ul><li>Maximum number of Pods that can exceed the desired replica count during an update. </li><li> Accepts absolute values (e.g., `2`) or percentages (e.g., `20%`). </li><li> Percentage calculation: `ceil(current_replicas × percentage)`. </li><li>Example: 4.1 → `5` when calculated from 10 replicas. </li></ul> **Max unavailable** (`maxUnavailable`): <ul><li> Maximum number of Pods that can be temporarily unavailable during an update.  </li><li>Percentage values cannot exceed `100%`.  </li><li>Percentage calculation: `floor(current_replicas × percentage)`.   </li><li> Example: 4.9 → `4` when calculated from 10 replicas.  </li></ul> **Notes**: <br/> 1. **Default values**: `maxSurge=1`, `maxUnavailable=1` if not explicitly set.  <br/> 2. **Non-running Pods** (e.g., in `Pending`/`CrashLoopBackOff` states) are considered unavailable.  <br/> 3. **Simultaneous constraints**: <ul><li> `maxSurge` and `maxUnavailable` cannot both be `0` or `0%`. </li><li>If percentage values resolve to `0` for both parameters, Kubernetes forces `maxUnavailable=1` to ensure update progress.  </li></ul> **Example**: <br/> For a Deployment with 10 replicas: <br/><ul><li> `maxSurge=2` → Total Pods during update: `10 + 2 = 12`. </li><li>`maxUnavailable=3` → Minimum available Pods: `10 - 3 = 7`. </li><li> This ensures availability while allowing controlled rollout. </li></ul> |

### Configure Pod

In the **Pod** section, please refer to [Creating Deployment - Configure Pod](./deployment_create.mdx#configurepod)

### Configure Containers

In the **Container** section, please refer to [Creating Deployment - Configure Containers](./deployment_create.mdx#configurecontainers)

### Create

Click **Create**.
After clicking **Create**, the DaemonSet will: 

✅ Automatically deploy Pod replicas to all **eligible nodes** meeting:  
   - `nodeSelector` criteria (if defined)  
   - `tolerations` configuration  
   - Node in `Ready` state & `Schedulable: true`

❌ **Excluded Nodes**:  
   - Nodes with `NoSchedule` taint (unless tolerated)  
   - Manually cordoned nodes (`kubectl cordon`)  
   - Nodes in `NotReady`/`Unschedulable` state



