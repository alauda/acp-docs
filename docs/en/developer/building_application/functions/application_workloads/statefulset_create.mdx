---
weight: 30
i18n:
  title:
    en: Creating StatefulSets
    zh: 创建 StatefulSets
title: Creating StatefulSets
---

# Creating StatefulSet

**StatefulSet** is a Kubernetes controller designed to manage stateful applications by orchestrating Pod instances with stable network identities and persistent storage. Within a single application architecture, you may deploy multiple StatefulSets as discrete components to deliver specialized services while maintaining ordered deployment, scaling, and rolling updates.

## Prerequisites

Obtain the image address. The source of the images can be from the image repository integrated by the platform administrator through the toolchain or from third-party platforms' image repositories.

- For the former, the Administrator typically assigns the image repository to your project, and you can use the images within it. If the required image repository is not found, please contact the Administrator for allocation.

- If it is a third-party platform's image repository, ensure that images can be pulled directly from it in the current cluster.

## Procedure

1. **Container Platform**, navigate to **Workloads** > **StatefulSets** in the left sidebar. 

2. Click **Create StatefulSet**.

3. **Select** or **Input** an image, and click **Confirm**.

   **Note**: You can filter images by selecting only when using images from the integrated image repository of this platform. For example, the integrated project name such as *containers (docker-registry-projectname)* includes the project name *projectname* from this platform and the project name *containers* from the image repository.

### Configure Basic info

In the **Basic Info** section, configure declarative parameters for Deployment workloads: 
   | **Parameters** | **Description** |
   |:--------------------------|:--------------------------|
   | **Replicas**  | Defines the desired number of Pod replicas in the Deployment (default: `1`). Adjust based on workload requirements.  Please set this according to the actual business request volume.   |
   | **Update Strategy** | Controls phased updates in StatefulSet rolling updates: <br/>1. **Partition Value**: <ul><li> Specifies the ordinal threshold for Pod updates.</li></ul> 2. **Behavior**: <ul><li> Pods with ordinal ≥ partition value will update immediately. </li><li> Pods with ordinal < partition value retain previous template. </li></ul>  3. **Invalid Case**: <ul><li> If partition > replica count, treated as 0 </li></ul> **Example**: <ul><li> Replicas=5 (Pods: web-0 ~ web-4)</li><li> Partition=3 → Updates web-3 & web-4 only. </li></ul>|
   |**Volume Claim Templates**| `volumeClaimTemplates` is a critical feature of StatefulSets that enables **dynamic per-Pod persistent storage provisioning**. Each Pod replica in a StatefulSet automatically gets its own dedicated PersistentVolumeClaim (PVC) based on predefined templates.<br/> 1. **Dynamic PVC Creation**: Automatically creates unique PVCs for each Pod:<ul><li> Naming pattern: `<statefulset-name>-<claim-template-name>-<pod-ordinal>`</li><li> Example: `web-data-0`, `web-data-1` </li></ul> 2. **Access Modes**: Supports all Kubernetes access modes:<ul><li> `ReadWriteOnce` (RWO): Single-node read/write </li><li>`ReadOnlyMany` (ROX): Multi-node read-only</li><li> `ReadWriteMany` (RWX): Multi-node read/write</li></ul> 3. **Storage Class**: Specify storage backend via `storageClassName`:<ul><li> Uses cluster's default StorageClass if unspecified </li><li> Supports cloud/on-prem storage types (SSD, HDD, etc.) </li></ul> **Capacity**: Configure capacity through `resources.requests.storage`:<ul><li> Example: `100Gi`</li><li> Supports dynamic volume expansion (if enabled)</li></ul>|

### Configure Pod

In the **Pod** section, please refer to [Creating Deployment - Configure Pod](./deployment_create.mdx#configurepod)

### Configure Containers

In the **Container** section, please refer to [Creating Deployment - Configure Containers](./deployment_create.mdx#configurecontainers)

### Create

Click **Create**.

