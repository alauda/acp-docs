---
weight: 20
i18n:
  title:
    en: Configuring ConfigMap
    zh: 配置 ConfigMap
---

# Configuring ConfigMap

Store configuration data in key-value pairs within a ConfigMap, including single attributes or entire configuration files. ConfigMaps can be referenced in workloads through environment variables, configuration references, and other means.

:::note
A Pod can only use ConfigMaps within the same namespace.
:::

## Example ConfigMap

You can now use app-config in a `Pod`.

```yaml
# app-config.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: app-config
  namespace: k-1
data:
  APP_ENV: "production"
  LOG_LEVEL: "debug"
```

## Creating a ConfigMap by using the web console

1. Go to **Container Platform**.

2. In the left sidebar, click **Configuration** > **ConfigMap**.

3. Click **Create ConfigMap**.

4. Refer to the instructions below to configure the relevant parameters.

   | Parameter          | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
   | ------------------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
   | **Entries**        | Refers to `key:value` pairs, supporting both **Add** and **Import** methods.<br /><ul><li>**Add**: You can add configuration items one by one, or you can paste one or multiple lines of key=value pairs in the Key input area to bulk add configuration items.</li><li>**Import**: Import a text file not larger than 1M. The file name will be used as the key, and the file content will be used as the value, filled into a configuration item.</li></ul> |
   | **Binary Entries** | Refers to binary files not larger than 1M. The file name will be used as the key, and the file content will be used as the value, filled into a configuration item.<br />**Note**: After creating a ConfigMap, the imported files cannot be modified.                                                                                                                                                                                                         |

   **Example of Bulk Add Format**:

   ```
   # One key=value pair per line, multiple pairs must be on separate lines, otherwise they will not be recognized correctly after pasting.
   key1=value1
   key2=value2
   key3=value3
   ```

5. Click **Create**.

## Creating a ConfigMap by using the CLI

```shell
kubectl create configmap app-config \
  --from-literal=APP_ENV=production \
  --from-literal=LOG_LEVEL=debug
```

Or from a file:

```shell
kubectl apply -f app-config.yaml -n k-1
```

## Operations

You can click the (⋮) on the right side of the list page or click **Actions** in the upper right corner of the detail page to update or delete the ConfigMap as needed.

Changes to the ConfigMap will affect the workloads that reference the configuration, so please read the operation instructions in advance.

| Operations | Description                                                                                                                                                                                                                                                                                                                                   |
| ---------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **Update** | <ul><li>After adding or updating a ConfigMap, any workloads that have referenced this ConfigMap (or its configuration items) through environment variables need to rebuild their Pods for the new configuration to take effect.</li><li>For imported binary configuration items, only key updates are supported, not value updates.</li></ul> |
| **Delete** | After deleting a ConfigMap, workloads that have referenced this ConfigMap (or its configuration items) through environment variables may be adversely affected during Pod creation if they are rebuilt and cannot find the reference source.                                                                                                  |

## View, Edit and Delete by using the CLI

```shell
kubectl get configmap app-config -n k-1 -o yaml
kubectl edit configmap app-config -n k-1
kubectl delete configmap app-config -n k-1
```

## Ways to Use a ConfigMap in a Pod

### As Environment Variables

```yaml
envFrom:
  - configMapRef:
      name: app-config
```

Each key becomes an environment variable in the container.

### As Files in a Volume

```yaml
volumes:
  - name: config-volume
    configMap:
      name: app-config

volumeMounts:
  - name: config-volume
    mountPath: /etc/config
```

Each key is a file under `/etc/config`, and the file content is the value.

### As Individual Environment Variables

```yaml
env:
  - name: APP_ENV
    valueFrom:
      configMapKeyRef:
        name: app-config
        key: APP_ENV
```

## ConfigMap vs Secret

| Feature   | ConfigMap      | Secret                      |
| --------- | -------------- | --------------------------- |
| Data Type | Non-sensitive  | Sensitive (e.g., passwords) |
| Encoding  | Plaintext      | Base64-encoded              |
| Use Cases | Configs, flags | Passwords, tokens           |
