---
weight: 20
sourceSHA: 7b4782eed0116102aff5b7b11959d65234bac6242c9dfaddc589ffde09f5b4a0
---

# Adding Listener Ports

The load balancer supports receiving client connection requests through listener ports and corresponding protocols, including HTTPS, HTTP, gRPC, TCP, and UDP.

## Prerequisites

If you need to add an HTTPS listener port, you should also contact the administrator to assign a TLS certificate to the current project for encryption.

## Steps

1. Go to **Container Platform**.

2. In the left navigation bar, click **Network** > **Load Balancing**.

3. Click the name of the load balancer to enter the details page.

4. Click **Add Listener Port**.

5. Refer to the following instructions to configure the relevant parameters.

   | Parameter        | Description                                                                                                                                                                                                                                                                                           |
   | ----------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
   | **Protocol**    | Supported protocols include HTTPS, HTTP, gRPC, TCP, and UDP. When selecting HTTPS, a certificate must be added; adding a certificate is optional for the gRPC protocol. <br /><br />**Note**: <br /><ul><li>When selecting the gRPC protocol, the backend protocol defaults to gRPC, which does not support session persistence.</li><li>If a certificate is set for the gRPC protocol, the load balancer will unload the gRPC certificate and forward the unencrypted gRPC traffic to the backend service.</li><li>If using a Google GKE cluster, a load balancer of the same **container network type** cannot have both TCP and UDP listener protocols simultaneously.</li></ul> |
   | **Internal Routing Group** | - When the load balancing algorithm is set to **Round Robin (RR)**, traffic will be distributed to the internal routing ports in the order of the internal routing group. <br />- When the load balancing algorithm is set to **Weighted Round Robin (WRR)**, internal routes with higher weight values have a higher probability of being selected; traffic will be distributed to the internal routing ports based on the configured **weight**. <br />**Tip**: The probability calculation is the ratio of the current weight value to the sum of all weight values.                                                                                                                                                              |
   | **Session Persistence**  | Always forward specific requests to the backend service corresponding to the aforementioned internal routing group. <br /><br />Specific requests include (choose one):<ul><li>Source Address Hash: All requests from the same IP address. <br />**Note**: In public cloud environments, the source address often changes, which may cause requests from the same client to have different source IP addresses at different times, leading to the source address hash technique not achieving the expected effect.</li><li>Cookie key: Requests that carry a specified cookie.</li><li>Header name: Requests that carry a specified header.</li></ul>                            |
   | **Backend Protocol**  | The protocol used for forwarding traffic to the backend services. For example, if forwarding to backend Kubernetes or dex services, the HTTPS protocol must be selected.                                                                                                                                                                                                                               |

6. Click **OK**.

## Subsequent Actions

For traffic from HTTP, gRPC, and HTTPS ports, in addition to the default internal routing group, you can set more varied back-end service matching [rules](./add_rule.mdx). The load balancer will initially match the corresponding backend service according to the set rules; if the rule match fails, it will then match the backend services corresponding to the aforementioned internal routing group.

## Related Operations

You can click the â‹® icon on the right side of the list page or click **Actions** in the upper right corner of the details page to update the default route or delete the listener port as needed.

**Note**: If the resource allocation method of the load balancer is **Port**, only administrators can delete the related listener ports in the **Platform Management** view.
