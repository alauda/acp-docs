---
weight: 10
i18n:
  title:
    en: Upgrading Alauda Container Platform Argo Rollouts
    zh: 升级 Alauda Container Platform Argo Rollouts
---

# Upgrading Alauda Container Platform Argo Rollouts

## Prerequisites

1. **Download** the **Alauda Container Platform Argo Rollouts** cluster plugin installation package corresponding to your platform architecture.
2. **Upload** the installation package using the Upload Packages mechanism.

:::info
Upload Packages:
**Administrator** > **Marketplace** > **Upload Packages** page.
Click **Help Document** on the right to get instructions on how to publish the cluster plugin to cluster. For more details, please refer to [CLI](/ui/cli_tools/index.mdx).
:::

## Upgrading Alauda Container Platform Argo Rollouts

### Procedure

1. Log into the Web Console and switch to the **Administrator** view.
2. Navigate to **Clusters > Clusters**.
3. Select the **workload cluster** you want to upgrade and open its detail page.
4. Go to the **Functional Components** tab.
5. Click the **Upgrade** button.

:::info
If upgrading to v4.2.6, the following steps are required:

1. Find the **argo-rollouts** moduleinfo instance on the **global** cluster:

   ```bash
   $ kubectl get moduleinfo | grep {cluster} | grep argo-rollouts
   ```

   The `{cluster}` is the name of the workload cluster.

2. Based on the cluster's **argo-rollouts** moduleinfo name, edit the moduleinfo to add the `valuesOverride` field:

   ```bash
   $ kubectl edit moduleinfo {moduleinfo-name}
   ```

   Modify it as follows:

   ```yaml
   spec:
     config: {}
     valuesOverride:
       acp/argoproj/chart/argo-rollouts:
         controller:
           initContainers:
           - args:
             - cp /bin/rollouts-plugin-trafficrouter-gatewayapi /plugins
             command:
             - /bin/sh
             - -c
             image: {registry address}/acp/argoproj-labs/rollouts-plugin-trafficrouter-gatewayapi:v0.6.0-6
             name: copy-gwapi-plugin
             resources:
               requests:
                 cpu: 100m
                 memory: 64Mi
               limits:
                 cpu: 200m
                 memory: 128Mi
                 ephemeral-storage: 500Mi
             volumeMounts:
               - mountPath: /plugins
                 name: gwapi-plugin
   ```

Where `{registry address}` needs to be replaced
:::